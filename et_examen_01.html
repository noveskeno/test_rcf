<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EXAMEN - 1</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>EXAMEN - 1</h1>
    <div class="badge">45 preguntas + 2</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>
  <button id="scrollTopBtn" class="scroll-top">‚Üë</button>
  
<script>
// Test data with questions and answers
// Test variado 2
const testData = {
  "1": {
    "q": "El RD 664/2015 aprueba el Reglamento de Circulaci√≥n Ferroviaria, pero: ¬øCu√°l es el objeto de este reglamento?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual, tanto en condiciones de explotaci√≥n normal como degradada, incluyendo se recuperaci√≥n efectiva tras una interrupci√≥n del servicio."},
      {"l": "B", "t": "El objeto de este Reglamento es establecer normas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma puntual, eficiente y segura en condiciones de explotaci√≥n normal y degradada, incluyendo su recuperaci√≥n efectiva tras una interrupci√≥n del servicio."},
      {"l": "C", "t": "El objeto de este Reglamento es desarrollar normas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma puntual, eficiente y segura en condiciones de explotaci√≥n normal como degradada, incluyendo se recuperaci√≥n efectiva tras una interrupci√≥n del servicio."},
      {"l": "D", "t": "El objeto de este Reglamento es desarrollar reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual, en condiciones de explotaci√≥n normal."}
    ]},
  "2": {
    "q": "Dentro del apartado de las definiciones, las siglas CMS hacen referencia a:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cultura, Medida y Seguridad"},
      {"l": "B", "t": "Control, Mando y Se√±alizaci√≥n"},
      {"l": "C", "t": "Corriente de Mando de Se√±alizaci√≥n"},
      {"l": "D", "t": "Cuadro, Mando y supervisi√≥n"}
    ]},
  "3": {
    "q": "Un enclavamiento es:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en plena v√≠a, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales."},
      {"l": "B", "t": "Sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en √°mbito de las estaciones, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales."},
      {"l": "C", "t": "Sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en √°mbito de las estaciones, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, sin incluir los PN ni las √≥rdenes que transmiten las se√±ales."},
      {"l": "D", "t": "Sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en √°mbito de las estaciones y plena v√≠a a la vez, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales."}
    ]},
  "4": {
    "q": "Para que una composici√≥n de una Empresa Ferroviaria pueda acceder a la Red Ferroviaria de Inter√©s General (RFIG) son necesarios una serie de elementos, se√±ala la respuesta correcta.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Sistema de protecci√≥n de tren compatible con alguno de los instalados en la infraestructura (si √©sta dispone de ellos), dispositivo de vigilancia y Radiotelefon√≠a."},
      {"l": "B", "t": "Sistemas de protecci√≥n de tren compatibles con todos los instalados en la infraestructura, dispositivo de vigilancia y Radiotelefon√≠a."},
      {"l": "C", "t": "Sistema de detecci√≥n de tren compatible con alguno de los instalados en la Infraestructura (si √©sta dispone de ellos), dispositivo de detecci√≥n y Radiotelefon√≠a."},
      {"l": "D", "t": "Sistema de protecci√≥n de tren compatible con todos los instalados en la infraestructura, dispositivo de vigilancia y telefon√≠a GSM-R."}
    ]},
  "5": {
    "q": "A que denominamos ancho de v√≠a:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "A la distancia entre ejes de carriles, medido a 35mm del extremo exterior de la cabeza."},
      {"l": "B", "t": "A la distancia entre las caras exteriores de los carriles, medida a 16mm por debajo de la perpendicular al plano de apoyo de la rueda."},
      {"l": "C", "t": "A la distancia entre las caras internas del carril, medida 14mm por debajo de la superficie de rodadura."},
      {"l": "D", "t": "Es el ancho que utilizaban los carros romanos en la v√≠a augusta."}
    ]},
  "6": {
    "q": "Las caracter√≠sticas de la Red Ferroviaria de Inter√©s General, incluyendo la situaci√≥n de las principales estaciones y nudos ferroviarios, distancias kilom√©tricas entre estaciones, diferentes tipos de v√≠a (v√≠a √∫nica y doble v√≠a, electrificada o sin electrificar) y tipos de bloqueo, se publican anualmente en:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "La Declaraci√≥n de la Red"},
      {"l": "B", "t": "ICL Anual (Informe de Circulaci√≥n de l√≠neas)"},
      {"l": "C", "t": "ICL mensual"},
      {"l": "D", "t": "Horario de los Trenes"}
    ]},
  "7": {
    "q": "¬øQu√© simboliza el siguiente dibujo en se√±alizaci√≥n?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Color azul, parada en Alta velocidad"},
      {"l": "B", "t": "Color blanco, movimiento autorizado"},
      {"l": "C", "t": "Color blanco, rebase autorizado"},
      {"l": "D", "t": "Se√±al baja de salida"}
    ]},
  "8": {
    "q": "La orden FOM 2872/2010 agrupa las habilitaciones en varios grupos:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Circulaci√≥n, infraestructura, operaciones de tren, conducci√≥n, mantenimiento de material rodante."},
      {"l": "B", "t": "Encargados, pilotos, responsables, maquinistas, auxiliares"},
      {"l": "C", "t": "Infraestructura, seguridad, conducci√≥n, regulaci√≥n, material"},
      {"l": "D", "t": "Licencias, certificados, aptitudes, autorizaciones, homologaciones"}
    ]},
  "9": {
    "q": "¬øQu√© se entiende por capacidad?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Numero de franjas horarias disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la tipolog√≠a del tr√°fico."},
      {"l": "B", "t": "Numero de franjas disponibles en un tramo de infraestructura ferroviaria, en un espacio determinado, en funci√≥n de la tipolog√≠a del tr√°fico."},
      {"l": "C", "t": "Numero de franjas horarias disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la tipolog√≠a del terreno."},
      {"l": "D", "t": "Numero de franjas horarias disponibles en la infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la tipolog√≠a del tr√°fico."}
    ]},
  "10": {
    "q": "Dentro de las normas reglamentarias que debe elaborar el Administrador de Infraestructuras. ¬øQu√© documento describe las caracter√≠sticas, el funcionamiento y la utilizaci√≥n de toda clase de instalaciones de seguridad?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Consigna serie P"},
      {"l": "B", "t": "Consigna serie A"},
      {"l": "C", "t": "Consigna serie C"},
      {"l": "D", "t": "Un Aviso Av"}
    ]},
  "11": {
    "q": "El informe de Circulaci√≥n de l√≠neas Mensuales, se publicar√° ‚Ä¶",
    "a": "B",
    "opts": [
      {"l": "A", "t": "‚Ä¶ entre el 1er y el 5¬∫ d√≠a de cada mes."},
      {"l": "B", "t": "‚Ä¶ el d√≠a laborable m√°s pr√≥ximo al 20 de cada mes."},
      {"l": "C", "t": "‚Ä¶ el que se publique el mes anterior, ser√° valido a partir de las 00:00 del d√≠a 1 del mes que corresponda."},
      {"l": "D", "t": "‚Ä¶ semanalmente, aunque si no hay variaciones, se publicar√° el mismo de la semana anterior."}
    ]},
  "12": {
    "q": "Las se√±ales se clasifican seg√∫n su funci√≥n en:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Preavanzada, avanzada, entrada y salida"},
      {"l": "B", "t": "Fijas, port√°tiles y de los Trenes"},
      {"l": "C", "t": "Fundamentales, indicadoras y de limitaci√≥n de velocidad."},
      {"l": "D", "t": "Pantallas, cartelones y luminosas."}
    ]},
  "13": {
    "q": "La se√±al de la figura",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Ordena no exceder la velocidad indicada (en km/h), al pasar por la se√±al de limitaci√≥n temporal de velocidad m√°xima a la que anuncia. Su posici√≥n marca el punto en el que se debe iniciar el frenado del tren para poder cumplir la orden de la se√±al de limitaci√≥n temporal de velocidad m√°xima."},
      {"l": "B", "t": "Indica no exceder la velocidad indicada (en km/h), al pasar por la se√±al de limitaci√≥n temporal de velocidad m√°xima a la que anuncia. Su posici√≥n marca el punto en el que se debe iniciar el frenado del tren para poder cumplir la orden de la se√±al de limitaci√≥n temporal de velocidad m√°xima."},
      {"l": "C", "t": "Ordena no exceder la velocidad indicada (en km/h)"},
      {"l": "D", "t": "Indica no exceder la velocidad indicada (en km/h)"}
    ]},
  "14": {
    "q": "Cuando el personal de infraestructura detecte alg√∫n defecto que requiera el establecimiento de una restricci√≥n de velocidad ‚Ä¶",
    "a": "C",
    "opts": [
      {"l": "A", "t": "‚Ä¶ lo reparar√° inmediatamente, no se pueden establecer limitaciones de velocidad que no est√©n aprobadas."},
      {"l": "B", "t": "‚Ä¶ tratar√° con la cadena de mando la decisi√≥n que m√°s proceda."},
      {"l": "C", "t": "‚Ä¶ dispondr√° la instalaci√≥n de se√±ales fijas a la mayor brevedad posible, remitir√° el telefonema correspondiente al Responsable de circulaci√≥n de una de las estaciones colaterales del trayecto, o al CTC."},
      {"l": "D", "t": "‚Ä¶ las reducciones de velocidad son siempre a Cambio Significativo."}
    ]},
  "15": {
    "q": "Para la ejecuci√≥n de trabajos en v√≠a con interrupci√≥n de la circulaci√≥n, se utilizar√°n los siguientes sistemas:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Intervalo horario, intervalo programado y anormalidad"},
      {"l": "B", "t": "Suspensi√≥n temporal del bloqueo"},
      {"l": "C", "t": "Los trabajos siempre son compatibles con la circulaci√≥n de trenes, de una u otra manera."},
      {"l": "D", "t": "Los intervalos disponibles entre los trenes permiten ejecutar la mayor√≠a de los trabajos sin m√°s complicaciones."}
    ]},
  "16": {
    "q": "Cu√°l de las siguientes definiciones corresponde con 'Accidente grave'",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Suceso relevante no recogido en el RD 929 interesante para la AESF y de dif√≠cil an√°lisis."},
      {"l": "B", "t": "Suceso, que afecte o pueda afectar a la seguridad de las operaciones ferroviarias."},
      {"l": "C", "t": "Cualquier colisi√≥n o descarrilamiento de trenes con resultado de al menos una v√≠ctima mortal o de cinco o m√°s heridos graves o grandes da√±os al material rodante, a la infraestructura o al medio ambiente, y cualquier otro accidente similar, con un efecto evidente en la normativa de seguridad ferroviaria o en la gesti√≥n de seguridad (por grandes da√±os se entender√° da√±os cuyo coste pueda evaluar inmediatamente el organismo de investigaci√≥n en el menos un total de dos millones de euros)."},
      {"l": "D", "t": "Suceso repentino, no deseado ni intencionado, o una cadena de sucesos de ese tipo, de consecuencias perjudiciales. Se dividen en las siguientes categor√≠as: colisiones, descarrilamientos, accidentes en pasos a nivel, da√±os causados a personas por material rodante en movimiento, incendios y otros."}
    ]},
  "17": {
    "q": "Adif gestiona redes de diferentes anchos, se√±ala cual es la respuesta correcta.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "1000mm, 1435mm y 1668mm"},
      {"l": "B", "t": "1070mm, 1453mm y 1674mm"},
      {"l": "C", "t": "1000mm, 1668mm en v√≠as de tercer carril"},
      {"l": "D", "t": "Ninguna de las anteriores es correcta"}
    ]},
  "18": {
    "q": "En los trabajos programados, se deber√° indicar en el acta semanal‚Ä¶",
    "a": "A",
    "opts": [
      {"l": "A", "t": "‚Ä¶ el sistema de protecci√≥n a emplear para la realizaci√≥n de los mismos"},
      {"l": "B", "t": "‚Ä¶ el Encargado de Trabajos responsable del mismo"},
      {"l": "C", "t": "‚Ä¶ los n√∫meros de los telefonemas que se deben emitir por el ET"},
      {"l": "D", "t": "‚Ä¶ los trabajos programados siempre se realizar√°n en Bloqueo por ocupaci√≥n, y se deber√°n indicar los agentes implicados en la protecci√≥n del tajo."}
    ]},
  "19": {
    "q": "(‚Ä¶)Indicadora de que se instala en el inicio de la convergencia(‚Ä¶) el punto hasta el que es compatible la circulaci√≥n simult√°nea por ambas v√≠as, y adem√°s ‚Ä¶",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Es una se√±al con escasa implantaci√≥n y tendencia a la desaparici√≥n"},
      {"l": "B", "t": "Cuando existen se√±ales de salida no ser√° imprescindible"},
      {"l": "C", "t": "Se coloca en paralelo a los puntos de cantonamiento circulando en ERTMS N2"},
      {"l": "D", "t": "Ninguna de las anteriores es correcta"}
    ]},
  "20": {
    "q": "El sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en el √°mbito de las estaciones, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales se denomina‚Ä¶",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Bloqueo"},
      {"l": "B", "t": "Estaci√≥n"},
      {"l": "C", "t": "Establecimiento"},
      {"l": "D", "t": "Enclavamiento"}
    ]},
  "21": {
    "q": "Se considera herramienta manual‚Ä¶",
    "a": "C",
    "opts": [
      {"l": "A", "t": "‚Ä¶ aquella herramienta desprovista de motor de explosi√≥n, el√©ctrico, bater√≠as o dep√≥sitos de material combustible, sin riesgo de provocar incidencias o incendios."},
      {"l": "B", "t": "‚Ä¶ solo se consideran herramientas manuales las herramientas de medici√≥n"},
      {"l": "C", "t": "‚Ä¶aquella que por su peso, manejo, ausencia de fijaci√≥n mec√°nica al armamento de v√≠a o de rodadura‚Ä¶ puede retirarse de la v√≠a por la persona que la maneja."},
      {"l": "D", "t": "‚Ä¶ las definidas en la correspondiente instrucci√≥n espec√≠fica."}
    ]},
  "22": {
    "q": "¬øD√≥nde se situaran las se√±ales en un tramo de v√≠a √∫nica?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "A la derecha de la v√≠a, o en la vertical de la misma."},
      {"l": "B", "t": "A ambos lados de la v√≠a, o en la vertical de la misma."},
      {"l": "C", "t": "A la derecha de la v√≠a"},
      {"l": "D", "t": "A la derecha de la v√≠a exterior m√°s pr√≥xima, o en la vertical de esta √∫ltima."}
    ]},
  "23": {
    "q": "La protecci√≥n de los trabajos en la aplicaci√≥n de la ILT‚Ä¶",
    "a": "D",
    "opts": [
      {"l": "A", "t": "No es necesario, ya que se realizan en los intervalos entre trenes y las comunicaciones establecidas entre el RC y el ET garantizan la seguridad."},
      {"l": "B", "t": "Los RC cerraran las se√±ales de salida, desactivaran los sistemas de bloqueo, formaci√≥n autom√°tica de itinerarios, y los de apertura autom√°tica de se√±ales, si existen y adem√°s activar√°n aquellos sistemas que impidan el establecimiento del bloqueo a su colateral."},
      {"l": "C", "t": "Los ET siempre que sea posible, utilizaran los √∫tiles de cortocircuito y verificaran por observaci√≥n directa o por comunicaci√≥n con el RC la efectividad de la protecci√≥n; en los casos en que no sea compatible, los ET una vez autorizado el trabajo, colocaran pantallas de parada a una distancia m√≠nima de 500m."},
      {"l": "D", "t": "Las respuestas B y C son correctas"}
    ]},
  "24": {
    "q": "¬øD√≥nde se instalaran las pantallas de proximidad?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "A las distancias establecidas, delante de las se√±ales avanzadas, excepto si adem√°s de avanzadas realizan la funci√≥n de entrada o salida, y de las se√±ales de protecci√≥n de PN cuando no sea visible a la distancia de 300m."},
      {"l": "B", "t": "A las distancias establecidas, delante de las se√±ales de protecci√≥n de PN y de las se√±ales avanzadas cuando no sean visibles a la distancia de 300m, excepto si adem√°s de avanzadas realizan funci√≥n de entrada o salida."},
      {"l": "C", "t": "A las distancias establecidas, delante de las se√±ales avanzadas y de las se√±ales de protecci√≥n de PN, cuando no sean visibles a la distancia de 300m, excepto si adem√°s de avanzadas realizan funci√≥n de entrada o salida."},
      {"l": "D", "t": "A las distancias establecidas, delante de las se√±ales avanzadas a las distancias establecidas, excepto se adem√°s de avanzadas realizan la funci√≥n de entrada o salida, y de las se√±ales de protecci√≥n de PN cuando no sea visible a la distancia de m√°s de 300m."}
    ]},
  "25": {
    "q": "Para la aplicaci√≥n del sistema de trabajos con Entrega de V√≠a Bloqueada. Responda la correcta.",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Es imprescindible que existan trenes de trabajo."},
      {"l": "B", "t": "No es necesario que las dos estaciones colaterales del trayecto est√©n abiertas, pudiendo ser una de ellas NC."},
      {"l": "C", "t": "El ET deber√° disponer en el tajo o zona de pruebas, de un medio de comunicaci√≥n telef√≥nico con el RC de una de las estaciones colaterales o del CTC."},
      {"l": "D", "t": "Para cada tajo dentro de un trayecto habr√° un ET que se encargar√° del mismo"}
    ]},
  "26": {
    "q": "Cuando la se√±al de LTV establece dos l√≠mites diferentes, uno sobre otro, y sobre ella se instala un cartel√≥n con las letras M y V, estando la primera sobre la segunda. ¬øCual marca la LTV para una m√°quina de v√≠a?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "El n√∫mero superior"},
      {"l": "B", "t": "El n√∫mero correspondiente a la M"},
      {"l": "C", "t": "El n√∫mero correspondiente a la letra V"},
      {"l": "D", "t": "Las respuestas A y B son correctas"}
    ]},
  "27": {
    "q": "El acceso de los trenes de trabajo o pruebas al trayecto con EVB se realizar√° ‚Ä¶",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Con la se√±al de marche el tren presentada por el ET"},
      {"l": "B", "t": "Con la se√±al de marche el tren presentada por el RC"},
      {"l": "C", "t": "Con la autorizaci√≥n de rebase de la se√±al de salida que dar√° el et"},
      {"l": "D", "t": "Con la indicaci√≥n de 'rebase autorizado' o la autorizaci√≥n de rebase de la se√±al que realizar√° el RC."}
    ]},
  "28": {
    "q": "Las indicaciones de la figura inferior se corresponde con:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Un paso a nivel protegido con visibilidad inferior a 300m"},
      {"l": "B", "t": "Un paso a nivel protegido con visibilidad superior a 300m"},
      {"l": "C", "t": "Un paso a nivel sin proteger independientemente de su visibilidad"},
      {"l": "D", "t": "Un paso a nivel en v√≠as de Alta velocidad"}
    ]},
  "29": {
    "q": "Si por la importancia de los trabajos, no fuese posible aplicar las prescripciones recogidas en el libro tercero del RCF. ¬øC√≥mo podr√° regularse la forma de proceder?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Mediante un modificativo que ampl√≠e las prescripciones actuales."},
      {"l": "B", "t": "Mediante una Consigna del AI."},
      {"l": "C", "t": "Mediante una Ficha Gu√≠a del AESF."},
      {"l": "D", "t": "Todos los trabajos que afecten a la zona de peligro se regulan mediante el RCF, no pudi√©ndose llevar a cabo de otra forma."}
    ]},
  "30": {
    "q": "Estas se√±ales se colocan en aquellos puntos singulares de especial riesgo que determine el AI. Qu√© afirmaci√≥n es correcta.",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Las se√±ales anteriores solamente son v√°lidas en periodo de lluvia y nieve abundantes, cuando un ET que se encuentre en la zona y cargo de la se√±al, notifique al maquinista la existencia de peligro."},
      {"l": "B", "t": "Cuando el RC de la banda de regulaci√≥n reciba informaci√≥n de la existencia o posibilidad de existencia de alg√∫n riesgo, emitir√° una notificaci√≥n a los maquinistas. En ausencia de notificaci√≥n, carece de significado."},
      {"l": "C", "t": "Estas se√±ales no se encuentran recogidas en el RCF."},
      {"l": "D", "t": "Estas se√±ales se encuentran respectivamente en los puntos de frenado y aceleraci√≥n entorno a un tramo peligroso conocido."}
    ]},
  "31": {
    "q": "¬øA qui√©n cursar√° el Encargado de los trabajos, el telefonema de solicitud de intervalo de liberaci√≥n por tiempo?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "A los RC de las estaciones colaterales del trayecto afectado o al del CTC."},
      {"l": "B", "t": "Al RC de una de las estaciones colaterales del trayecto afectado o al del CTC."},
      {"l": "C", "t": "Al RC de una de las estaciones colaterales del trayecto afectado y al del CTC."},
      {"l": "D", "t": "Al RC de una de las estaciones colaterales del trayecto afectado y al del PM."}
    ]},
  "32": {
    "q": "¬øC√≥mo proceder√° el Encargado de trabajos en la EVB, para la protecci√≥n de un trabajo sin trenes de trabajos?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "En trayectos con circuito de v√≠a y siempre que no sea incompatible con los trabajos, colocando la barra o √∫tiles de cortocircuito y verificando la ocupaci√≥n artificial. En el resto de casos colocando siempre se√±ales port√°tiles de parada a una distancia m√≠nima de 500metros del tajo por ambas cabeceras del tajo."},
      {"l": "B", "t": "En trayectos con circuito de v√≠a y siempre que no sea incompatible con los trabajos, colocando la barra o √∫tiles de cortocircuito. En el resto de casos colocando siempre se√±ales port√°tiles de parada a una distancia m√≠nima de 300metros del tajo por la cabecera desde donde se rec√≠banlos trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas."},
      {"l": "C", "t": "En trayectos con circuito de v√≠a y siempre que no sea incompatible con los trabajos, colocando la barra o √∫tiles de cortocircuito y verificando la ocupaci√≥n artificial. En el resto de casos colocando se√±ales port√°tiles de parada a una distancia m√≠nima de 500metros del tajo por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas."},
      {"l": "D", "t": "Sin trenes de trabajo, solicitar√° un Intervalo de Liberaci√≥n por Tiempo."}
    ]},
  "33": {
    "q": "Los trabajos de 2¬™ categor√≠a de instalaciones de seguridad corresponden a ‚Ä¶",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Trabajos de reparaci√≥n de aver√≠as y trabajos con cierta repercusi√≥n en la circulaci√≥n."},
      {"l": "B", "t": "Trabajos de mantenimiento programado o grandes trabajos de conservaci√≥n."},
      {"l": "C", "t": "Grandes trabajos de conservaci√≥n o reparaci√≥n de aver√≠as."},
      {"l": "D", "t": "Trabajos de mantenimiento programado o reparaci√≥n de aver√≠as."}
    ]},
  "34": {
    "q": "¬øA qui√©n deber√° consultar el personal una duda de aplicaci√≥n de las normas de circulaci√≥n?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Al personal de formaci√≥n."},
      {"l": "B", "t": "Al PM."},
      {"l": "C", "t": "A su responsable o mando inmediato."},
      {"l": "D", "t": "A cualquier agente debidamente habilitado."}
    ]},
  "35": {
    "q": "¬øCu√°l de las siguientes no forma parte de las obligaciones de un Encargado de los trabajos?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Durante la descarga de material deber√° garantizar que estos interfieren el g√°libo."},
      {"l": "B", "t": "Cuando preste servicio en la v√≠a o sus proximidades, siempre que sus obligaciones se lo permitan, presenciar√° el paso de los trenes para comprobar que circulan completos y no presentan ninguna anormalidad."},
      {"l": "C", "t": "Intervenir en el sistema de trabajos en intervalo de liberaci√≥n por tiempo, seg√∫n est√° determinado en el RCF."},
      {"l": "D", "t": "Las tres respuestas son obligaciones del Encargado de Trabajos."}
    ]},
  "36": {
    "q": "¬øCu√°les son los √∫tiles vinculados a un tajo de trabajo?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Banderines rojos, 2linternas dotadas de luces de color verde, blanco y rojo, dos barras o √∫tiles de cortocircuito(seg√∫n situaci√≥n), se√±ales de parada de pantalla por cada punto que se precise proteger (en trayectos sin circuitos de v√≠a), cartelones de Silbar Obreros de ser necesarios y un medio de comunicaci√≥n port√°til."},
      {"l": "B", "t": "Banderines rojos, linterna dotada de luces de color blanco y rojo, tantas barras o √∫tiles de cortocircuito homologados como v√≠as existan(seg√∫n situaci√≥n), se√±ales de parada de pantalla por cada punto que se precise proteger (en trayectos sin circuitos de v√≠a), cartelones de Silbar Obreros de ser necesarios y un medio de comunicaci√≥n port√°til."},
      {"l": "C", "t": "Banderines rojos, linterna dotada de luces de color blanco, verde y rojo, tantas barras o √∫tiles de cortocircuito homologados como v√≠as existan, se√±ales de parada de pantalla por cada punto que se precise proteger (en trayectos sin circuitos de v√≠a), cartelones de Silbar Obreros de ser necesarios y un medio de comunicaci√≥n port√°til."},
      {"l": "D", "t": "Banderines, linterna dotada de luces de color blanco y rojo, tantas barras como v√≠as existan (seg√∫n situaci√≥n), se√±ales de parada de pantalla por cada punto que se precise proteger (en trayectos sin circuitos de v√≠a), cartelones de Silbar Obreros de ser necesarios y un medio de comunicaci√≥n port√°til."}
    ]},
  "37": {
    "q": "¬øCon qu√© √∫tiles de servicio se dotar√° de forma personal a un Encargado de trabajos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Silbato"},
      {"l": "B", "t": "Casco de seguridad y silbato."},
      {"l": "C", "t": "Casco de seguridad, silbato y linterna dotada de luces de colores blanca y roja"},
      {"l": "D", "t": "Ninguno."}
    ]},
  "38": {
    "q": "¬øEn qu√© casos es obligatorio el uso del alfabeto radiof√≥nico internacional?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Siempre que existan condiciones climatol√≥gicas alteradas."},
      {"l": "B", "t": "Para transmitir el nombre de un lugar o estaci√≥n."},
      {"l": "C", "t": "Para citar la identidad de un agente."},
      {"l": "D", "t": "Para identificar las letras del alfabeto."}
    ]},
  "39": {
    "q": "¬øCon que termino confirmaremos que el mensaje repetido se ajusta al mensaje enviado?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Recibido"},
      {"l": "B", "t": "Acertado."},
      {"l": "C", "t": "Cambio."},
      {"l": "D", "t": "Correcto."}
    ]},
  "40": {
    "q": "En el libro de telefonemas para los trabajos, los que sean transmitidos se numerar√°n correlativamente comenzando por el 1.¬øCu√°ndo volveremos a comenzar por el 1?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Cuando cambiemos de libro."},
      {"l": "B", "t": "Cuando llegue al 1000."},
      {"l": "C", "t": "Cuando cambie el agente transmisor."},
      {"l": "D", "t": "Cuando se llegue a 100."}
    ]},
  "41": {
    "q": "¬øCu√°l de las siguientes informaciones no se reflejar√°n en la entrega de servicio entre Encargados de trabajo?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Sistema de protecci√≥n de trabajos en ejecuci√≥n a su cargo y horario previsto de finalizaci√≥n."},
      {"l": "B", "t": "Disponibilidad de los √∫tiles de servicio y medidas adoptadas en caso de ausencia de los mismos."},
      {"l": "C", "t": "Ubicaci√≥n de las se√±ales de Velocidad M√°xima implantadas con motivo de los trabajos."},
      {"l": "D", "t": "Las tres respuestas anteriores son de obligado registro en la entrega de servicio."}
    ]},
  "42": {
    "q": "¬øQu√© podr√° regularse mediante Consigna, en referencia a la entrega de servicio entre Encargados de trabajos, cuando la duraci√≥n y continuidad de los trabajos lo aconsejen?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Cu√°l ser√° el Encargado de trabajos responsable de las entregas de servicio."},
      {"l": "B", "t": "Que deber√° figurarse en las entregas de servicio entre Encargados de Trabajos."},
      {"l": "C", "t": "En qu√© libro de telefonemas se realizar√° la entrega de servicio."},
      {"l": "D", "t": "Nada. De tener que regularse alguna particularidad, esta vendr√≠a reflejada en el Acta de trabajos."}
    ]},
  "43": {
    "q": "Cuando no sea posible aplicar lo dispuesto en el horario de los trenes para la numeraci√≥n de un tren que tenga que circular para la realizaci√≥n de una actividad de Adif le dar√° un c√≥digo inequ√≠voco (T1, T2,T3, etc.) con el fin de tenerlo identificado. Respecto a lo indicado marque la respuesta correcta.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Cuando el tren vaya a circular exclusivamente en una EVB."},
      {"l": "B", "t": "Para los trenes que operen al amparo de una EVB, manteniendo la identificaci√≥n inequ√≠voca asignada en el origen del tren anterior a la incorporaci√≥n de la EVB siempre que haya circulado con Bloqueo nominal."},
      {"l": "C", "t": "Cuando el tren vaya a circular exclusivamente por un trayecto en el que se haya aplicado un proceso de trabajos de los contemplados en el Cap√≠tulo 3 del Libro 3 del RCF."},
      {"l": "D", "t": "El PM dispondr√° la forma de actuaci√≥n."}
    ]},
  "44": {
    "q": "En veh√≠culos de zapatas y relacionado con el freno de estacionamiento. ¬øCu√°l es el m√©todo de comprobaci√≥n de la posici√≥n?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Veh√≠culos con visores de zapatas; verde aflojado y blanco apretado."},
      {"l": "B", "t": "Observ√°ndolo"},
      {"l": "C", "t": "Tocando levemente la llanta, a mayor temperatura m√°s apriete."},
      {"l": "D", "t": "Ordenando al Maquinista el apriete y comprobando el movimiento de la zapata, esta es la √∫nica comprobaci√≥n fehaciente."}
    ]},
  "45": {
    "q": "Estando los trabajos a cargo de un solo ET y siendo coincidentes los puntos de inicio y finalizaci√≥n de la EVB. En el trayecto de v√≠a doble banalizada de dos v√≠as. ¬øPuede solicitarse en un solo telefonema EVB para las dos v√≠as?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "S√≠."},
      {"l": "B", "t": "No."},
      {"l": "C", "t": "S√≠ pero siempre con autorizaci√≥n del Responsable de Circulaci√≥n del CTC."},
      {"l": "D", "t": "No es conveniente pero s√≠ recomendable."}
    ]},
  "R1": {
    "q": "Los trabajos realizados en modalidad de Intervalo de Liberaci√≥n por Tiempo:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Deber√°n establecerse entre estaciones abiertas."},
      {"l": "B", "t": "El tiempo m√°ximo de la realizaci√≥n ser√° el que determine el ET."},
      {"l": "C", "t": "Se podr√°n establecer varios tajos a cargo de un mismo Piloto de Seguridad Habilitado para Concertar trabajos, dentro de un mismo trayecto."},
      {"l": "D", "t": "Solamente se comunican al RC, no es necesario establecer protocolos ni transmitir telefonemas."}
    ]},
  "R2": {
    "q": "De entre los siguientes ejemplos, ¬øcu√°l no corresponde con un bloqueo?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "BLA."},
      {"l": "B", "t": "ERTMS"},
      {"l": "C", "t": "BEM"},
      {"l": "D", "t": "BA."}
    ]}
};


  let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
 // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
</script>
</body>
</html>
