<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EXAMEN - PILOTO DE SEGURIDAD 06</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>EXAMEN - PILOTO DE SEGURIDAD 06</h1>
    <div class="badge">44 preguntas</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>

<script>
// Test data with questions and answers
const testData = {
  "1": {q: "En un P.N clase A3, cuando la anormalidad que produjo el cierre es debida a los elementos o equipos relacionados con la detecci√≥n de las circulaciones ferroviarias, el sistema produce..", a: "C", opts: [
    {l: "A", t: "No realiza ninguna acci√≥n."},
    {l: "B", t: "El cierre inmediato de las semibarreras y el sistema al cabo de 7 minutos genera la orden de apertura."},
    {l: "C", t: "El cierre inmediato de las semibarreras y el sistema al cabo de 10 minutos genera la orden de apertura."},
    {l: "D", t: "El cierre inmediato de las semibarreras y las mantiene en esta posici√≥n hasta la llegada del agente a pie de paso."}
  ]},
  "2": {q: "¬øCu√°l es un principio b√°sico de los Bloqueos?", a: "D", opts: [
    {l: "A", t: "Dos trenes que circulen por la misma v√≠a y en distinto sentido, ir√°n separados una distancia que garantice que no se va a producir un alcance."},
    {l: "B", t: "Cuando un tren est√© circulando por una v√≠a, se expedir√° otro en sentido contrario por la misma v√≠a desde la estaci√≥n colateral."},
    {l: "C", t: "Las instalaciones garantizar√°n la seguridad necesaria para incompatibilizar las maniobras que se realicen por la banda de una estaci√≥n, con la llegada de un tren por dicha banda."},
    {l: "D", t: "Dos trenes que circulen por la misma v√≠a y en el mismo sentido, ir√°n separados una distancia que garantice que no se va a producir un alcance."}
  ]},
  "3": {q: "Donde se determinan las condiciones para la obtenci√≥n de los t√≠tulos habilitantes que permiten el ejercicio de las funciones del personal ferroviario relacionadas con la seguridad en la circulaci√≥n, as√≠ como el r√©gimen de los centros homologados de formaci√≥n y de los de reconocimiento m√©dico de dicho personal.", a: "A", opts: [
    {l: "A", t: "La Orden FOM 2872/2010 y la Orden FOM 679/2015."},
    {l: "B", t: "El Real Decreto 623/2014."},
    {l: "C", t: "El Reglamento de Circulaci√≥n Ferroviario."},
    {l: "D", t: "Por normativa establecida por la AESF."}
  ]},
  "4": {q: "El Material Rodante Auxiliar se desplazar√°:", a: "C", opts: [
    {l: "A", t: "Salvo en donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo nominal o degradado de las l√≠neas por las que circule."},
    {l: "B", t: "Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo nominal de las l√≠neas por las que circule."},
    {l: "C", t: "Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo nominal o degradado de las l√≠neas por las que circule."},
    {l: "D", t: "Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo telef√≥nico o degradado de las l√≠neas por las que circule."}
  ]},
  "5": {q: "Marcha a la vista Art.", a: "D", opts: [
    {l: "A", t: "Impone al maquinista la obligaci√≥n de avanzar con la prudencia que requiera el caso, regulando la velocidad de acuerdo con la longitud de v√≠a que visualiza por delante del puesto de conducci√≥n, de forma que pueda detener el tren ante cualquier obst√°culo o se√±al de parada. Cuando se prescriba, se indicar√° el motivo y, si se conoce, la naturaleza del obst√°culo, o el tipo de reconocimiento a realizar."},
    {l: "B", t: "Impone al maquinista la obligaci√≥n de avanzar con la precauci√≥n que requiera el caso, regulando la velocidad de 30 km/h si la locomotora va tirando del tren, o de 20 km/h si va empuj√°ndolo, de forma que pueda detener el tren ante cualquier obst√°culo visible desde el puesto de conducci√≥n o ante una se√±al de parada. Cuando se prescriba, se indicar√° el motivo y, si se conoce, la naturaleza del obst√°culo, o el tipo de reconocimiento a realizar."},
    {l: "C", t: "Impone al maquinista la obligaci√≥n de avanzar con la precauci√≥n que requiera el caso, regulando la velocidad de 20 km/h si la locomotora va tirando del tren, o de 30 km/h s√≠ va empuj√°ndolo, de forma que pueda detener el tren ante cualquier obst√°culo visible desde el puesto de conducci√≥n o ante una se√±al de parada. Cuando se prescriba, se indicar√° el motivo y, si se conoce, la naturaleza del obst√°culo, o el tipo de reconocimiento a realizar."},
    {l: "D", t: "Impone al maquinista la obligaci√≥n de avanzar con la precauci√≥n que requiera el caso, regulando la velocidad de acuerdo con la longitud de v√≠a que visualiza por delante del puesto de conducci√≥n, de forma que pueda detener el tren ante cualquier obst√°culo o se√±al de parada. Cuando se prescriba, se indicar√° el motivo y, si se conoce, la naturaleza del obst√°culo, o el tipo de reconocimiento a realizar."}
  ]},
  "6": {q: "¬øPara qu√© se elaboran los avisos?", a: "B", opts: [
    {l: "A", t: "Para regular las condiciones de aplicaci√≥n del RCF en casos espec√≠ficos y en √°mbitos concretos del material remolcado."},
    {l: "B", t: "Fijar fechas de entrada en vigor o anulaci√≥n de documentos, en los casos de apertura, cierre o modificaci√≥n de l√≠neas o dependencias, o cuando sea preciso recordar o aclarar normas de circulaci√≥n."},
    {l: "C", t: "Dar a conocer las marchas de los trenes, las velocidades m√°ximas de circulaci√≥n, los Cambios Significativos de Velocidad M√°xima, las Limitaciones Temporales de Velocidad M√°xima y el resto de las informaciones relevantes para la circulaci√≥n de los trenes."},
    {l: "D", t: "Para regular las condiciones de aplicaci√≥n del RCF en casos espec√≠ficos y en √°mbitos concretos de algunas estaciones."}
  ]},
  "7": {q: "Seg√∫n su funci√≥n, ¬øqu√© se√±ales regulan la circulaci√≥n de trenes y maniobras?", a: "D", opts: [
    {l: "A", t: "Indicadoras."},
    {l: "B", t: "De Velocidad M√°xima."},
    {l: "C", t: "De Limitaci√≥n Temporal de Velocidad M√°xima."},
    {l: "D", t: "Fundamentales."}
  ]},
  "8": {q: "¬øC√≥mo se denomina el tramo de v√≠a en el que, en condiciones normales de circulaci√≥n, no puede haber m√°s de un tren de forma simult√°nea?", a: "C", opts: [
    {l: "A", t: "Tramo de l√≠nea."},
    {l: "B", t: "Trayecto."},
    {l: "C", t: "Cant√≥n de bloqueo."},
    {l: "D", t: "Bloqueo."}
  ]},
  "9": {q: "Cu√°l es el objeto de los enclavamientos:", a: "A", opts: [
    {l: "A", t: "Establecer una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a del itinerario, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales. Adem√°s, establece relaciones de incompatibilidad con posiciones o configuraciones de otros aparatos o se√±ales, impidiendo establecer itinerarios incompatibles que al interferir con los primeros afecten a su seguridad."},
    {l: "B", t: "Establecer una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a del itinerario, las semibarreras de PN (en su caso) y las indicaciones que transmiten las se√±ales. Adem√°s, establece relaciones de incompatibilidad con posiciones o configuraciones de otros aparatos o se√±ales, impidiendo establecer itinerarios incompatibles que al interferir con los primeros afecten a su seguridad."},
    {l: "C", t: "Establecer una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a del itinerario, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales. Adem√°s, establece relaciones de compatibilidad con posiciones o configuraciones de otros aparatos o se√±ales, impidiendo establecer itinerarios incompatibles que al interferir con los primeros afecten a su seguridad."},
    {l: "D", t: "Establecer una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a del itinerario, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales. Adem√°s, establece relaciones de compatibilidad con posiciones o configuraciones de otros aparatos o se√±ales, permitiendo establecer itinerarios incompatibles que al interferir con los primeros afecten a su seguridad."}
  ]},
  "10": {q: "¬øPor qu√© reglamento se regula el transporte de mercanc√≠as peligrosas que realizan las EF en Espa√±a?", a: "B", opts: [
    {l: "A", t: "Mediante la autorizaci√≥n de transporte excepcional (ATE)."},
    {l: "B", t: "Mediante el Reglamento Internacional sobre el Transporte de Mercanc√≠as Peligrosas por Ferrocarril (RID), sin perjuicio de los reglamentos nacionales y de la UE vigentes."},
    {l: "C", t: "A trav√©s del Sistema de Gesti√≥n de Seguridad de las EF (SGS)."},
    {l: "D", t: "A trav√©s de las fichas de la Uni√≥n Internacional de Ferrocarriles (UIC)."}
  ]},
  "11": {q: "¬øEn cu√°l de los siguientes casos el Maquinista debe hacer la se√±al ac√∫stica de \"atenci√≥n especial\" con el silbato de la locomotora?", a: "D", opts: [
    {l: "A", t: "Despu√©s de una detenci√≥n accidental en plena v√≠a y antes de reanudar la marcha."},
    {l: "B", t: "Al aproximarse a un PN."},
    {l: "C", t: "En trenes con tracci√≥n m√∫ltiple, cuando sea necesario que traccione la segunda locomotora."},
    {l: "D", t: "Cuando un tren sea directo y no vea la se√±al de paso desde la aguja de entrada."}
  ]},
  "12": {q: "¬øQui√©n podr√° dar instrucciones al Maquinista de un tren de trabajos sobre los rebases de se√±ales cuando opera al amparo de la EVB en l√≠neas de BA?", a: "B", opts: [
    {l: "A", t: "El Responsable de Circulaci√≥n para las se√±ales diferentes a las intermedias, las se√±ales intermedias dotadas de la letra \"P\" el Maquinista las rebasar√° con marcha a la vista hasta la se√±al siguiente."},
    {l: "B", t: "El Responsable de Circulaci√≥n para las se√±ales diferentes a las intermedias."},
    {l: "C", t: "El Responsable de Circulaci√≥n para las se√±ales que no se encuentran en plena v√≠a."},
    {l: "D", t: "El Encargado de Trabajos."}
  ]},
  "13": {q: "Una derivaci√≥n particular que se√±al de las siguientes tendr√°:", a: "B", opts: [
    {l: "A", t: "Se√±al de entrada."},
    {l: "B", t: "Se√±al de protecci√≥n."},
    {l: "C", t: "Se√±al de retroceso."},
    {l: "D", t: "Se√±al de maniobras."}
  ]},
  "14": {q: "Detenci√≥n accidental:", a: "C", opts: [
    {l: "A", t: "Es la que realiza el Maquinista para tratar de evitar un peligro inminente, mediante la aplicaci√≥n del freno de emergencia."},
    {l: "B", t: "Es la que realiza el Maquinista para tratar de evitar un peligro inminente, mediante la aplicaci√≥n del freno autom√°tico."},
    {l: "C", t: "Es la que efect√∫a el Maquinista por propia iniciativa en plena v√≠a o, por anormalidad, en cualquier lugar."},
    {l: "D", t: "Es la que efect√∫a el Maquinista cuando el tren se detiene el tiempo indispensable para realizar operaciones."}
  ]},
  "15": {q: "En caso de interceptaci√≥n para trenes o cortes de material detenidos en plena v√≠a, ¬øc√≥mo se actuar√°?:", a: "B", opts: [
    {l: "A", t: "Se aplicar√° la protecci√≥n de emergencia en las v√≠as afectadas."},
    {l: "B", t: "En l√≠neas con circuitos de v√≠a, se aplicar√° la protecci√≥n de emergencia, por detr√°s, cuando se encuentren descarrilados totalmente."},
    {l: "C", t: "Se aplicar√° la protecci√≥n de emergencia en la v√≠a o v√≠as contiguas y otras afectadas."},
    {l: "D", t: "En l√≠neas con circuitos de v√≠a, se aplicar√° la protecci√≥n de emergencia, por delante y por detr√°s, cuando se encuentren descarrilados totalmente."}
  ]},
  "16": {q: "En la protecci√≥n de emergencia de un punto interceptado para avisar al maquinista de cualquier circulaci√≥n que se dirija hacia dicho punto, para que se detenga antes de llegar al mismo, que se har√° primero:", a: "D", opts: [
    {l: "A", t: "Avisar al maquinista afectado mediante la radiotelefon√≠a."},
    {l: "B", t: "Haciendo la se√±al de alarma, sobre todo en trayectos con v√≠a doble o m√∫ltiple."},
    {l: "C", t: "Presentando desde la v√≠a las se√±ales port√°tiles de parada al tren o trenes que se aproximen, a ser posible a la distancia de 1.500 m."},
    {l: "D", t: "La forma de actuar depender√° de las circunstancias, aunque siempre ser√° fundamental la rapidez con que se act√∫e para avisar al tren que se encuentre m√°s pr√≥ximo al lugar de peligro."}
  ]},
  "17": {q: "Como proteger√°n los trabajos en Intervalo de liberaci√≥n por tiempo el Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos:", a: "D", opts: [
    {l: "A", t: "En trayectos no dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \"Silbar Obreros\" en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
    {l: "B", t: "En trayectos no dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° cartelones port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \"Silbar Obreros\" en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
    {l: "C", t: "En trayectos dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° cartelones de parada a una distancia m√°xima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n se√±ales de \"Silbar Obreros\" en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
    {l: "D", t: "En trayectos dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \"Silbar Obreros\" en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."}
  ]},
  "18": {q: "Entre otra informaci√≥n, ¬øqu√© nos indica la siguiente inscripci√≥n realizada sobre un vag√≥n de mercanc√≠as? (25400 / 20.0)", a: "B", opts: [
    {l: "A", t: "El vag√≥n tiene una tara de 20 toneladas."},
    {l: "B", t: "El vag√≥n tiene una tara de 25.400 kg, y dispone de freno de mano accesible desde la plataforma."},
    {l: "C", t: "El vag√≥n tiene una tara de 25.400 kg, y dispone de freno de mano accesible desde el suelo."},
    {l: "D", t: "El vag√≥n tiene una tara de 25.400 kg, y no dispone de freno de mano."}
  ]},
  "19": {q: "Qu√© se considera herramienta manual: 3.3.2.1.", a: "A", opts: [
    {l: "A", t: "Todo utensilio que por su peso, manejo, ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."},
    {l: "B", t: "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 50kg."},
    {l: "C", t: "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 60kg y adem√°s pueda retirarse de la v√≠a a tiempo oportuno por la persona que la maneja."},
    {l: "D", t: "Todo utensilio que pueda manejarse manualmente, y ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."}
  ]},
  "20": {q: "¬øEl sistema de intervalo de liberaci√≥n por tiempo es incompatible? 3.3.2.2.", a: "C", opts: [
    {l: "A", t: "Con BAB, BTV."},
    {l: "B", t: "Con BAD."},
    {l: "C", t: "BTV."},
    {l: "D", t: "BSL."}
  ]},
  "21": {q: "El personal ferroviario est√° obligado a: 1/18", a: "D", opts: [
    {l: "A", t: "Abstenerse de abandonar o ausentarse del servicio sin autorizaci√≥n y sin adoptar las medidas necesarias para garantizar la seguridad. Si por fuerza mayor o para evitar un peligro tuviese que ausentarse de forma urgente, sin obtener autorizaci√≥n, no podr√° abandonar el servicio."},
    {l: "B", t: "Abstenerse de abandonar o ausentarse del servicio con autorizaci√≥n. Si por fuerza mayor o para evitar un peligro tuviese que ausentarse de forma urgente, sin obtener autorizaci√≥n, adoptar√° las prevenciones oportunas, sin perjuicio de informar y retomar el servicio en cuanto sea posible."},
    {l: "C", t: "Poder abandonar o ausentarse del servicio sin autorizaci√≥n si se adoptan las medidas necesarias para garantizar la seguridad y las prevenciones oportunas, sin perjuicio de informar y retomar el servicio en cuanto sea posible."},
    {l: "D", t: "Abstenerse de abandonar o ausentarse del servicio sin autorizaci√≥n y sin adoptar las medidas necesarias para garantizar la seguridad. Si por fuerza mayor o para evitar un peligro tuviese que ausentarse de forma urgente, sin obtener autorizaci√≥n, adoptar√° las prevenciones oportunas, sin perjuicio de informar y retomar el servicio en cuanto sea posible."}
  ]},
  "22": {q: "Trabajo no compatible con la circulaci√≥n de trenes:", a: "D", opts: [
    {l: "A", t: "Con car√°cter general, los trabajos que afecten al funcionamiento normal de la v√≠a, la electrificaci√≥n y las instalaciones de seguridad, as√≠ como los trabajos de cualquier naturaleza con maquinaria en la \"Zona de peligro para los trabajos\", \"Zona de riesgo para los trabajos\" o \"Zona de seguridad para los trabajos\", a√∫n de forma puntual, entrar√≠an dentro de este concepto."},
    {l: "B", t: "Con car√°cter general, los trabajos que afecten al funcionamiento normal de la v√≠a, la electrificaci√≥n y las instalaciones de seguridad, as√≠ como los trabajos de cualquier naturaleza con maquinaria en la \"Zona de riesgo para los trabajos\" o \"Zona de seguridad para los trabajos\", a√∫n de forma puntual, entrar√≠an dentro de este concepto."},
    {l: "C", t: "Con car√°cter general, los trabajos que afecten al funcionamiento normal de la v√≠a, la electrificaci√≥n y las instalaciones de seguridad, as√≠ como los trabajos de cualquier naturaleza con maquinaria en la \"Zona de peligro para los trabajos\" o \"Zona de seguridad para los trabajos\", a√∫n de forma puntual, entrar√≠an dentro de este concepto."},
    {l: "D", t: "Con car√°cter general, los trabajos que afecten al funcionamiento normal de la v√≠a, la electrificaci√≥n y las instalaciones de seguridad, as√≠ como los trabajos de cualquier naturaleza con maquinaria en la \"Zona de peligro para los trabajos\" o \"Zona de riesgo para los trabajos\", a√∫n de forma puntual, entrar√≠an dentro de este concepto."}
  ]},
  "23": {q: "En que consiste la protecci√≥n normal 3.6.1.4.", a: "A", opts: [
    {l: "A", t: "Colocaci√≥n de se√±ales port√°tiles de parada a 1.500 m del punto de peligro y en sus proximidades. Cuando la se√±al port√°til de parada no sea presentada por personal, √©sta se emplazar√° en el eje de la v√≠a."},
    {l: "B", t: "Colocaci√≥n de se√±ales port√°tiles de parada a 500 m del punto de peligro, en sus proximidades o utilizando dispositivos de cortocircuito, seg√∫n el caso. Cuando la se√±al port√°til de parada no sea presentada por personal, √©sta se emplazar√° en el eje de la v√≠a."},
    {l: "C", t: "Colocaci√≥n de se√±ales de parada a mano a 1500 m del punto de peligro o colocar√≠amos se√±ales de parada a mano en las proximidades del punto de peligro."},
    {l: "D", t: "Colocaci√≥n de se√±ales port√°tiles de parada a 1.500 m del punto de peligro y en sus proximidades. Cuando la se√±al port√°til de parada sea presentada por personal, √©sta se emplazar√° en el eje de la v√≠a."}
  ]},
  "24": {q: "En el supuesto de baja temporal de las instalaciones del PN por reparaci√≥n o mantenimiento de estas, se le dotar√° de:", a: "A", opts: [
    {l: "A", t: "Personal a pie de paso o se cerrar√° el tr√°nsito."},
    {l: "B", t: "Se cerrar√° al tr√°nsito."},
    {l: "C", t: "Se aplicar√° una protecci√≥n de clase P."},
    {l: "D", t: "Personal a pie de paso."}
  ]},
  "25": {q: "¬øC√≥mo se denomina y qu√© ordena la siguiente se√±al? (B - Se√±al FF7B - Color rojo)", a: "B", opts: [
    {l: "A", t: "Se denomina parada selectiva, y ordena parar ante ella sin rebasarla cuando se circule con trenes sin ERTMS."},
    {l: "B", t: "Se denomina parada y si la se√±al mantiene esta misma indicaci√≥n transcurridos tres minutos desde la parada, el Maquinista, si nada se opone, avanzar√° con marcha a la vista, sin exceder la velocidad de 40 km/h hasta llegar a la se√±al siguiente fija fundamental (no consider√°ndose a estos efectos las SPN), y se atendr√° a lo que esta ordene, cualquiera que sea su indicaci√≥n. Tendr√° muy en cuenta que antes de llegar a esta √∫ltima se√±al se puede encontrar un tren, en cuyo caso se detendr√° a unos 50m de este. Si a continuaci√≥n de la se√±al siguiente, existieran agujas, no se exceder√° la velocidad de 30 km/h al paso por ellas."},
    {l: "C", t: "se denomina parada selectiva y despu√©s de la parada, y si nada se opone, el Maquinista avanzar√° con marcha a la vista, sin exceder la velocidad de 40 km/h hasta llegar a la se√±al siguiente."},
    {l: "D", t: "Se denomina parada y despu√©s de la parada, y si nada se opone, el Maquinista avanzar√° con marcha a la vista, sin exceder la velocidad de 40 km/h hasta llegar a la se√±al siguiente, cualquiera que sea su indicaci√≥n."}
  ]},
  "26": {q: "En trabajos en estaciones en v√≠as carentes de circuitos de v√≠a o no compatibles con el uso de √∫tiles de cortocircuito el Encargado o Piloto de seguridad habilitado para concertar trabajos una vez autorizado para realizarlos, y antes de su inicio los proteger√°:", a: "B", opts: [
    {l: "A", t: "Colocar√° la barra o √∫til de cortocircuito. A continuaci√≥n, verificar√° la ocupaci√≥n artificial del circuito de v√≠a mediante la confirmaci√≥n del Responsable de Circulaci√≥n o, cuando no sea posible, por observaci√≥n directa de que la se√±al que protege la v√≠a ocupada est√° en indicaci√≥n de parada."},
    {l: "B", t: "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada."},
    {l: "C", t: "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a a 500 m y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada."},
    {l: "D", t: "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por ambos lados, cuando no sea posible orientar las agujas en la posici√≥n adecuada."}
  ]},
  "27": {q: "Puesto de bloqueo (PB):", a: "C", opts: [
    {l: "A", t: "Instalaci√≥n de car√°cter t√©cnico que permite la banalizaci√≥n de la circulaci√≥n de trenes."},
    {l: "B", t: "Centro espec√≠fico del Al encargado de la gesti√≥n y regulaci√≥n del tr√°fico en tiempo real."},
    {l: "C", t: "Instalaci√≥n de car√°cter provisional situada en plena v√≠a, que permite la intervenci√≥n temporal en el bloqueo."},
    {l: "D", t: "Instalaci√≥n de car√°cter t√©cnico que permite el adelantamiento y el estacionamiento de trenes."}
  ]},
  "28": {q: "Cu√°l de las siguientes respuestas no se corresponde con los √∫tiles de servicio de los Tajos de Trabajos:", a: "D", opts: [
    {l: "A", t: "Linternas, dotadas de luces de color blanco y rojo."},
    {l: "B", t: "Banderines rojos."},
    {l: "C", t: "Cartelones \"Silbar\"."},
    {l: "D", t: "Calces antideriva."}
  ]},
  "29": {q: "La interrupci√≥n de la circulaci√≥n se establece por:", a: "A", opts: [
    {l: "A", t: "Intervalo de horario, intervalo programado y por anormalidad."},
    {l: "B", t: "Intervalo de liberaci√≥n por tiempo, intervalo programado y entrega de v√≠a bloqueado."},
    {l: "C", t: "Intervalo de liberaci√≥n por tiempo, entrega de v√≠a bloqueado y por anormalidad."},
    {l: "D", t: "Intervalo de liberaci√≥n por tiempo, intervalo programado y anormalidad."}
  ]},
  "30": {q: "En l√≠neas de alta velocidad con BCA cuando tenga que circular un tren sin el equipo embarcado del ATP, que bloqueo se aplicara:", a: "C", opts: [
    {l: "A", t: "BAB, BT."},
    {l: "B", t: "BT."},
    {l: "C", t: "BSL."},
    {l: "D", t: "BSL o BT."}
  ]},
  "31": {q: "En los trabajos no programados (por aver√≠as, accidentes, etc.), quien informar√° al Responsable de Circulaci√≥n del sistema de trabajos a emplear, dentro de los previstos en el RCF, en funci√≥n de su complejidad, importancia u otras circunstancias:", a: "A", opts: [
    {l: "A", t: "El Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos."},
    {l: "B", t: "El Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del Puesto de Mando."},
    {l: "C", t: "El Al lo determinar√° en su SGS."},
    {l: "D", t: "Las A√©reas T√©cnicas de las gerencias del Al."}
  ]},
  "32": {q: "El maquinista, durante la aplicaci√≥n de EVB, ¬øc√≥mo proceder√°?", a: "A", opts: [
    {l: "A", t: "Considerar√° inexistentes las se√±ales intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL."},
    {l: "B", t: "Considerar√° inexistentes todas las se√±ales (excepto las de entrada y salida) en l√≠neas de BA y las de los PCA en l√≠neas de BSL."},
    {l: "C", t: "Considerar√° inexistentes las se√±ales avanzadas, las intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL."},
    {l: "D", t: "Considerar√° inexistentes las se√±ales avanzadas dotadas de la letra \"P\" y las intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL."}
  ]},
  "33": {q: "En EVB, se podr√°n realizar diferentes trabajos en una misma v√≠a, estando la concertaci√≥n y coordinaci√≥n a cargo:", a: "B", opts: [
    {l: "A", t: "Habr√° diferentes Encargados de trabajos por cada uno de ellos."},
    {l: "B", t: "Un mismo Encargado de trabajos al que se le concedi√≥ la EVB, respetando la hora de comienzo y finalizaci√≥n concedidos."},
    {l: "C", t: "Para cada trayecto y v√≠a entre dos estaciones abiertas afectada por una EVB, habr√° un Encargado de trabajos o pruebas."},
    {l: "D", t: "En v√≠a doble o m√∫ltiple se podr√° tener un solo Encargado de trabajos, cuando sean coincidentes los puntos de inicio y finalizaci√≥n de la EVB en ambas v√≠as."}
  ]},
  "34": {q: "Las abreviaturas que se utilizan en la transmisi√≥n de los mensajes de voz relacionados con la seguridad, ¬øD√≥nde se contemplan?", a: "D", opts: [
    {l: "A", t: "En el Libro Primero, Principios fundamentales del RCF."},
    {l: "B", t: "En una Consigna del Al."},
    {l: "C", t: "En la N.A.R. N¬∫ 3/16 metodolog√≠a de las comunicaciones relacionadas con la seguridad."},
    {l: "D", t: "No existen abreviaturas para este tipo de comunicaciones."}
  ]}
};

let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
  // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
</script>
</body>
</html>
