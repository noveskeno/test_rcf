<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EXAMEN - PILOTO DE SEGURIDAD 05</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>EXAMEN - PILOTO DE SEGURIDAD 05</h1>
    <div class="badge">43 preguntas</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>

<script>
// Test data with questions and answers
const testData = {
  "1": {
    "q": "Seg√∫n la Orden FOM 2872/2010 ¬øCu√°les son las funciones del Piloto de Seguridad en la circulaci√≥n?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Realiza las funciones de vigilancia de la infraestructura y protecci√≥n de los trabajos sobre la misma en relaci√≥n con la seguridad en la circulaci√≥n ferroviaria, as√≠ como la vigilancia de los Pasos a Nivel."},
      {"l": "B", "t": "Realiza las funciones de vigilancia de la infraestructura y protecci√≥n de los trabajos sobre la misma en relaci√≥n con la seguridad en la circulaci√≥n ferroviaria."},
      {"l": "C", "t": "Realiza las funciones de vigilancia de la infraestructura y protecci√≥n de los trabajos sobre la misma en relaci√≥n con la seguridad en la circulaci√≥n ferroviaria, as√≠ como la vigilancia de los Pasos a Nivel Enclavados, Autom√°ticos y por obra."},
      {"l": "D", "t": "Su obligaci√≥n es la vigilancia de la infraestructura y protecci√≥n de los trabajos sobre la misma en relaci√≥n con la seguridad en la circulaci√≥n ferroviaria, as√≠ como la vigilancia de los Pasos a Nivel."}
    ]},
  "2": {
    "q": "¬øCu√°l es el objeto del Reglamento de Circulaci√≥n Ferroviaria?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes se realice de forma segura, eficiente y puntual"},
      {"l": "B", "t": "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de las maniobras se realice de forma segura, eficiente y puntual"},
      {"l": "C", "t": "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y regular."},
      {"l": "D", "t": "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual."}
    ]},
  "3": {
    "q": "¬øQu√© es \"Combinaci√≥n de dos escapes con una traves√≠a oblicua?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Bretelle."},
      {"l": "B", "t": "Escape."},
      {"l": "C", "t": "Carriles de uni√≥n."},
      {"l": "D", "t": "Haz de v√≠as"}
    ]},
  "4": {
    "q": "¬øC√≥mo est√° estructurada la NAR 5/17 Cargamento?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "2 Glosarios, 2 Tomos y 1 Anexo"},
      {"l": "B", "t": "1 Glosario, 2 Tomos y 1 Anexo"},
      {"l": "C", "t": "1 Glosario, 2 Tomos y 2 Ap√©ndices"},
      {"l": "D", "t": "2 Glosarios, 1 Tomo y 2 Ap√©ndices"}
    ]},
  "5": {
    "q": "En el caso de que el personal de Infraestructura se percate que no dispone de alg√∫n √∫til de servicio ¬øqu√© deber√° hacer?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Comunicarlo a su responsable inmediato qui√©n determinar√° la forma de proceder."},
      {"l": "B", "t": "Comunicarlo a su responsable inmediato qui√©n determinar√° la forma de proceder de acuerdo con el Encargado de Trabajos."},
      {"l": "C", "t": "Comunicarlo a su responsable inmediato qui√©n determinar√° la forma de proceder de acuerdo con el PM"},
      {"l": "D", "t": "Se suspender√° el trabajo"}
    ]},
  "6": {
    "q": "¬øCu√°l es un principio b√°sico de los Bloqueos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Dos trenes que circulen por la misma v√≠a y en distinto sentido, ir√°n separados una distancia que garantice que no se va a producir un alcance."},
      {"l": "B", "t": "Cuando un tren est√© circulando por una v√≠a, se expedir√° otro en sentido contrario por la misma v√≠a desde la estaci√≥n colateral."},
      {"l": "C", "t": "Las EF garantizar√°n la seguridad necesaria para incompatibilizar las maniobras que se realicen por la banda de una estaci√≥n, con la llegada de un tren por dicha banda."},
      {"l": "D", "t": "Dos trenes que circulen por la misma v√≠a y en el mismo sentido, ir√°n separados una distancia que garantice que no se va a producir un alcance."}
    ]},
  "7": {
    "q": "De acuerdo con el esquema inferior que representa una estaci√≥n, indique, de entre las opciones que se le proponen, cual se corresponde con las se√±ales numeradas del 1 al 4.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "1 Se√±al de entrada, 2 se√±al de salida, 3 se√±al de salida interior, 4 se√±al de retroceso."},
      {"l": "B", "t": "1 Se√±al avanzada, 2 se√±al de salida, 3 se√±al de entrada interior, 4 se√±al de entrada."},
      {"l": "C", "t": "1 Se√±al de entrada, 2 se√±al intermedia, 3 se√±al de entrada interior, 4 se√±al avanzada."},
      {"l": "D", "t": "1 Se√±al intermedia, 2 se√±al de salida, 3 se√±al de retroceso, 4 se√±al de entrada."}
    ]},
  "8": {
    "q": "¬øCu√°l es la tasa m√°xima permitida de alcohol en aire?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "0.1 gramos/litro."},
      {"l": "B", "t": "0.05 miligramos/litro."},
      {"l": "C", "t": "0.1 miligramos/litro."},
      {"l": "D", "t": "0.05 gramos/litro"}
    ]},
  "9": {
    "q": "En un panel naranja, ¬øa qu√© nos hace referencia el n√∫mero de la parte inferior?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "al n¬∞ de identificaci√≥n del peligro."},
      {"l": "B", "t": "al n¬∞ de identificaci√≥n de la materia."},
      {"l": "C", "t": "a la versi√≥n del RID aplicable."},
      {"l": "D", "t": "a los riesgos primarios y secundarios de la materia."}
    ]},
  "10": {
    "q": "De acuerdo con el RCF las comunicaciones relativas a las actividades relacionadas con la seguridad podr√°n ser ¬øde qu√© tipos?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Verbales y escritas."},
      {"l": "B", "t": "Verbales, escritas, por telefonema y por notificaciones."},
      {"l": "C", "t": "Verbales, por BOI o por telefonema."},
      {"l": "D", "t": "Siempre por telefonema."}
    ]},
  "11": {
    "q": "En ILT, cuando en un mismo trayecto se realicen trabajos de naturaleza diferente o situados en puntos alejados, todos ellos se considerar√°n independientes y dispondr√°n de un: Art.",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Habr√° diferentes Encargados de trabajos por cada uno de ellos."},
      {"l": "B", "t": "Un mismo Encargado de trabajos al que se le concedi√≥ la v√≠a, respetando la hora de comienzo y finalizaci√≥n concedidos."},
      {"l": "C", "t": "De un Encargado de Trabajos o Piloto de seguridad habilitado para concertar trabajos en cada uno."},
      {"l": "D", "t": "En v√≠a doble o m√∫ltiple se podr√° tener un solo Encargado de trabajos, cuando sean coincidentes los puntos de inicio y finalizaci√≥n en ambas v√≠as."}
    ]},
  "12": {
    "q": "En trabajos en estaciones en v√≠as carentes de circuitos de v√≠a o no compatibles con el uso de √∫tiles de cortocircuito el Encargado o Piloto de seguridad habilitado para concertar trabajos una vez autorizado para realizarlos, y antes de su inicio los proteger√°:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Colocar√° la barra o √∫til de cortocircuito. A continuaci√≥n, verificar√° la ocupaci√≥n artificial del circuito de v√≠a mediante la confirmaci√≥n del Responsable de Circulaci√≥n o, cuando no sea posible, por observaci√≥n directa de que la se√±al que protege la v√≠a ocupada est√° en indicaci√≥n de parada."},
      {"l": "B", "t": "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada."},
      {"l": "C", "t": "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a a 500 m y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada,"},
      {"l": "D", "t": "Instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por ambos lados, cuando no sea posible orientar las agujas en la posici√≥n adecuada."}
    ]},
  "13": {
    "q": "Como proteger√°n los trabajos en Intervalo de liberaci√≥n por tiempo el Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En trayectos no dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \'Silbar Obreros\' en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
      {"l": "B", "t": "En trayectos no dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° cartelones port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \'Silbar Obreros\' en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
      {"l": "C", "t": "En trayectos dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° cartelones de parada a una distancia m√°xima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n se√±ales de \'Silbar Obreros\' en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."},
      {"l": "D", "t": "En trayectos dotados de circuitos de v√≠a y siempre que los trabajos sean compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas. Asimismo, previamente al inicio de los trabajos se instalar√°n cartelones de \'Silbar Obreros\' en la v√≠a o v√≠as contiguas con circulaci√≥n compatible con los trabajos."}
    ]},
  "14": {
    "q": "Qu√© se considera herramienta manual: 3.3.2.1.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Todo utensilio que por su peso, manejo, ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."},
      {"l": "B", "t": "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 50kg"},
      {"l": "C", "t": "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 60kg y adem√°s pueda retirarse de la v√≠a a tiempo oportuno por la persona que la maneja"},
      {"l": "D", "t": "Todo utensilio que pueda manejarse manualmente, y ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."}
    ]},
  "15": {
    "q": "¬øEn qu√© l√≠neas no est√° permitido que los trenes de mercanc√≠as lleven por cola las placas reflectante color blanco y rojo?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "En las l√≠neas operadas de forma nominal con bloqueo telef√≥nico o bloqueo el√©ctrico manual."},
      {"l": "B", "t": "En las l√≠neas operadas de forma nominal con bloqueo telef√≥nico."},
      {"l": "C", "t": "En las l√≠neas operadas de forma nominal con bloqueo telef√≥nico y en las operadas con bloqueo telef√≥nico supletorio."},
      {"l": "D", "t": "En las l√≠neas operadas con bloqueo el√©ctrico manual."}
    ]},
  "16": {
    "q": "¬øA qu√© se denomina Protecci√≥n de emergencia?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Es la protecci√≥n utilizada de forma inmediata por el personal que detecte un punto interceptado, su objetivo es lograr que cualquier circulaci√≥n que se dirija hacia el punto interceptado se detenga antes de llegar al mismo."},
      {"l": "B", "t": "Es la protecci√≥n utilizada de forma que no pueda escaparse material ferroviario con el freno de estacionamiento"},
      {"l": "C", "t": "Es la protecci√≥n utilizada en los pasos a nivel, en el caso de que al paso de los trenes no actuase el sistema de barreras o semibarreras autom√°ticas"},
      {"l": "D", "t": "Es la protecci√≥n que realiza el maquinista mediante el foco de gran intensidad, apag√°ndolo al cruzarse con alg√∫n otro tren, para no deslumbrarse entre ellos"}
    ]},
  "17": {
    "q": "¬øCu√°l de las siguientes condiciones no se corresponde con las de aplicaci√≥n para una ILT:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Las estaciones que delimiten el trayecto se encuentren abiertas."},
      {"l": "B", "t": "En l√≠neas con CTC las posibles estaciones intermedias est√©n abiertas."},
      {"l": "C", "t": "El sistema es incompatible con una BTV."},
      {"l": "D", "t": "El trayecto debe estar libre de trenes."}
    ]},
  "18": {
    "q": "¬øQu√© alumbrado llevar√° en cola una locomotora que se encuentre realizando maniobras en una estaci√≥n?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "2 placas reflectantes, si va hacia un BT."},
      {"l": "B", "t": "2 placas reflectantes, si va hacia un BAB."},
      {"l": "C", "t": "Las mismas que en cabeza, sin hacer uso del alumbrado de gran intensidad en ninguno de los testeros."},
      {"l": "D", "t": "2 luces rojas fijas, cumpliendo con la normativa de se√±alizaci√≥n de los trenes recogida en la ETI LOC."}
    ]},
  "19": {
    "q": "El Piloto de Seguridad¬øQu√© informaci√≥n nos da cada parte del Panel Naranja?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "El n√∫mero de identificaci√≥n del peligro debe figurar en la parte inferior y el n√∫mero de identificaci√≥n de la materia en la parte superior"},
      {"l": "B", "t": "El n√∫mero de identificaci√≥n del peligro debe figurar en la parte superior y el n√∫mero de identificaci√≥n de la clase en la parte inferior"},
      {"l": "C", "t": "El n√∫mero de identificaci√≥n de clase de peligro debe figurar en la parte superior y el n√∫mero de identificaci√≥n de la materia en la parte inferior."},
      {"l": "D", "t": "El n√∫mero de identificaci√≥n del peligro debe figurar en la parte superior y el n√∫mero de identificaci√≥n de la materia en la parte inferior"}
    ]},
  "20": {
    "q": "¬øQu√© bloqueo es de aplicaci√≥n cuando en l√≠neas de BCA, el sistema de protecci√≥n ATP no funcione con normalidad?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "BT."},
      {"l": "B", "t": "BTV."},
      {"l": "C", "t": "BSL."},
      {"l": "D", "t": "EVB."}
    ]},
  "21": {
    "q": "Detenci√≥n inmediata",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Es la que efect√∫a el Maquinista por propia iniciativa en plena v√≠a o, por anormalidad, en una estaci√≥n."},
      {"l": "B", "t": "Es la que efect√∫a el Maquinista por propia iniciativa en plena v√≠a o, por anormalidad."},
      {"l": "C", "t": "Es la que realiza el Maquinista para tratar de evitar un peligro inminente, mediante la aplicaci√≥n del freno de emergencia"},
      {"l": "D", "t": "Es la que realiza el Maquinista para tratar de evitar un peligro inminente, mediante la aplicaci√≥n del freno de estacionamiento."}
    ]},
  "22": {
    "q": "Cuando en un mismo lugar se encuentren varias se√±ales:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Si sus √≥rdenes son incompatibles entre s√≠, cumplir√° todas ellas."},
      {"l": "B", "t": "Si sus √≥rdenes son compatibles entre s√≠, cumplir√° la m√°s restrictiva."},
      {"l": "C", "t": "Si sus √≥rdenes son compatibles entre s√≠, cumplir√° todas ellas."},
      {"l": "D", "t": "Este caso no puede darse en la RFIG, ya que deber√°n taparse de forma efectiva para evitar dar √≥rdenes o informaciones contradictorias"}
    ]},
  "23": {
    "q": "En el caso de realizar trabajos en estaciones en la estaci√≥n que se ve m√°s abajo ¬øen qu√© v√≠as no se podr√° emplear la barra o √∫til de cortocircuito para protegerlos en ning√∫n caso?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En las v√≠as 1 y 2."},
      {"l": "B", "t": "En las v√≠as 1, 2 y 4"},
      {"l": "C", "t": "En las v√≠as 1, 2, 3, 4 y 5."},
      {"l": "D", "t": "En las v√≠as 3 y 5"}
    ]},
  "24": {
    "q": "Las traves√≠as sin uni√≥n pueden ser ¬øde qu√© dos clases?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "De uni√≥n simple o de uni√≥n doble"},
      {"l": "B", "t": "R√≠gidas o el√°sticas."},
      {"l": "C", "t": "Perpendiculares u oblicuas."},
      {"l": "D", "t": "De v√≠a directa o v√≠a desviada"}
    ]},
  "25": {
    "q": "En una EVB, que ha sido autorizada por el responsable de circulaci√≥n de la estaci√≥n, ¬øQui√©n debe de autorizar tambi√©n ese trabajo?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "El Encargado de trabajos."},
      {"l": "B", "t": "El Responsable de circulaci√≥n del PM."},
      {"l": "C", "t": "El Responsable de Circulaci√≥n del CTC"},
      {"l": "D", "t": "El Piloto de Seguridad."}
    ]},
  "26": {
    "q": "La imagen que se le presenta a continuaci√≥n, ¬øa qu√© clase de aparato instalado en la v√≠a hace referencia?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Un aparato de dilataci√≥n."},
      {"l": "B", "t": "Un calce descarrilador."},
      {"l": "C", "t": "Un contracarril."},
      {"l": "D", "t": "Un cambiador de hilo."}
    ]},
  "27": {
    "q": "¬øQu√© informaci√≥n nos proporciona la siguiente etiqueta de materias peligrosas sobre el producto que transporta nuestro tren?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Materias peligrosas con el medio ambiente."},
      {"l": "B", "t": "Materias corrosivas o perjudiciales con los peces."},
      {"l": "C", "t": "Materias no corrosivas ni t√≥xicas."},
      {"l": "D", "t": "Gases asfixiantes."}
    ]},
  "28": {
    "q": "¬øCu√°les son las partes de un puente?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Estribos, pilares o pilas y tablero."},
      {"l": "B", "t": "B√≥vida, contrab√≥veda y hastiales."},
      {"l": "C", "t": "Estribos, pilares, tableros y hastiales."},
      {"l": "D", "t": "Estribos, pilares, tableros, encarriladores y contracarriles"}
    ]},
  "29": {
    "q": "Documento que se actualiza anualmente y donde se encuentran los Mapas que incluyen informaciones relativas a identificaci√≥n y situaci√≥n de las principales estaciones y nudos ferroviarios de la Red gestionada por Adif:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Reglamento de Circulaci√≥n Ferroviaria."},
      {"l": "B", "t": "Ley de ordenaci√≥n de los transportes terrestres."},
      {"l": "C", "t": "Reglamento del Sector ferroviario."},
      {"l": "D", "t": "Declaraci√≥n sobre la Red."}
    ]},
  "30": {
    "q": "En el caso de que un cartel√≥n de silbar obreros est√© instalado por la presencia de personal trabajando en la v√≠a ¬øqu√© se tomar√° como distancia de visibilidad t√©cnica?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "No existe la distancia de visibilidad t√©cnica."},
      {"l": "B", "t": "5 veces la velocidad m√°xima permitida del tren a la altura del punto afectado en Km/h."},
      {"l": "C", "t": "5,5 veces la velocidad m√°xima permitida del tren a la altura del punto afectado en Km/h."},
      {"l": "D", "t": "0,05 veces la velocidad m√°xima permitida del tren a la altura del punto afectado en Km/h."}
    ]},
  "31": {
    "q": "¬øQu√© tipo de Paso a Nivel avisa al usuario de la aproximaci√≥n de un tren y cu√°ntas circulaciones sucesivas puede tener?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "A2, hasta 3 circulaciones sucesivas."},
      {"l": "B", "t": "A3, hasta 2 circulaciones sucesivas."},
      {"l": "C", "t": "A2, hasta 2 circulaciones sucesivas."},
      {"l": "D", "t": "A3, hasta 4 circulaciones sucesivas."}
    ]},
  "32": {
    "q": "Seg√∫n la NAR 6/16, ¬øQu√© tipo de sistema utilizar√≠amos en un trabajo en la zona de riesgo en una l√≠nea de m√°s de 160 Km/h con Herramienta manual sin afectaci√≥n a la v√≠a, electrificaci√≥n ni II.SS?.",
    "a": "C",
    "opts": [
      {"l": "A", "t": "T.C"},
      {"l": "B", "t": "T.I"},
      {"l": "C", "t": "Arge."},
      {"l": "D", "t": "E.V.B."}
    ]},
  "33": {
    "q": "¬øQu√© tipos de semibarreras podemos encontrar en los Pasos a Nivel A3 y A4?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Rangers (S), Sel Se√±alizaci√≥n (M), Electrans (E)."},
      {"l": "B", "t": "Alsthom (S), Sel Se√±alizaci√≥n (M), Electrans (E)."},
      {"l": "C", "t": "Rangers (S), Alsthom (S), Electrans (E)."},
      {"l": "D", "t": "Sel Se√±alizaci√≥n (M), Electrans (E)."}
    ]},
  "34": {
    "q": "¬øC√≥mo deben de ir los teleros y los testeros en un vag√≥n tipo MM2?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Deber√°n estar en posici√≥n activa, en la medida en que esto no imposibilite el transporte. En caso de que por necesidades de transporte deban de circular abatidos estar√°n debidamente inmovilizados y asegurados."},
      {"l": "B", "t": "Deber√°n estar en posici√≥n activa, en la medida en que esto no imposibilite el transporte. En caso de que por necesidades de transporte deban de circular abatidos estar√°n debidamente inmovilizados."},
      {"l": "C", "t": "Deber√°n estar en posici√≥n inactiva, en la medida en que esto no imposibilite el transporte. En caso de que por necesidades de transporte deban de circular abatidos estar√°n debidamente inmovilizados y asegurados."},
      {"l": "D", "t": "Abatidos y estar√°n debidamente inmovilizados y asegurados."}
    ]},
  "35": {
    "q": "¬øA que distancia se colocar√°n las se√±ales port√°tiles de parada de pantalla para proteger los trabajos en un Intervalo de liberaci√≥n por tiempo, cuando no haya circuito de v√≠a?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "A m√≠nimo 500 metros por ambos lados de la v√≠a."},
      {"l": "B", "t": "A m√°ximo 500 metros por ambos lados de la v√≠a."},
      {"l": "C", "t": "A m√°ximo 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas."},
      {"l": "D", "t": "A m√≠nimo 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal, o por ambas cabeceras del tajo en caso de v√≠as banalizadas."}
    ]},
  "36": {
    "q": "¬øCu√°ndo debe un maquinista hacer la se√±al ac√∫stica de atenci√≥n especial (.-.-.-)?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Al aproximarse a un paso a nivel."},
      {"l": "B", "t": "En maniobras por radio, cuando falle la comunicaci√≥n."},
      {"l": "C", "t": "Cuando vea personas o animales en la v√≠a."},
      {"l": "D", "t": "Despu√©s de una parada o detenci√≥n accidental en plena v√≠a y antes de reanudar la marcha."}
    ]},
  "37": {
    "q": "¬øCu√°l es el √°mbito t√©cnico del RCF?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Lo constituyen todas las actividades relevantes desde el punto de vista de la seguridad que afecten a alguna interfaz directa entre las EF y los AI, desde la puesta a disposici√≥n del tren para circular por parte de la EF, hasta su llegada a la estaci√≥n de destino."},
      {"l": "B", "t": "Lo constituyen todas las actividades relevantes desde el punto de vista de la seguridad que afecten a alguna interfaz directa entre las EF y los AI, desde la puesta a disposici√≥n del tren para circular por parte de los AI, hasta su llegada a la estaci√≥n de destino."},
      {"l": "C", "t": "Lo constituyen todas las actividades relevantes, que afecten a alguna interfaz directa entre las EF y la AESF, desde la puesta a disposici√≥n del tren para circular por parte de la EF, hasta su llegada a la estaci√≥n de destino."},
      {"l": "D", "t": "Toda la RFIG y todo el personal que trabaje en ella debe de estar debidamente habilitado, para desarrollar labores de seguridad en la circulaci√≥n."}
    ]},
  "38": {
    "q": "¬øQu√© entendemos por estaciones colaterales?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Estaciones contiguas que en un momento concreto, intervienen en el bloqueo."},
      {"l": "B", "t": "Aquellas que cuyo control y accionamiento de sus instalaciones se realiza a distancia."},
      {"l": "C", "t": "Estaciones contiguas que nunca intervienen en el bloqueo."},
      {"l": "D", "t": "Estaciones intermitentes AC."}
    ]},
  "39": {
    "q": "Las se√±ales se clasifican, seg√∫n su funci√≥n en fijas, port√°tiles y de los trenes, pero ¬øcu√°l es la funci√≥n de las fijas indicadoras?.",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Regulan la circulaci√≥n de los trenes y maniobras."},
      {"l": "B", "t": "Regulan la velocidad que un tren no puede exceder en ning√∫n momento."},
      {"l": "C", "t": "Complementan las ordenes de las se√±ales fundamentales."},
      {"l": "D", "t": "Las que puede utilizar o hacer el personal ferroviario."}
    ]},
  "40": {
    "q": "¬øQu√© son las p√©ndolas?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cable conductor a√©reo utilizado para establecer la conexi√≥n el√©ctrica de las subestaciones con la catenaria."},
      {"l": "B", "t": "Cables conductores verticales de longitud variable utilizados para suspender el hilo o hilos de contacto del cable sustentador."},
      {"l": "C", "t": "Conductor el√©ctrico de una catenaria a trav√©s del cual se produce el contacto con el pant√≥grafo y por tanto la captaci√≥n de energ√≠a."},
      {"l": "D", "t": "Cable conductor utilizado para conectar todos los postes a tierra con el fin de proteger a las personas y a las instalaciones en caso de fallo del aislamiento entre los postes y la catenaria"}
    ]},
  "41": {
    "q": "¬øQu√© documento da a conocer al personal operativo prescripciones e informaciones de car√°cter temporal, no contenidas en otros documentos?.",
    "a": "D",
    "opts": [
      {"l": "A", "t": "El horario de los trenes."},
      {"l": "B", "t": "Avisos."},
      {"l": "C", "t": "Especificaciones T√©cnicas de Circulaci√≥n."},
      {"l": "D", "t": "Consignas."}
    ]},
  "42": {
    "q": "El personal que reciba una modificaci√≥n de su documentaci√≥n de seguridad a titulo personal ¬øA qu√© est√° obligado?.",
    "a": "A",
    "opts": [
      {"l": "A", "t": "A acusar recibo y acreditar√° conocimiento de su contenido conforme a lo establecido en el SGS de su empresa."},
      {"l": "B", "t": "A acusar recibo y acreditar√° conocimiento de su contenido."},
      {"l": "C", "t": "A acusar recibo y acreditar√° conocimiento de su contenido conforme a lo establecido en el procedimiento de su empresa"},
      {"l": "D", "t": "A acreditar conocimiento de su contenido conforme a lo establecido en el SGS de su empresa."}
    ]},
  "43": {
    "q": "De que elemento hablamos cuando decimos \'Aparato m√≥vil que se coloca con sujeci√≥n fija sobre la cabeza y alma del carril mediante pesta√±as candadas\'.",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Calce de mano."},
      {"l": "B", "t": "Calce descarrilador."},
      {"l": "C", "t": "Calce antideriva."},
      {"l": "D", "t": "Desv√≠o."}
    ]},
  "44": {
    "q": "¬øCu√°l es la funci√≥n de los cartelones?.",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Se emplean para transmitir informaciones independientes de otras se√±ales fijas."},
      {"l": "B", "t": "Se emplean para transmitir ordenes o indicaciones independientes de otras se√±ales fijas."},
      {"l": "C", "t": "Se emplean para transmitir indicaciones independientes de otras se√±ales fijas."},
      {"l": "D", "t": "Se emplean para transmitir ordenes independientes de otras se√±ales fijas."}
    ]}
}

let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
  // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
</script>
</body>
</html>
