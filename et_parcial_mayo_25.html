<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PARCIAL - MAYO 2025</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 200px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 160px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{padding:11px 12px}
  .btn-group{display:flex;gap:6px;width:100%}
  .btn-group button{flex:1}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>PARCIAL - MAYO 2025</h1>
    <div class="badge">45 preguntas + 2</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;width:100%">
        <button onclick="calificar()" style="width:100%">üìä Calificar</button>
        <div class="btn-group">
          <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
          <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver</button>
        </div>
      </div>
  </div>
  <button id="scrollTopBtn" class="scroll-top">‚Üë</button>
  
<script>
// Test data with questions and answers
const testData = {
  "1": {q: "Es uno de los pilares en que se apoya el mantenimiento preventivo de v√≠a. Gracias a los par√°metros que se miden en ella, es posible hacer una planificaci√≥n del mantenimiento anual, mensual y semanal", a: "C", opts: [
    {l: "A", t: "Vigilancia de v√≠a"},
    {l: "B", t: "Inspecci√≥n de v√≠a"},
    {l: "C", t: "Auscultaci√≥n geom√©trica"},
    {l: "D", t: "Inspecci√≥n de v√≠a y aparatos"}
  ]},
  "2": {q: "Son dispositivos formados por la combinaci√≥n de desv√≠os y traves√≠as que permiten la conexi√≥n y el cruce entre distintos itinerarios. ¬øA qu√© se hace referencia?", a: "B", opts: [
    {l: "A", t: "V√≠a en placa"},
    {l: "B", t: "Aparatos de v√≠a"},
    {l: "C", t: "Encarriladoras"},
    {l: "D", t: "Aparatos de dilataci√≥n"}
  ]},
  "3": {q: "De las siguientes afirmaciones ¬øCu√°l no es correcta?", a: "D", opts: [
    {l: "A", t: "Cuando se detecte un defecto o da√±o de tal gravedad que haya que considerar la v√≠a interceptada, ser√° de aplicaci√≥n el art√≠culo 3.6.1.3 del RCF."},
    {l: "B", t: "Una de las prioridades en la vigilancia de la v√≠a es detectar defectos o da√±os que puedan producir un accidente inmediato"},
    {l: "C", t: "Una de las tareas de mantenimiento que se realizan en las l√≠neas ferroviarias es la vigilancia de la v√≠a. Se inspecciona visualmente los elementos de la infraestructura y de la superestructura, con el objetivo de detectar posibles defectos a da√±os que se hayan producido durante su explotaci√≥n."},
    {l: "D", t: "Cuanto mayor sea la longitud del cup√≥n de carril utilizado en la reparaci√≥n provisional, menor ser√° la velocidad de paso por dicho punto."}
  ]},
  "4": {q: "Es un circuito similar al selectivo centralizado, el cual sirve para dar comunicaciones entre las estaciones y el P.M. en las l√≠neas reguladas con C.T.C.", a: "D", opts: [
    {l: "A", t: "Radiotelefon√≠a"},
    {l: "B", t: "Comunicaci√≥n inal√°mbrica"},
    {l: "C", t: "GSMR"},
    {l: "D", t: "Telefon√≠a de CTC"}
  ]},
  "5": {q: "¬øQu√© hace el enclavamiento?", a: "A", opts: [
    {l: "A", t: "Procesar las √≥rdenes recibidas, bien sea localmente o desde un puesto central, y de acuerdo con el estado de los elementos de v√≠a, realizar los itinerarios que est√©n permitidos, impidiendo la realizaci√≥n de aquellos movimientos no autorizados."},
    {l: "B", t: "Si por cualquier causa el personal de conducci√≥n no obedece las indicaciones de las se√±ales, se produzca autom√°ticamente una acci√≥n de frenado en consonancia con las indicaciones de dichas se√±ales (ASFA, ATP, ERTMS)"},
    {l: "C", t: "Maximiza en la medida de lo posible el factor humano, tanto en las estaciones, como en los trayectos entre las mismas, as√≠ como en los pasos a nivel (SBA, SABE, SLA)"},
    {l: "D", t: "Proporciona seguridad b√°sica entre los responsables de circulaci√≥n y los maquinistas garantizando el buen estado de su sistema."}
  ]},
  "6": {q: "Tramo de catenaria entre dos seccionamientos de l√°mina de aire o entre dos aisladores de secci√≥n, que est√° sin tensi√≥n el√©ctrica.", a: "A", opts: [
    {l: "A", t: "Zona neutra"},
    {l: "B", t: "Seccionamiento"},
    {l: "C", t: "Seccionador"},
    {l: "D", t: "Aislamiento"}
  ]},
  "7": {q: "¬øQu√© significa este s√≠mbolo?", a: "C", opts: [
    {l: "A", t: "Traves√≠a de uni√≥n doble sin circuito de v√≠a"},
    {l: "B", t: "Traves√≠a de uni√≥n sencilla con circuito de v√≠a"},
    {l: "C", t: "Traves√≠a de uni√≥n doble con circuito de v√≠a"},
    {l: "D", t: "Traves√≠a de uni√≥n sencilla sin circuito de v√≠a"}
  ]},
  "8": {q: "¬øQu√© es un mantenimiento preventivo?", a: "D", opts: [
    {l: "A", t: "Parte de la operaci√≥n que consiste en un conjunto de actividades encaminadas al mantenimiento de las instalaciones en condiciones √≥ptimas para permitir el desarrollo del servicio."},
    {l: "B", t: "Cualquier actividad de mantenimiento requerida para corregir un fallo que ha ocurrido o est√° ocurriendo."},
    {l: "C", t: "Conjunto de ideas y proyectos ejecutados en un periodo de tiempo por el AI"},
    {l: "D", t: "Estrategia de mantenimiento de equipos, basada en la inspecci√≥n, revisi√≥n, sustituci√≥n o nueva fabricaci√≥n de un elemento en periodos programados (basados en: kil√≥metros, numero de ciclos de operaci√≥n‚Ä¶) de acuerdo a su condici√≥n en un momento dado."}
  ]},
  "9": {q: "¬øCu√°l no es un pilar b√°sico de la orden FOM 2872/2010 (modificada por la orden FOM 679/2015)?", a: "B", opts: [
    {l: "A", t: "Establecer las condiciones, requisitos y procedimientos para la obtenci√≥n de las licencias de conducci√≥n y de los t√≠tulos habilitantes."},
    {l: "B", t: "Establecer los requisitos y procedimientos de emisi√≥n de los certificados de seguridad √∫nicos y de las autorizaciones de seguridad a los administradores de infraestructuras"},
    {l: "C", t: "Regula las competencias profesionales vinculadas a la actividad ferroviaria: las funciones que mi habilitaci√≥n me permite desempe√±ar"},
    {l: "D", t: "Establece las condiciones, requisitos, autorizaci√≥n y funcionamiento de los centros homologados de formaci√≥n."}
  ]},
  "10": {q: "Se publican para regular la utilizaci√≥n de instalaciones de seguridad concretas por modificaciones temporales", a: "B", opts: [
    {l: "A", t: "CG ATO/CTO"},
    {l: "B", t: "CG ATO"},
    {l: "C", t: "CG CTO"},
    {l: "D", t: "CG AO/CTO"}
  ]},
  "11": {q: "¬øQu√© documento se publica para dar a conocer los sistemas de radiotelefon√≠a a las EE.FF?", a: "A", opts: [
    {l: "A", t: "Cuadro de velocidades m√°ximas CVM"},
    {l: "B", t: "Marcha de los trenes MT"},
    {l: "C", t: "Documento de limitaciones de velocidad m√°xima DLTV"},
    {l: "D", t: "Directorio de esquemas de estaciones y l√≠neas DEEL"}
  ]},
  "12": {q: "Clasificaci√≥n de los P.N, seg√∫n su vida √∫til. ¬øC√≥mo pueden ser?", a: "C", opts: [
    {l: "A", t: "Activos y pasivos"},
    {l: "B", t: "Temporales y estables"},
    {l: "C", t: "Permanentes y provisionales"},
    {l: "D", t: "Continuos y pasajeros"}
  ]},
  "13": {q: "Seg√∫n los sistemas de bloqueos nominales. ¬øCu√°les son los bloqueos autom√°ticos?", a: "D", opts: [
    {l: "A", t: "BCA, BSL, BLAU, BLAD y BLAB"},
    {l: "B", t: "BCA, BSL, BLAU, BLAB y BEM"},
    {l: "C", t: "Las respuestas A y D son correctas"},
    {l: "D", t: "BAU, BAD y BAB (todos ellos, con o sin CTC)"}
  ]},
  "14": {q: "√ötiles de servicios vinculados a los veh√≠culos motores, se√±ale la respuesta correcta.", a: "D", opts: [
    {l: "A", t: "Calces de mano, banderines rojos, barras o √∫tiles de cortocircuito"},
    {l: "B", t: "Linterna dotada de luces de color blanco y rojo, bander√≠n rojo y llaves de los veh√≠culos."},
    {l: "C", t: "Calces antideriva, dos banderines rojos, calces de mano."},
    {l: "D", t: "Dos calces antideriva, dos banderines rojos, llaves de tel√©fonos situados en los m√°stiles de las se√±ales, dos linternas, dotadas de luces de colores blanco y rojo."}
  ]},
  "15": {q: "Las comunicaciones y √≥rdenes escritas transmitidas o recibidas por el operador de maquinaria de infraestructura ¬øD√≥nde ser√°n registradas?", a: "C", opts: [
    {l: "A", t: "Libro de registro de telefonemas para trabajos"},
    {l: "B", t: "Es OMI solo interviene en EVB y TES y en las zonas de trabajos en que recibe √≥rdenes escritas es el ET y el PSH"},
    {l: "C", t: "Libro general de telefonemas"},
    {l: "D", t: "El OMI no registra comunicaciones, las realiza solo el encargado de trabajos."}
  ]},
  "16": {q: "¬øC√≥mo se considerar√≠a el operador de maquinaria de infraestructura, que maneja o desplaza maquinaria de v√≠a, los pasos a nivel autom√°ticos, en una entrega de v√≠a bloqueada?", a: "C", opts: [
    {l: "A", t: "Se atender√° a las instrucciones del encargado de trabajos"},
    {l: "B", t: "Aquellos no se pueden cerrar solicitar√° instrucciones del responsable de circulaci√≥n"},
    {l: "C", t: "Proceder√° como si todos los PN del trayecto estuviesen sin protecci√≥n"},
    {l: "D", t: "Considerar√° todos los P.N. desprotegidos, y se atender√° a las instrucciones del agente que lo tenga a su cargo."}
  ]},
  "17": {q: "Sistema que permite establecer itinerarios seguros para la circulaci√≥n de los trenes en el √°mbito de las estaciones, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de v√≠a, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales.", a: "D", opts: [
    {l: "A", t: "CTC"},
    {l: "B", t: "ASFA"},
    {l: "C", t: "Bloqueo"},
    {l: "D", t: "Enclavamiento"}
  ]},
  "18": {q: "Zona de peligro el√©ctrico. Se√±ale la definici√≥n correcta.", a: "B", opts: [
    {l: "A", t: "Espacio alrededor del hilo de contacto dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico o un contacto directo con el elemento en tensi√≥n. La amplitud de la zona de peligro el√©ctrico depende del voltaje del conductor."},
    {l: "B", t: "Espacio alrededor del conductor el√©ctrico dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico o un contacto directo con el elemento en tensi√≥n. La amplitud de la zona de peligro el√©ctrico depende del voltaje del conductor"},
    {l: "C", t: "Espacio alrededor del hilo de contacto dentro del cual un trabajador con una herramienta o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico o un contacto directo con el elemento en tensi√≥n. La amplitud de la zona de peligro el√©ctrico depende del voltaje del conductor."},
    {l: "D", t: "Espacio alrededor del conductor el√©ctrico dentro del cual un trabajador o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico o un contacto directo con el elemento en tensi√≥n. La amplitud de la zona de peligro el√©ctrico depende del voltaje del tipo de l√≠nea a√©rea de contacto donde se trabaje."}
  ]},
  "19": {q: "Haciendo referencia a las comunicaciones reglamentarias. Se√±ale la respuesta correcta.", a: "C", opts: [
    {l: "A", t: "Las comunicaciones escritas entre responsables de circulaci√≥n, ya sean de estaciones, de una banda de regulaci√≥n de un PM o de un CTC se realizaran preferentemente mediante el sistema de telefon√≠a fija disponible al efecto"},
    {l: "B", t: "El personal receptor de una comunicaci√≥n oral deber√° comprobar que √©sta ha sido comprendida por el emisor. Adem√°s, deber√°n registrarla en los libros correspondientes"},
    {l: "C", t: "El personal emisor de una comunicaci√≥n verbal deber√° comprobar que esta ha sido comprendida por el receptor."},
    {l: "D", t: "El maquinista detendr√° el tren para recibir una comunicaci√≥n, ya sea verbal o escrita"}
  ]},
  "20": {q: "¬øCu√°les son los sistemas de ejecuci√≥n de trabajos en la v√≠a?", a: "C", opts: [
    {l: "A", t: "EVB, ILT, TES y TIS"},
    {l: "B", t: "Compatible e incompatible"},
    {l: "C", t: "Sistemas de interrupci√≥n de la circulaci√≥n y sistema de liberaci√≥n por tiempo"},
    {l: "D", t: "Sistema EVB y sistema ILT"}
  ]},
  "21": {q: "En las estaciones ¬øQu√© orden mantendr√°n las se√±ales de entrada y salida hacia y desde las v√≠as afectadas, durante aplicaci√≥n de una EVB?", a: "D", opts: [
    {l: "A", t: "Opci√≥n A de la imagen"},
    {l: "B", t: "Opci√≥n B de la imagen"},
    {l: "C", t: "Opci√≥n C de la imagen"},
    {l: "D", t: "Opci√≥n D de la imagen"}
  ]},
  "22": {q: "¬øC√≥mo actuar√° un piloto de seguridad? (se√±al de alarma ‚Ä¢‚Ä¢‚Ä¢  ‚Ä¢‚Ä¢‚Ä¢  ‚Ä¢‚Ä¢‚Ä¢)", a: "D", opts: [
    {l: "A", t: "No realizara ninguna actuaci√≥n"},
    {l: "B", t: "Acudir√° r√°pidamente al lugar de peligro o accidente para prestar los auxilios necesarios"},
    {l: "C", t: "Llamar√° al responsable de circulaci√≥n para recabar la forma de proceder"},
    {l: "D", t: "Si su misi√≥n se lo permite, acudir√° r√°pidamente al lugar de peligro o accidente para prestar los auxilios necesarios."}
  ]},
  "23": {q: "De las siguientes se√±ales, ¬øCu√°l ser√≠a la correcta para acceder a una entrega de v√≠a bloqueada?", a: "B", opts: [
    {l: "A", t: "Opci√≥n A de la imagen"},
    {l: "B", t: "Opci√≥n B de la imagen"},
    {l: "C", t: "Opci√≥n C de la imagen"},
    {l: "D", t: "Opci√≥n D de la imagen"}
  ]},
  "24": {q: "Si, por la importancia de los trabajos o por cualquier otra causa, no fuese posible aplicar las prescripciones del cap√≠tulo tercero, del libro tercero, del RCF. Se√±ale la respuesta correcta.", a: "C", opts: [
    {l: "A", t: "PM dar√°, con car√°cter provisional, las instrucciones pertinentes mediante comunicaci√≥n grabada o telefonema"},
    {l: "B", t: "Se lo comunicara a su jefe inmediato, quien se pondr√° de acuerdo con PM la forma de actuar"},
    {l: "C", t: "Se regulara por consigna del AI, la forma de proceder."},
    {l: "D", t: "Se atendr√° a la orden de trabajo recibida."}
  ]},
  "25": {q: "Trabajos en el sistema de ILT, en un BAD, por v√≠a 1, ¬øD√≥nde se colocar√° las se√±ales port√°tiles de parada?, cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito.", a: "A", opts: [
    {l: "A", t: "A una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal"},
    {l: "B", t: "No se solicitar√°n los trabajos por estar establecida una BTV"},
    {l: "C", t: "A una distancia m√≠nima de 500 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido contrario"},
    {l: "D", t: "A una distancia siempre superior de 600 metros del tajo, por la cabecera desde donde se reciban los trenes en sentido normal."}
  ]},
  "26": {q: "¬øCu√°ndo se incluir√° el texto 'Tren ___ pas√≥ por el km ___ a las ___' en el telefonema de solicitud de un intervalo de liberaci√≥n por tiempo?", a: "C", opts: [
    {l: "A", t: "En aquellas l√≠neas de d√©bil tr√°fico y alta saturaci√≥n, siempre con un tren en marcha"},
    {l: "B", t: "Cuando el encargado de trabajos presencie el paso del tren, y as√≠ venga recogido en acta de trabajos."},
    {l: "C", t: "Se inscribir√° el n√∫mero de tren si esta condici√≥n ha sido exigida por el responsable de circulaci√≥n, en las l√≠neas de d√©bil tr√°fico y alta saturaci√≥n"},
    {l: "D", t: "Cuando sea necesario introducir maquinaria por un punto kilom√©trico"}
  ]},
  "27": {q: "Condiciones de aplicaci√≥n de la EVB. En las l√≠neas sin CTC, el responsable de circulaci√≥n de las estaci√≥n que conceda la EVB, deber√° disponer de autorizaci√≥n previa del", a: "B", opts: [
    {l: "A", t: "Responsable de circulaci√≥n del CTC, quien fijar√° el tiempo de ocupaci√≥n de la v√≠a."},
    {l: "B", t: "Responsable de circulaci√≥n de la banda de regulaci√≥n del PM, quien fijara el tiempo de ocupaci√≥n de la v√≠a"},
    {l: "C", t: "Responsable de circulaci√≥n de la estaci√≥n o del CTC del PM, quien autorizar√° el tiempo m√≠nimo de ocupaci√≥n de la v√≠a"},
    {l: "D", t: "Responsable de circulaci√≥n de la banda de regulaci√≥n del PM, quien autorizar√° el tiempo m√≠nimo de ocupaci√≥n de la v√≠a."}
  ]},
  "28": {q: "Prescripciones de circulaci√≥n de una EVB. Se√±ale la respuesta incorrecta.", a: "C", opts: [
    {l: "A", t: "Los trenes de trabajo o pruebas que circulen al amparo de la EVB, podr√°n se expedidos en sentido normal o a contrav√≠a, efectuar paradas y retroceder en plena v√≠a"},
    {l: "B", t: "El encargado de los mismos solicitar√° autorizaci√≥n verbal al responsable de circulaci√≥n de la estaci√≥n para realizar los movimientos de entrada o salida de material. Deber√° indicar claramente las v√≠as de origen y destino del tren de trabajos. En l√≠neas de ancho mixto, deber√° especificar adem√°s el ancho en el que circula."},
    {l: "C", t: "Para la salida y entrada de los trenes de trabajo hacia/desde el trayecto afectado, bastar√° con la orden de la se√±al de salida/entrada o la autorizaci√≥n de rebase del responsable de circulaci√≥n al encargado de trabajos en los casos en los que no sea posible su apertura."},
    {l: "D", t: "El responsable de circulaci√≥n del CTC o de la estaci√≥n, establecer√° el itinerario solicitado y si fuese posible har√° uso de la apertura de la se√±al con la indicaci√≥n de rebase autorizado."}
  ]},
  "29": {q: "Concesi√≥n de la EVB cuando las estaciones colaterales del trayecto est√©n a cargo del mismo responsable de circulaci√≥n ¬øcon que telefonema autorizar√° al encargado de trabajos?", a: "D", opts: [
    {l: "A", t: "Telefonema A de la imagen"},
    {l: "B", t: "Telefonema B de la imagen"},
    {l: "C", t: "Telefonema C de la imagen"},
    {l: "D", t: "Telefonema D de la imagen"}
  ]},
  "30": {q: "En una EVB establecida entre dos estaciones en un BLAU sin CTC, ¬øA qui√©n se le deber√° hacer la solicitud y que medias de protecci√≥n implementar√° quien solicita ese sistema de trabajos?", a: "A", opts: [
    {l: "A", t: "Al responsable de circulaci√≥n de una de esas dos estaciones colaterales e instalara se√±ales port√°tiles de parada"},
    {l: "B", t: "Al RC de una de las estaciones colaterales o al del CTC y √∫tiles de cortocircuito, sin son compatibles"},
    {l: "C", t: "Al RC de una de las estaciones colaterales o al de la banda de regulaci√≥n de PM y √∫tiles de cortocircuito, si son compatibles"},
    {l: "D", t: "Al RC de una de las estaciones colaterales o al de la banda de regulaci√≥n del PM e instalara se√±ales port√°tiles de parada"}
  ]},
  "31": {q: "¬øQu√© se consideran trabajos en estaci√≥n?", a: "B", opts: [
    {l: "A", t: "Los que se realizan entre las se√±ales de salida de la misma y por tanto pueden ser protegidos por los dispositivos locales"},
    {l: "B", t: "Los que se realizan entre las se√±ales de entrada de la misma y por tanto pueden ser protegidos por los dispositivos locales"},
    {l: "C", t: "Los que se realizan entre las se√±ales de entrada de la misma y por tanto pueden ser protegidos por los dispositivos remotos en el caso de un CTC"},
    {l: "D", t: "Los que se realizan entre las se√±ales de salida de la misma y por tanto pueden ser protegidos por los dispositivos remotos en el caso de un CTC"}
  ]},
  "32": {q: "¬øQui√©n fijar√° el plazo l√≠mite para la ocupaci√≥n de la v√≠a en un trabajo en estaci√≥n?", a: "A", opts: [
    {l: "A", t: "El responsable de circulaci√≥n de la estaci√≥n"},
    {l: "B", t: "El responsable de circulaci√≥n del PM"},
    {l: "C", t: "El responsable de circulaci√≥n del CTC"},
    {l: "D", t: "El responsable de circulaci√≥n de la banda de regulaci√≥n del PM"}
  ]},
  "33": {q: "Una vez concertado un trabajo en estaci√≥n, un responsable de circulaci√≥n precisa utilizar alguna de las instalaciones o dispositivos autorizados para la circulaci√≥n de un tren o maniobra. ¬øC√≥mo actuar√° el encargado de trabajos?", a: "D", opts: [
    {l: "A", t: "Se pondr√°n de acuerdo la forma de proceder entre el ET y el RC de la estaci√≥n o del CTC"},
    {l: "B", t: "El EC de circulaci√≥n cursar√° al ET el telefonema L3.18 (precisa), retirar√° las herramientas y personal y dar√° paso al tren o maniobras."},
    {l: "C", t: "El encarado de trabajos, una vez recibido el telefonema L3.18 (precisa y contesta con el L3.19 (dispuesta), retirar√° las herramientas, personal y protecciones, para dar paso al tren o maniobra."},
    {l: "D", t: "El encargado de trabajos comunicar√° al responsable de circulaci√≥n que no es posible la circulaci√≥n de trenes o maniobras hasta la finalizaci√≥n de los trabajos"}
  ]},
  "34": {q: "Trabajos en las instalaciones de seguridad. De acuerdo con su mayor o menor repercusi√≥n en la circulaci√≥n, se clasifican en:", a: "C", opts: [
    {l: "A", t: "1¬™ Categor√≠a: agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as. 2¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n."},
    {l: "B", t: "1¬™ Categor√≠a: agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n. Estar√°n siempre regulados por consigna del AI. 2¬™ Categor√≠a: agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as. 3¬™ Categor√≠a de obra nueva y sustituci√≥n total de todas las instalaciones."},
    {l: "C", t: "1¬™ Categor√≠a: agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n. Estar√°n siempre regulados por consigna del AI. 2¬™ Categor√≠a: agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as"},
    {l: "D", t: "1¬™ Categor√≠a de obra nueva y sustituci√≥n total de todas las instalaciones. 2¬™ Categor√≠a: agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as. 3¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n."}
  ]},
  "35": {q: "Telefonema de restablecimiento de un trabajo en instalaciones de seguridad. Se√±ale la respuesta correcta.", a: "B", opts: [
    {l: "A", t: "Telefonema A de la imagen"},
    {l: "B", t: "Telefonema B de la imagen"},
    {l: "C", t: "Telefonema C de la imagen"},
    {l: "D", t: "Telefonema D de la imagen"}
  ]},
  "36": {q: "¬øC√≥mo se registrar√° la informaci√≥n de una transmisi√≥n de servicio entre pilotos de seguridad?", a: "D", opts: [
    {l: "A", t: "Se registraran en sus respectivos libros de registro de telefonemas para trabajos"},
    {l: "B", t: "Lo registraran en el libro general de telefonemas"},
    {l: "C", t: "Verbalmente, si no se establece otro procedimiento."},
    {l: "D", t: "Ninguna respuesta es correcta."}
  ]},
  "37": {q: "Transmisi√≥n de servicio entre encargados de trabajos. ¬øCu√°l de las siguientes informaciones en una transmisi√≥n del servicio, no es correcta?", a: "B", opts: [
    {l: "A", t: "Ubicaci√≥n de las limitaciones de velocidad m√°xima"},
    {l: "B", t: "Sistema de protecci√≥n de trabajos en ejecuci√≥n a su cargo, con especificaci√≥n del horario de inicio y finalizaci√≥n previsto."},
    {l: "C", t: "Disponibilidad de los √∫tiles de servicio y medidas adoptadas en caso de ausencia de los mismos."},
    {l: "D", t: "Ubicaci√≥n de las se√±ales port√°tiles de parada de pantalla y de los cartelones de silbar."}
  ]},
  "38": {q: "Metodolog√≠a de las comunicaciones. T√©rmino utilizado para indicar el mensaje a terminado.", a: "C", opts: [
    {l: "A", t: "Cambio"},
    {l: "B", t: "Recibido"},
    {l: "C", t: "Corto"},
    {l: "D", t: "Correcto"}
  ]},
  "39": {q: "Algunas se√±ales, presentar√°n en sus m√°stiles y complementos estructurales, aspectos espec√≠ficos diferentes a los del resto de las se√±ales, para alertar al maquinista de la presencia de determinados puntos cr√≠ticos de la infraestructura. De las siguientes se√±ales (opciones), ¬øCu√°l no deber presentar ese complemento estructural?", a: "B", opts: [
    {l: "A", t: "Se√±al A de la imagen"},
    {l: "B", t: "Se√±al B de la imagen"},
    {l: "C", t: "Se√±al C de la imagen"},
    {l: "D", t: "Se√±al D de la imagen"}
  ]},
  "40": {q: "Seg√∫n este dibujo ¬øQu√© se√±ales se tendr√≠an que tapar o quitar?", a: "C", opts: [
    {l: "A", t: "Anuncio 80 LTVM, anuncio 110 LVM, 140 LVM"},
    {l: "B", t: "Todas las de LVM"},
    {l: "C", t: "Anuncio de VM 110, velocidad m√°xima 110 y"},
    {l: "D", t: "Ninguna est√° correctamente se√±alizada"}
  ]},
  "41": {q: "Completa los cuadros en blanco, con los acr√≥nimos siguientes: TI-ARgE-TC", a: "A", opts: [
    {l: "A", t: "TI, TI, ARGE, TC, ARGE, TI"},
    {l: "B", t: "Otra combinaci√≥n"},
    {l: "C", t: "Otra combinaci√≥n"},
    {l: "D", t: "Otra combinaci√≥n"}
  ]},
  "42": {q: "¬øEn base a qu√© proceso, se determinar√° la forma de controlar adecuadamente los riesgos inherentes al trabajo compatible con la circulaci√≥n o actividad de regulaci√≥n espec√≠fica, para que su desarrollo se realice de forma segura?", a: "D", opts: [
    {l: "A", t: "Consigna"},
    {l: "B", t: "Acta de trabajos."},
    {l: "C", t: "Procedimientos operativo"},
    {l: "D", t: "An√°lisis de riesgo especifico, valorando las condiciones del entorno"}
  ]},
  "43": {q: "Requisitos m√≠nimos para la realizaci√≥n de ARgE. ¬øQu√© afirmaci√≥n no es correcta?", a: "D", opts: [
    {l: "A", t: "Este tipo de actividades deber√°n estar controladas y vigiladas, al menos por un piloto de seguridad, quien dispondr√° de los medios adecuados para conocer y apercibir la llegada de las circulaciones. Dicho piloto de seguridad se dedicar√° exclusivamente a las funciones inherentes a su habilitaci√≥n"},
    {l: "B", t: "En caso de existir m√°s de una zona de actividad en un determinado trayecto, cada tajo de trabajo deber√° estar controlado y vigilado por un piloto de seguridad"},
    {l: "C", t: "Como medida complementaria a las funciones del piloto de seguridad, entre las medidas preventivas, se pondr√° incluir la utilizaci√≥n de sistemas de alarma por aproximaci√≥n de trenes al efecto (SAAT)"},
    {l: "D", t: "Este tipo de actividades deber√°n estar controladas y dirigidas, al menos, por un piloto de seguridad habilitado o encargado de trabajos, quien dispondr√° de los medios adecuados para conocer y apercibir la llegada de las circulaciones."}
  ]},
  "44": {q: "Con independencia de las circunstancias que concurran en los trabajos que se realicen en la infraestructura, los pilares fundamentales sobre los que se basa la protecci√≥n y, por lo tanto, la seguridad en los mismos son:", a: "B", opts: [
    {l: "A", t: "La correcta aplicaci√≥n de lo dispuesto en el acta de trabajos y consignas."},
    {l: "B", t: "La planificaci√≥n, la aplicaci√≥n de la normativa reglamentaria, la utilizaci√≥n de los sistemas de protecci√≥n adecuados y el restablecimiento del servicio."},
    {l: "C", t: "Garantizar su calidad y consistencia. Adem√°s, deber√° certificar su finalizaci√≥n y las condiciones en las que se deja la v√≠a y las instalaciones antes de restablecer la circulaci√≥n de trenes."},
    {l: "D", t: "Previamente al restablecimiento de la circulaci√≥n de trenes con el responsable de circulaci√≥n, el encargado de trabajos o el piloto de seguridad habilitado para concertar trabajos, deber√° recibir la confirmaci√≥n fehaciente de los pilotos de seguridad y de los responsables t√©cnicos de los trabajos."}
  ]},
  "45": {q: "Condiciones particulares para trabajos y pruebas en t√∫neles de longitud superior a 5km. ¬øQu√© requisitos es necesario para que el tren de pruebas pueda superar una velocidad superior a 120km/h, hasta alcanzar las velocidades m√°ximas previstas en las pruebas?", a: "B", opts: [
    {l: "A", t: "Si el t√∫nel es de doble v√≠a, la circulaci√≥n de los trenes de pruebas ser√° incompatible con la realizaci√≥n de trabajos en cualquiera de las dos v√≠as."},
    {l: "B", t: "El encargado de los trabajos, garantizara en todo momento el cierre de todas las puertas de las galer√≠as o centros de transformaci√≥n que dan acceso a la v√≠a de pruebas, previo a su inicio y mientras duren √©stas."},
    {l: "C", t: "Dentro del t√∫nel por la v√≠a afectada por las pruebas, no se realizaran trabajos salvo los que se lleven a cabo en el interior de las zonas seguras y de las salas t√©cnicas."},
    {l: "D", t: "Si el t√∫nel es de doble v√≠a y cuenta con un tubo para cada v√≠a, el tubo de la v√≠a por la que se realicen las pruebas deber√° estar libre de obst√°culos (personas, herramientas, materiales en genera, etc.) en toda su secci√≥n. Para compatibilizar las pruebas con los trabajos, existir√° un encargado de trabajos responsable del t√∫nel designado para cada v√≠a expresamente."}
  ]},
  "R1": {q: "¬øCu√°l es el objeto del RCF?", a: "B", opts: [
    {l: "A", t: "Es proporcionar un marco regulador √∫nico de los procesos operativos en los que exista una interfaz directa entre el administrador de infraestructura (AI) y la empresa ferroviaria (EF), unificando los criterios de operaci√≥n de los distintos AI en los distintos anchos de la red"},
    {l: "B", t: "Establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realicen de forma segura, eficiente y puntual, tanto en condiciones de explotaci√≥n norma como degradada, incluyendo su recuperaci√≥n efectiva y tras una interrupci√≥n del servicio."},
    {l: "C", t: "Establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realicen de forma segura, deficiente y puntual, tanto en condiciones de explotaci√≥n normal como degradada, incluyendo su recuperaci√≥n efectiva tras una interrupci√≥n del servicio."},
    {l: "D", t: "Establecer normas gen√©ricas para que la circulaci√≥n de los trenes y de las maniobras se realicen de forma segura, eficiente y puntual, tanto en condiciones de explotaci√≥n normal como degradada, incluyendo su recuperaci√≥n efectiva tras una interrupci√≥n del servicio."}
  ]},
  "R2": {q: "¬øQu√© indica el piquete de entrev√≠as?", a: "D", opts: [
    {l: "A", t: "El punto hasta donde pueden circular varios trenes de forma compatible, sin colisionar."},
    {l: "B", t: "El punto hasta donde pueden estacionar los trenes de forma compatible"},
    {l: "C", t: "El punto hasta el que es incompatible la circulaci√≥n simultanea por ambas v√≠as, sin interferencias entre ellas"},
    {l: "D", t: "El punto hasta donde es compatible la circulaci√≥n simultanea por las v√≠as, sin que se produzcan interferencias entre ellas."}
  ]}
};

  let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    const imagenHTML = q.img
  ? `<div style="margin:10px 0;text-align:center">
       <img src="${q.img}" alt="Imagen pregunta ${qid}"
            style="max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,.15)">
     </div>`
  : '';

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      ${imagenHTML}
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
 // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
</script>
</body>
</html>
