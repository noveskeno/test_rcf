<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PARCIAL - ENERO 2026</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 200px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 160px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{padding:11px 12px}
  .btn-group{display:flex;gap:6px;width:100%}
  .btn-group button{flex:1}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>PARCIAL - ENERO 2026</h1>
    <div class="badge">45 preguntas + 2</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;width:100%">
        <button onclick="calificar()" style="width:100%">üìä Calificar</button>
        <div class="btn-group">
          <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
          <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver</button>
        </div>
      </div>
  </div>
  <button id="scrollTopBtn" class="scroll-top">‚Üë</button>
  
<script>
// Test data with questions and answers
const testData = {
  "1": {q: "Tienen secci√≥n circular y di√°metro de hasta 2 metros.", a: "C", opts: [
    {l: "A", t: "Ponton"},
    {l: "B", t: "Alcantarilla"},
    {l: "C", t: "Tubo"},
    {l: "D", t: "Marco"}
  ]},
  "2": {q: "Definici√≥n de ancho de v√≠a. Selecciona la correcta", a: "D", opts: [
    {l: "A", t: "Definici√≥n A"},
    {l: "B", t: "Definici√≥n B"},
    {l: "C", t: "Definici√≥n C"},
    {l: "D", t: "Definici√≥n D"}
  ]},
  "3": {q: "Combinaci√≥n de desv√≠o/s y traves√≠as oblicuas con o sin uni√≥n que permite cruzar varias v√≠as paralelas y conectar algunas de ellas.", a: "C", opts: [
    {l: "A", t: "Escape"},
    {l: "B", t: "Bretelle"},
    {l: "C", t: "Diagonal"},
    {l: "D", t: "Haz de vias"}
  ]},
  "4": {q: "¬øQu√© clase de paso a nivel tiene protecci√≥n de la v√≠a?", a: "D", opts: [
    {l: "A", t: "A2"},
    {l: "B", t: "A3"},
    {l: "C", t: "P"},
    {l: "D", t: "A4"}
  ]},
  "5": {q: "Separaci√≥n m√°xima entre ejes de postes de catenaria en AV", a: "A", opts: [
    {l: "A", t: "65-70"},
    {l: "B", t: "50-60"},
    {l: "C", t: "55-60"},
    {l: "D", t: "60-70"}
  ]},
  "6": {q: "Seg√∫n NAR 4/24 el personal ferroviario esta obligado a: Se√±ala la incorrecta", a: "A", opts: [
    {l: "A", t: "Opci√≥n incorrecta A"},
    {l: "B", t: "Opci√≥n correcta B"},
    {l: "C", t: "Opci√≥n correcta C"},
    {l: "D", t: "Opci√≥n correcta D"}
  ]},
  "7": {q: "NAR 5/18 (Transmisi√≥n del servicio) Se√±ala la respuesta correcta. ¬øD√≥nde registrar√°n los encargados los telefonemas de la transmisi√≥n de servicio cuando se produzca de forma excepcional?", a: "C", opts: [
    {l: "A", t: "Libro General de Telefonemas"},
    {l: "B", t: "Libro de Bloqueo"},
    {l: "C", t: "Libro de telefonemas para trabajos"},
    {l: "D", t: "Libro de telefonemas"}
  ]},
  "8": {q: "NAR 2/18 (√ötiles de servicio). ¬øQu√© har√° el personal que se percate de la falta de alg√∫n √∫til de servicio?", a: "D", opts: [
    {l: "A", t: "Lo pondr√° en conocimiento de su responsable inmediato quien determinar√°, de acuerdo con el RC, la forma de proceder."},
    {l: "B", t: "Lo pondr√° en conocimiento de su responsable inmediato quien determinar√°, de acuerdo con el RC de la Banda de Regulaci√≥n, la forma de proceder."},
    {l: "C", t: "No podr√° realizar las tareas que se le han encomendado, si antes no ha sido autorizado por el Director de obra."},
    {l: "D", t: "Lo pondr√° en conocimiento de su responsable inmediato quien determinar√°, de acuerdo con el PM, la forma de proceder."}
  ]},
  "9": {q: "NAR 9/18 (Coordinaci√≥n Trabajos) ¬øQu√© se entiende por Responsable T√©cnico?", a: "C", opts: [
    {l: "A", t: "Aquel agente que comunica al Piloto de Seguridad el inicio y la finalizaci√≥n de los trabajos."},
    {l: "B", t: "Aquel agente que comunica al Piloto de Seguridad Habilitado para concertar Trabajos, el inicio y la finalizaci√≥n de los trabajos"},
    {l: "C", t: "La persona con una especialidad t√©cnica necesaria para la realizaci√≥n de determinadas tareas."},
    {l: "D", t: "Aquel agente que comunica al Encargado de Trabajos y al Piloto de Seguridad Habilitado para concertar Trabajos, el inicio y la finalizaci√≥n de los trabajos"}
  ]},
  "10": {q: "NAR 4/18 (Modelos para el registro...). En el siguiente telefonema ¬øse debe inscribir el n√∫mero de tren? Solicito intervalo de liberaci√≥n por tiempo en el km___de la v√≠a (2) ___ entre ____ y ____ hasta las ___. Tren(3) _____ pas√≥ por el km ___ a las ____.", a: "B", opts: [
    {l: "A", t: "Siempre es obligatorio rellenar todos los 'campos'"},
    {l: "B", t: "Se inscribir√° el n√∫mero de tren si esta condici√≥n ha sido exigida por el Responsable de Circulaci√≥n."},
    {l: "C", t: "Se inscribir√° el n√∫mero de tren si esta condici√≥n ha sido exigida por el Responsable de Circulaci√≥n del CTC o de la estaci√≥n."},
    {l: "D", t: "Siempre que se solicite una ILT con un tren en el trayecto."}
  ]},
  "11": {q: "¬øCu√°les son los bloqueos autom√°ticos?", a: "D", opts: [
    {l: "A", t: "BLAU, BLAD, BLAB, BAU, BAB, BAD"},
    {l: "B", t: "BLAU, BLAD, BLAB, BAU, BAB, BAD, BSL, BCA"},
    {l: "C", t: "BLAU, BLAD, BLAB, BAU, BAB, BAD, BSL, BCA, BT"},
    {l: "D", t: "BAU, BAD, BAB"}
  ]},
  "12": {q: "NAR 1/24 (Metodolog√≠a de las comunicaciones...). ¬øQui√©n es responsable de elaborar el libro de instrucciones europeas y nacionales en su idioma de explotaci√≥n?", a: "D", opts: [
    {l: "A", t: "AESF"},
    {l: "B", t: "ADIF y RENFE"},
    {l: "C", t: "Al y EF"},
    {l: "D", t: "El Administrador de Infraestructuras"}
  ]},
  "13": {q: "De las siguientes respuestas, seg√∫n el RCF, ¬øCu√°l no est√° considerado un sistema?", a: "B", opts: [
    {l: "A", t: "ILT"},
    {l: "B", t: "TES"},
    {l: "C", t: "EVB"},
    {l: "D", t: "CTC"}
  ]},
  "14": {q: "NAR 2/18 (√ötiles de servicio). ¬øDe qu√© √∫tiles de servicio no debe estar dotado un PN a cargo de personal?", a: "D", opts: [
    {l: "A", t: "Linternas dotadas de luces de colores blanco y rojo."},
    {l: "B", t: "Banderines rojos"},
    {l: "C", t: "Medio de comunicaci√≥n port√°til GSM-R, TREN TIERRA, o radiotelefon√≠a p√∫blica."},
    {l: "D", t: "Se√±al port√°til de parada de pantalla"}
  ]},
  "15": {q: "ANULADA", a: "A", opts: [
    {l: "A", t: "Pregunta anulada"},
    {l: "B", t: "Pregunta anulada"},
    {l: "C", t: "Pregunta anulada"},
    {l: "D", t: "Pregunta anulada"}
  ]},
  "16": {q: "¬øQu√© se considera accidente grave?", a: "B", opts: [
    {l: "A", t: "Una colisi√≥n, descarrilamiento de trenes, con el resultado de al menos una v√≠ctima mortal o de cinco o m√°s heridos graves."},
    {l: "B", t: "Cualquier colisi√≥n, descarrilamiento de trenes con el resultado de al menos una v√≠ctima mortal o de cinco o m√°s heridos graves."},
    {l: "C", t: "Una colisi√≥n, descarrilamiento de trenes, con el resultado de al menos una v√≠ctima mortal o de seis o m√°s heridos graves."},
    {l: "D", t: "Cualquier colisi√≥n, descarrilamiento de trenes, con el resultado de al menos una v√≠ctima mortal o de cuatro o m√°s heridos graves."}
  ]},
  "17": {q: "Son documentos que se publican para regular las condiciones de aplicaci√≥n del RCF en casos espec√≠ficos correspondientes a √°mbitos concretos de la infraestructura.", a: "C", opts: [
    {l: "A", t: "Consigna ATO."},
    {l: "B", t: "Aviso."},
    {l: "C", t: "Consigna CO."},
    {l: "D", t: "Procedimiento Espec√≠fico."}
  ]},
  "18": {q: "¬øEn qu√© documento podremos encontrar las restricciones de velocidad, impuestas en funci√≥n de las alertas emitidas por la AEMET?", a: "B", opts: [
    {l: "A", t: "Declaraci√≥n de la Red."},
    {l: "B", t: "ICL mensual."},
    {l: "C", t: "Libro Horario de los trenes."},
    {l: "D", t: "Consigna ATO."}
  ]},
  "19": {q: "¬øQu√© sistemas se emplean para la ejecuci√≥n de trabajos en la v√≠a?", a: "C", opts: [
    {l: "A", t: "Sistema de Interrupci√≥n de la circulaci√≥n, intervalo horario, intervalo programado y anormalidad"},
    {l: "B", t: "Sistema de interrupci√≥n de la circulaci√≥n, intervalo horario, intervalo programado y anormalidad, sistema de liberaci√≥n por tiempo."},
    {l: "C", t: "Sistema de interrupci√≥n de la circulaci√≥n y sistema de liberaci√≥n por tiempo."},
    {l: "D", t: "ILT, EVB, TES, TIS y Trabajos Compatibles."}
  ]},
  "20": {q: "¬øC√≥mo actuar√° usted si escucha esta se√±al? (‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢)", a: "B", opts: [
    {l: "A", t: "Acudir√© r√°pidamente al lugar del peligro para prestar los auxilios necesarios."},
    {l: "B", t: "Acudir√© r√°pidamente al lugar del peligro para prestar los auxilios necesarios, si la misi√≥n que estoy realizando me lo permite."},
    {l: "C", t: "Acudir√© tras paralizar los trabajos que est√© realizando y tras comprobar que el personal y las herramientas est√°n apartados."},
    {l: "D", t: "Llamar√© al Responsable de Circulaci√≥n de la estaci√≥n o del CTC, para recabar √≥rdenes e indicaciones en la forma de actuar."}
  ]},
  "21": {q: "¬øQu√© se√±ales regulan la velocidad que el tren no debe exceder en ning√∫n momento?", a: "C", opts: [
    {l: "A", t: "Fundamentales."},
    {l: "B", t: "Indicadoras."},
    {l: "C", t: "De Velocidad M√°xima."},
    {l: "D", t: "De Limitaci√≥n Temporal de Velocidad M√°xima."}
  ]},
  "22": {q: "Es la que realiza el Maquinista para tratar de evitar un peligro inminente, mediante la aplicaci√≥n del freno de emergencia.", a: "C", opts: [
    {l: "A", t: "Detenci√≥n accidental."},
    {l: "B", t: "Parada inmediata."},
    {l: "C", t: "Detenci√≥n inmediata."},
    {l: "D", t: "Parada accidental."}
  ]},
  "23": {q: "Sistemas de ejecuci√≥n de trabajos en la v√≠a, ¬øCu√°les se emplean?", a: "B", opts: [
    {l: "A", t: "ILT, EVB, TES y TIS"},
    {l: "B", t: "Sistema de liberaci√≥n por tiempo y Sistema de interrupci√≥n de la circulaci√≥n."},
    {l: "C", t: "ILT, EVB, TES, TIS, Trabajos compatibles y ARgE."},
    {l: "D", t: "Trabajos compatibles y Trabajos no compatibles."}
  ]},
  "24": {q: "¬øSe puede colocar esta se√±al en la b√≥veda a la entrada de un t√∫nel de v√≠a √∫nica?", a: "C", opts: [
    {l: "A", t: "No, deben estar a los lados."},
    {l: "B", t: "No, no obstante, si lo ordena el jefe inmediato se puede colocar"},
    {l: "C", t: "Si"},
    {l: "D", t: "Debe ser autorizada por PM."}
  ]},
  "25": {q: "¬øEsta correctamente se√±alizada?", a: "D", opts: [
    {l: "A", t: "Si, est√° correcta."},
    {l: "B", t: "No, hay que quitar y sustituir√≠a por"},
    {l: "C", t: "No, hay que quitar y sustituirla por"},
    {l: "D", t: "No, hay que quitar las siguientes se√±ales y su baliza asociada."}
  ]},
  "26": {q: "Algunas se√±ales presentar√°n en sus m√°stiles y complementos estructurales, aspectos espec√≠ficos diferentes a los del resto de las se√±ales, para alertar al Maquinista de la presencia de determinados puntos cr√≠ticos de la infraestructura, tales como: se√±ale la respuesta incorrecta", a: "B", opts: [
    {l: "A", t: "Bifurcaciones y PB."},
    {l: "B", t: "Se√±ales de salida y entrada que son simult√°neamente avanzada o de entrada de la siguiente estaci√≥n."},
    {l: "C", t: "Estaciones de transici√≥n permanente a bloqueos no autom√°ticos."},
    {l: "D", t: "Se√±ales de salida que son simult√°neamente avanzada o de entrada de la siguiente estaci√≥n."}
  ]},
  "27": {q: "¬øQu√© significado tiene esta se√±al?", a: "C", opts: [
    {l: "A", t: "Ordena parar ante la se√±al y seguidamente reanudar el avance con marcha de maniobra, a 30 km/h si la locomotora va tirando del tren, o de 20 km/h si va empuj√°ndolo"},
    {l: "B", t: "Indica parar ante la se√±al y seguidamente reanudar el avance con marcha de maniobra"},
    {l: "C", t: "Ordena parar ante la se√±al y seguidamente reanudar el avance con marcha de maniobra"},
    {l: "D", t: "Cuando se trate de la salida o paso de un tren, y se presenta en la se√±al de salida, la marcha de maniobras se mantendr√° hasta rebasar la se√±al de salida"}
  ]},
  "28": {q: "¬øCu√°nto mide la zona de peligro en v√≠a √∫nica, en Red Convencional, aproximadamente?", a: "C", opts: [
    {l: "A", t: "4 metros"},
    {l: "B", t: "2 metros a ambos lados de la v√≠a medidos desde la cara exterior del carril"},
    {l: "C", t: "5,668 m"},
    {l: "D", t: "Hasta 4 metros a ambos lados de la v√≠a medidos desde la cara exterior del carril"}
  ]},
  "29": {q: "Trabajo realizado en la zona de riesgo con herramientas manuales, sin afecci√≥n a la circulaci√≥n de trenes ni a las instalaciones de seguridad en trayectos con velocidad superior a 160km/h.", a: "D", opts: [
    {l: "A", t: "Trabajo compatible"},
    {l: "B", t: "ILT"},
    {l: "C", t: "EVB"},
    {l: "D", t: "ARgE"}
  ]},
  "30": {q: "¬øCu√°l es el requisito m√≠nimo de protecci√≥n para trabajos compatibles, en la zona de seguridad, con maquinaria en tramos con velocidad superior a 160km/h?", a: "C", opts: [
    {l: "A", t: "Barreras r√≠gidas o Piloto de seguridad habilitado"},
    {l: "B", t: "Barreras r√≠gidas ancladas y aseguradas o Piloto de seguridad."},
    {l: "C", t: "Barreras r√≠gidas ancladas y aseguradas"},
    {l: "D", t: "Barreras r√≠gidas ancladas y aseguradas o Piloto de seguridad habilitado."}
  ]},
  "31": {q: "Todos los trabajos regulados en el Cap√≠tulo 3 Libro 3 del RCF necesitan la autorizaci√≥n previa de‚Ä¶", a: "C", opts: [
    {l: "A", t: "‚Ä¶Jefe inmediato y del PM."},
    {l: "B", t: "‚Ä¶Responsable de circulaci√≥n de la banda de regulaci√≥n o de la estaci√≥n."},
    {l: "C", t: "‚Ä¶Responsable de Circulaci√≥n de la estaci√≥n o del CTC."},
    {l: "D", t: "‚Ä¶Responsable de Circulaci√≥n de la estaci√≥n y del PM."}
  ]},
  "32": {q: "¬øCu√°l no es una condici√≥n de aplicaci√≥n del Sistema de Trabajos en Intervalo de Liberaci√≥n por Tiempo?", a: "B", opts: [
    {l: "A", t: "El trayecto debe estar libre de trenes."},
    {l: "B", t: "El Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos deber√° disponer, en el tajo, de un medio de comunicaci√≥n permanente con el Responsable de Circulaci√≥n de una de las estaciones o del CTC."},
    {l: "C", t: "La presencia permanente de un Encargado de trabajos o alternativamente de un Piloto de seguridad habilitado."},
    {l: "D", t: "Salvo en casos estrictamente justificados, el Responsable de Circulaci√≥n que autorice los trabajos no podr√° alterar la hora efectiva de inicio de estos, ni el Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos la hora efectiva de terminaci√≥n."}
  ]},
  "33": {q: "Sistema de trabajos en intervalo de liberaci√≥n por tiempo. En trayectos carentes de circuitos de v√≠a o cuando los trabajos no resulten compatibles con el uso de √∫tiles de cortocircuito, el Encargado de trabajos o Piloto de seguridad habilitado para concertar trabajos, una vez autorizado para realizarlos, y antes de su inicio, instalar√° se√±ales port√°tiles a una distancia m√≠nima de ¬ø?", a: "D", opts: [
    {l: "A", t: "A 5,5 veces por la velocidad de paso del tren por el tajo de trabajo."},
    {l: "B", t: "500 m√°ximos del tajo de trabajo."},
    {l: "C", t: "500 m√°ximos del tajo de trabajo en BAD por el lado normal de circulaci√≥n."},
    {l: "D", t: "500 m, en ambas cabeceras del tajo en caso de v√≠as banalizadas."}
  ]},
  "34": {q: "EVB. ¬øQui√©n fija el tiempo m√°ximo de ocupaci√≥n de la v√≠a en l√≠neas sin –°–¢–°?", a: "D", opts: [
    {l: "A", t: "RC de la estaci√≥n a quien se le solicite el trabajo."},
    {l: "B", t: "RC del CTC"},
    {l: "C", t: "EI PM"},
    {l: "D", t: "RC de la banda de regulaci√≥n"}
  ]},
  "35": {q: "EVB, Prescripciones de circulaci√≥n, se√±ale la respuesta incorrecta.", a: "B", opts: [
    {l: "A", t: "Los trenes de trabajos o pruebas que circulen al amparo de la EVB podr√°n: ser expedidos en sentido normal o a contrav√≠a, efectuar paradas, y retroceder en plena"},
    {l: "B", t: "Coordinar√° con el Responsable de Circulaci√≥n y el maquinista la expedici√≥n de los trenes hacia o desde el trayecto afectado y su eventual apartado."},
    {l: "C", t: "Respetar√° la orden de todas las se√±ales, excepto las se√±ales intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL y BCA que las considerar√° inexistentes. Para las pruebas se estar√° a lo dispuesto en la correspondiente Consigna y a las instrucciones del Encargado de pruebas."},
    {l: "D", t: "Ser√° el responsable de dar instrucciones al Maquinista en cuanto a las operaciones a realizar, paradas, movimientos de avance o retroceso y condiciones de circulaci√≥n en la EVB."}
  ]},
  "36": {q: "¬øCu√°l es la definici√≥n correcta de la denominada Zona de Peligro el√©ctrico?", a: "D", opts: [
    {l: "A", t: "Espacio alrededor hilo de contacto dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico. Para corriente de 3000 w CA 0,80m."},
    {l: "B", t: "Espacio alrededor del conductor el√©ctrico dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico. Para corriente de 25.000w CA 0,80m"},
    {l: "C", t: "Espacio alrededor del hilo de contacto dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajaos podr√≠an sufrir un arco el√©ctrico. Para corriente de 25.000 CC"},
    {l: "D", t: "Espacio alrededor del conductor el√©ctrico dentro del cual un trabajador (con o sin herramienta) o una m√°quina de trabajos podr√≠an sufrir un arco el√©ctrico o un contacto directo con el elemento en tensi√≥n."}
  ]},
  "37": {q: "¬øCu√°l es el telefonema de restablecimiento de la EVB del Encargado de trabajos?", a: "D", opts: [
    {l: "A", t: "¬´Finalizada la EVB de la v√≠a [__(I, II, etc.)___] entre___(estaci√≥n)__ y __(estaci√≥n)__ [ y v√≠a __de la estaci√≥n___]. Puede reanudarse la circulaci√≥n con condiciones normales [o con las condiciones y limitaciones temporales de velocidad m√°xima siguientes:___]¬ª"},
    {l: "B", t: "Conforme con la finalizaci√≥n de la EVB [de la v√≠a ___ (I, II, etc.) __] y con el restablecimiento de la circulaci√≥n con __ (BT, BA, BSL, BLA, BCA)__."},
    {l: "C", t: "Finalizada la EVB [de la v√≠a ___ (I, II, etc.) __]. Se restablece la circulaci√≥n con __ (BT, BA, BSL, BLA, BCA)__."},
    {l: "D", t: "¬´Queda libre la v√≠a [__(I, II, etc.) __] entre __ (estaci√≥n)__ y __(estaci√≥n)__ [y v√≠a __ de la/s estaci√≥n/es __]. Puede reanudarse la circulaci√≥n en condiciones normales [o con las condiciones y/o limitaciones siguientes:___ ]¬ª"}
  ]},
  "38": {q: "Trabajos en estaci√≥n (Protecci√≥n de los trabajos). Se√±ale la respuesta incorrecta.", a: "D", opts: [
    {l: "A", t: "EI RC utilizar√° el mando del enclavamiento para proteger la v√≠a objeto de los trabajos de la invasi√≥n intempestiva de cualquier circulaci√≥n"},
    {l: "B", t: "En los casos de v√≠as carentes de circuitos de v√≠a o de trabajos no compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a 500m en el eje de la v√≠a y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada."},
    {l: "C", t: "En el caso de v√≠as dotadas de circuitos de v√≠a y trabajos compatibles con el uso de √∫tiles de cortocircuito, colocar√° la barra o √∫til de cortocircuito."},
    {l: "D", t: "Tras la conformidad de los trabajos del RC, el ET proteger√° el tajo de trabajo."}
  ]},
  "39": {q: "Trabajos en Estaci√≥n. El Encargado de trabajos o Piloto de seguridad habilitado para concertarlos, deber√° disponer de la autorizaci√≥n previa de‚Ä¶. Se√±ale la respuesta correcta.", a: "A", opts: [
    {l: "A", t: "...De su RC"},
    {l: "B", t: "...Del RC del CTC"},
    {l: "C", t: "...Del RC del PM"},
    {l: "D", t: "...Del Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."}
  ]},
  "40": {q: "¬øQu√© telefonema de los siguientes, autoriza el sistema de trabajos de Intervalo de Liberaci√≥n por Tiempo?", a: "D", opts: [
    {l: "A", t: "¬´ Concedida intervalo de liberaci√≥n por tiempo en el km ___ [ de la v√≠a ___ (I, II, etc.) __] entre ___ y ___ hasta las ___. (No) se compatibiliza la circulaci√≥n por la v√≠a contigua ] ¬ª"},
    {l: "B", t: "¬´ Concedido intervalo de liberaci√≥n por tiempo en el km ___ entre ___ y ___ hasta las ___. [(Si/No) se compatibiliza la circulaci√≥n por la v√≠a contigua] ¬ª"},
    {l: "C", t: "¬´ Conforme con el intervalo de liberaci√≥n por tiempo en el km ___ [ de la v√≠a ___ (I, II, etc.) __] entre ___ y___ hasta las ___. (Si) se compatibiliza la circulaci√≥n por la v√≠a contigua. ¬ª"},
    {l: "D", t: "¬´ Concedido intervalo de liberaci√≥n por tiempo en el km ___ [ de la v√≠a ___ (I, II, etc.) __] entre ___ y ___ hasta las ___. [(Si/No) se compatibiliza la circulaci√≥n por la v√≠a contigua] ¬ª"}
  ]},
  "41": {q: "Trabajos en estaci√≥n. ¬øC√≥mo proteger√° el Encargado de los Trabajos? Se√±ale la respuesta correcta", a: "C", opts: [
    {l: "A", t: "En los casos de v√≠as con de circuitos de v√≠a, se instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por lado donde se espera la primera circulaci√≥n, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada."},
    {l: "B", t: "En los casos de v√≠as carentes de circuitos de v√≠a o de trabajos no compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a por ambos lados a 500m, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada"},
    {l: "C", t: "En los casos de v√≠as carentes de circuitos de v√≠a o de trabajos no compatibles con e uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada en el eje de la v√≠a y por ambos lados, incluso cuando sea posible orientar las agujas en la posici√≥n adecuada"},
    {l: "D", t: "En los casos de v√≠as carentes de circuitos de v√≠a o de trabajos no compatibles con el uso de √∫tiles de cortocircuito, instalar√° se√±ales port√°tiles de parada a 500m en el eje de la v√≠a y por ambos lados, incluso cuando no sea posible orientar las agujas en la posici√≥n que estime el Responsable de circulaci√≥n."}
  ]},
  "42": {q: "Trabajos en II.SS. Cuando para la circulaci√≥n de un tren o maniobra, sea preciso utilizar alguna de las instalaciones o dispositivos temporalmente fuera de servicio, se proceder√° de la siguiente forma, se√±ala el telefonema correcto.", a: "D", opts: [
    {l: "A", t: "¬´ Para itinerario de __ (entrada, salida, paso) __ por v√≠as _____ para __(tren o maniobra)___ se autoriza__ (se√±al, aguja, calce, etc‚Ä¶)___ en ______ (indicaci√≥n, posici√≥n, ‚Ä¶)_____. ¬ª"},
    {l: "B", t: "¬´ Para itinerarios de __ (salida, paso) __ por v√≠as _____ para __(trenes o maniobras)___ se necesita __ (se√±al, aguja, calce, etc‚Ä¶)___ en ______ (indicaci√≥n, posici√≥n, ‚Ä¶)_____. ¬ª"},
    {l: "C", t: "¬´ Para recorrido de ___(entrada, salida, paso)___ por v√≠a ___ para ___ (tren o maniobra)____ es necesario que __ (se√±ales, agujas, calces, etc‚Ä¶)___ est√©n en ____(indicaci√≥n, posici√≥n, ‚Ä¶)___-¬ª"},
    {l: "D", t: "¬´ Para itinerario de ___(entrada, salida, paso)___ por v√≠a ______ para ____ (tren o maniobra= ____ se precisa ___ (se√±al, aguja, calce, etc‚Ä¶)___ en _____ (indicaci√≥n, posici√≥n, ‚Ä¶)______-¬ª"}
  ]},
  "43": {q: "Trabajos en II.SS. De acuerdo con su mayor o menor repercusi√≥n en la circulaci√≥n, se clasifican en:", a: "B", opts: [
    {l: "A", t: "1¬™ Categor√≠a: Agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as. 2¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n."},
    {l: "B", t: "1¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de Instalaciones de seguridad y los grandes trabajos de conservaci√≥n. Estar√°n siempre regulados por Consigna del Al. 2¬™ Categor√≠a: Agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as."},
    {l: "C", t: "1¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n. 2¬™ Categor√≠a: Agrupa los trabajos de mantenimiento programado o reparaci√≥n de aver√≠as."},
    {l: "D", t: "1¬™ Categor√≠a: Agrupa los trabajos de establecimiento, modificaci√≥n o supresi√≥n de instalaciones de seguridad y los grandes trabajos de conservaci√≥n. 2¬™ Categor√≠a: Agrupa los trabajos de mantenimiento programado. 3¬™ Categor√≠a: Agrupa los trabajos por anormalidad."}
  ]},
  "44": {q: "Trabajos en II.SS. ¬øQui√©n debe autorizar previamente siempre Los trabajos?", a: "A", opts: [
    {l: "A", t: "Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."},
    {l: "B", t: "Los de 1¬™ y 2¬™ categor√≠a el RC de la estaci√≥n o del CTC"},
    {l: "C", t: "1¬™ Categor√≠a siempre por el T√©cnico del PM. 2¬™ Categor√≠a por el RC de la estaci√≥n o del CTC."},
    {l: "D", t: "2¬™ categor√≠a si afecta a las v√≠as de circulaci√≥n el RC de la estaci√≥n necesita autorizaci√≥n previa del Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."}
  ]},
  "45": {q: "NAR 9/18 ¬øCu√°les son los pilares fundamentales sobre los que se basa la protecci√≥n y, por tanto, la seguridad en los mismos?", a: "B", opts: [
    {l: "A", t: "La planificaci√≥n, el cumplimiento estricto de las normas reglamentarias publicadas por el Al, la utilizaci√≥n de los sistemas de protecci√≥n adecuados y el restablecimiento del servicio."},
    {l: "B", t: "La planificaci√≥n, la aplicaci√≥n de la normativa reglamentaria, la utilizaci√≥n de los sistemas de protecci√≥n adecuados y el restablecimiento del servicio."},
    {l: "C", t: "La planificaci√≥n, la aplicaci√≥n de las normas publicadas por el Al y la AESF, la utilizaci√≥n de los sistemas de protecci√≥n adecuados y la devoluci√≥n de los mismos."},
    {l: "D", t: "La planificaci√≥n, el cumplimiento de la normativa reglamentaria publicada por el Ministerio, AESF y Al, la utilizaci√≥n de los sistemas de protecci√≥n adecuados y el restablecimiento del servicio."}
  ]},
  "R1": {q: "¬øCu√°l es el objeto del RCF? Sustituye la pregunta n¬∫15", a: "B", opts: [
    {l: "A", t: "Proporcionar un marco regulador √∫nico de los procesos operativos en los que exista una interfaz directa entre el Administrador de Infraestructura (AI) y la Empresa Ferroviaria"},
    {l: "B", t: "Establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual."},
    {l: "C", t: "Establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma seguro, y suficiente."},
    {l: "D", t: "Proporcionar un marco √∫nico y regulador en las circulaciones en los procesos operativos en los que exista una interfaz directa entre el Administrador de Infraestructura (AI) y la Empresa Ferroviaria"}
  ]},
  "R2": {q: "¬øC√≥mo deben ser los mensajes de voz relacionados con la seguridad?", a: "D", opts: [
    {l: "A", t: "Escueta y breve y con abreviaturas contempladas en el RCF."},
    {l: "B", t: "Concisa, breve y expresa, sin abreviaturas."},
    {l: "C", t: "Concisa y clara, s√≥lo se puede utilizar abreviaturas contempladas en el RCF."},
    {l: "D", t: "Breve y clara, sin abreviaci√≥n."}
  ]}
};


  let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    const imagenHTML = q.img
  ? `<div style="margin:10px 0;text-align:center">
       <img src="${q.img}" alt="Imagen pregunta ${qid}"
            style="max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,.15)">
     </div>`
  : '';

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      ${imagenHTML}
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
 // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
</script>
</body>
</html>
