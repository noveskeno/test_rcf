<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VARIOS - 01</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>VARIOS - 01</h1>
    <div class="badge">25 preguntas</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>
  
<script>
// Test data with questions and answers
// ????
const testData = {
  "1": {q: "El responsable t√©cnico deber√° garantizar la calidad y la consistencia de los trabajos realizados cuando estos sean concertados por:", a: "C", opts: [
    {l: "A", t: "Piloto de Seguridad habilitado para concertar trabajos (PSH)"},
    {l: "B", t: "Piloto de Seguridad (PS)"},
    {l: "C", t: "Piloto de Seguridad habilitado para concertar trabajos y, en su caso, tambi√©n por un Encargado de Trabajos."},
    {l: "D", t: "Encargado de trabajos (ET)"}
  ]},
  "2": {q: "¬øQui√©n impartir√° las instrucciones a los Maquinistas para el apartado de los trenes en las estaciones?", a: "B", opts: [
    {l: "A", t: "El RC del PM"},
    {l: "B", t: "El ET"},
    {l: "C", t: "El ET o el RC de la estaci√≥n"},
    {l: "D", t: "El ET o el PSH"}
  ]},
  "3": {q: "Los PS y Responsables T√©cnicos transmitir√°n la finalizaci√≥n de los trabajos y las condiciones en las que se entrega la v√≠a y las instalaciones afectadas al ET o PSH. La comunicaci√≥n se har√° ‚Ä¶.", a: "B", opts: [
    {l: "A", t: "Por telefonema"},
    {l: "B", t: "Verbalmente"},
    {l: "C", t: "Por radiotelefon√≠a"},
    {l: "D", t: "De manera Escrita"}
  ]},
  "4": {q: "¬øCu√°l es el objetivo del RCF?", a: "B", opts: [
    {l: "A", t: "...unificando los criterios de operaci√≥n de los distintos AI en ancho convencional."},
    {l: "B", t: "...unificando los criterios de operaci√≥n de los distintos AI en los distintos anchos de la Red."},
    {l: "C", t: "...unificando los criterios de operaci√≥n de los distintos AI en ancho internacional."},
    {l: "D", t: "...unificando los criterios de operaci√≥n de los distintos AI y el responsable de circulaci√≥n..."}
  ]},
  "5": {q: "¬øCu√°l de las respuestas no es un requisito que deben cumplir los veh√≠culos a la hora de formar un tren?", a: "C", opts: [
  {l: "A", t: "Caracter√≠sticas de frenado"},
  {l: "B", t: "Velocidad m√°xima"},
  {l: "C", t: "Inscripci√≥n en el g√°libo"},
  {l: "D", t: "Estado de mantenimiento"}
  ]},
  "6": {q: "ADIF debe disponer de un Sistema de Gesti√≥n de Seguridad en la circulaci√≥n porque as√≠ se determina en: Libro Doc. Complementaria ET: Introducci√≥n al SGSC", a: "A", opts: [
  {l: "A", t: "Directiva 2016/798"},
  {l: "B", t: "Directiva 2004/49"},
  {l: "C", t: "Reglamento 2016/2338"},
  {l: "D", t: "Directiva 2016/796"}
]},
"7": {q: "¬øCu√°l es la corriente el√©ctrica suministrada a los veh√≠culos ferroviarios en las l√≠neas por ADIF? (Libro ET de infraestructura; P√°g. 113)", a: "B", opts: [
  {l: "A", t: "3.000 Vcc"},
  {l: "B", t: "1.500 y 3.000 Vcc y 25.000 Vca"},
  {l: "C", t: "25.000 Vca"},
  {l: "D", t: "1.500 y 25.000 Vca"}
]},
"8": {q: "En caso de encontrarse se√±ales distintas en un mismo lugar ¬øCu√°l ser√≠a la actuaci√≥n por parte del Maquinista? (RCF Art 2.1.1.3)", a: "D", opts: [
  {l: "A", t: "Se cumplimentar√°n todas ellas."},
  {l: "B", t: "Ponerse en comunicaci√≥n con el RC que las tenga a su cargo y solicitar instrucciones."},
  {l: "C", t: "Realizar detenci√≥n inmediata y poner en contacto con el RC de la Banda de Regulaci√≥n del PM."},
  {l: "D", t: "En caso de ordenes contradictorias o incompatibles entre s√≠: se cumplir√° la m√°s restrictiva."}
]},
"9": {q: "¬øCu√°l de las siguientes afirmaciones sobre el Sistema de la Seguridad en la Circulaci√≥n (SGSC) es incorrecta? (Libro Doc. Complementaria ET: Introducci√≥n al SGSC)", a: "B", opts: [
  {l: "A", t: "Es la organizaci√≥n y redacci√≥n de las medidas establecidas por un AI (ADIF) para garantizar la gesti√≥n en condiciones de seguridad de todas sus operaciones."},
  {l: "B", t: "Basado en recomendaciones t√©cnicas de AESF sobre el modelo del sistema ferroviario."},
  {l: "C", t: "Est√°n en constante actualizaci√≥n y crecimiento."},
  {l: "D", t: "Son requisito imprescindible para la obtenci√≥n de la Autorizaci√≥n de Seguridad."}
]},
"10": {q: "Control, Mando y Se√±alizaci√≥n (CMS): (RCF Art 1.1.13; Pt 10)", a: "B", opts: [
  {l: "A", t: "Subsistema ferroviario definido por las especificaciones t√©cnicas de la AESF, constituido por todo el equipamiento necesario para garantizar la seguridad, el mando y el control de la circulaci√≥n de los trenes autorizados a transitar por la red."},
  {l: "B", t: "Subsistema ferroviario definido por la Directiva Europea de Interoperabilidad Ferroviaria, constituido por todo el equipamiento necesario para garantizar la seguridad, el mando y el control de la circulaci√≥n de los trenes autorizados a transitar por la red."},
  {l: "C", t: "Subsistema ferroviario definido por la Directiva Europea de Interoperabilidad Ferroviaria, constituido por todo el equipamiento necesario para garantizar la seguridad, el mando y el control de la circulaci√≥n de los trenes permitidos a transitar en la RFIG."},
  {l: "D", t: "Subsistema ferroviario definido por el SGS de los AI y EF, constituido por todo el equipamiento necesario para garantizar la seguridad, el mando y el control de la circulaci√≥n de los trenes autorizados transitar por la red."}
]},
"11": {q: "Las se√±ales fijas (luminosas) que no est√©n en servicio y que no sea posible desmontar, se mantendr√°n apagadas, con sus focos tapados y con su cabeza girada y tapada de forma efectiva, para que no den indicaciones hacia la v√≠a. ¬øEs suficiente para considerarla fuera de servicio? (RCF Art 2.1.1.6)", a: "A", opts: [
  {l: "A", t: "Si"},
  {l: "B", t: "Si, y cuando no sea posible taparlos se pondr√°n dos listones rectangulares en forma de aspa pintados de blanco."},
  {l: "C", t: "No, ya que adem√°s es necesario el correspondiente Aviso."},
  {l: "D", t: "No, delante de la se√±al tiene que tener dos listones rectangulares pintados de blanco."}
]},
"12": {q: "¬øEn qu√© casos se instalar√°n cartelones ‚ÄòSilbar Obreros‚Äô (Art 2.1.3.13-A) en la v√≠a o v√≠as contiguas cuando se tiene establecida el ILT? (RCF Art 3.3.2.4; Pt 4)", a: "D", opts: [
  {l: "A", t: "Siempre que se trabaje en zona de peligro."},
  {l: "B", t: "Cuando se compatibilice la circulaci√≥n por la v√≠a o v√≠as contiguas y se trabaje en Zona de Riesgo."},
  {l: "C", t: "Una vez concedida la autorizaci√≥n por el RC, no hace falta instalarlos."},
  {l: "D", t: "Con circulaciones compatibles con los trabajos que pudieran resultar afectadas por √©stos, y en ambos sentidos de circulaci√≥n."}
]},
"13": {q: "¬øQu√© requiere el bloqueo en un tramo de v√≠a entre dos estaciones colaterales abiertas? (RCF Art 4.1.1.1; Pt 1)", a: "A", opts: [
  {l: "A", t: "Establecer una relaci√≥n de dependencias entre ambas, que permita expedir circulaciones de una a otra en condiciones seguras."},
  {l: "B", t: "Establecer una relaci√≥n de dependencias entre ambas, que permita expedir circulaciones de trenes en condiciones seguras."},
  {l: "C", t: "Establecer una relaci√≥n de dependencias total, que permita expedir circulaciones de una a otra en condiciones seguras."},
  {l: "D", t: "Establecer una relaci√≥n de acuerdos bilaterales, que permita expedir circulaciones de una a otra en condiciones seguras."}
]},
"14": {q: "¬øD√≥nde se debe proceder a notificar una LTV que no suponga un CSV y que no se encuentre se√±alizada?", a: "D", opts: [
  {l: "A", t: "Al no ser un CSV se puede notificar en la √∫ltima estaci√≥n"},
  {l: "B", t: "Donde se pueda asegurar la detecci√≥n del tren."},
  {l: "C", t: "En la estaci√≥n colateral anterior al trayecto afectado."},
  {l: "D", t: "En la estaci√≥n m√°s cercana posible al trayecto afectado donde el tren tenga parada."}
]},
"15": {q: "En que casos se podr√° establecer un Pasos a Nivel provisional. (RCF Art 5.1.6.2; Pt 1)", a: "B", opts: [
  {l: "A", t: "√önicamente con car√°cter provisional por causas justificadas y por el tiempo estrictamente necesario."},
  {l: "B", t: "√önicamente con car√°cter excepcional por causas justificadas y por el tiempo estrictamente necesario."},
  {l: "C", t: "√önicamente con car√°cter provisional por causas estrictamente justificadas y por el tiempo necesario."},
  {l: "D", t: "√önicamente con car√°cter excepcional por causas justificadas por el tiempo indispensable."}
]},
"16": {q: "¬øEn qu√© documento reglamentario, elaborado por el AI, se recogen las velocidades m√°ximas de velocidad? (Libro Doc. Comp. ET: Introducci√≥n al SGSC)", a: "C", opts: [
  {l: "A", t: "Consigna"},
  {l: "B", t: "Aviso"},
  {l: "C", t: "Horario de los trenes"},
  {l: "D", t: "Libro del Maquinista"}
]},
"17": {q: "Se√±ale la respuesta correcta, respecto a las obligaciones del Maquinista en un EVB: (RCF Art 3.3.3.4; Pt 7)", a: "D", opts: [
  {l: "A", t: "Respetar√° las ordenes de las se√±ales, incluyendo las se√±ales intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL y BCA que las considerar√° inexistentes."},
  {l: "B", t: "Se atendr√° a las instrucciones del ET sobre los rebases de las se√±ales diferentes de las intermedias."},
  {l: "C", t: "Para realizar pruebas con veh√≠culos dotados de equipo de se√±alizaci√≥n en cabina, conectar√° el mismo, salvo indicaci√≥n en contra en la correspondiente Consigna de pruebas."},
  {l: "D", t: "Se atendr√° a las instrucciones del Encargado de trabajos o de pruebas sobre las operaciones a realizar, paradas, movimientos de avance o retroceso y condiciones de circulaci√≥n en la EVB."}
]},
"18": {q: "¬øCu√°l de los siguientes veh√≠culos no se denomina Maquinaria de v√≠a seg√∫n definici√≥n? (RCF Art 1.1.1.3; Pt 29)", a: "A", opts: [
  {l: "A", t: "Dresina de electrificaci√≥n"},
  {l: "B", t: "Bateadora-estabilizadora"},
  {l: "C", t: "Desguarnecedora"},
  {l: "D", t: "Quitanieves rotativa"}
]},
"19": {q: "En un viaducto de una l√≠nea con BAD, se est√°n realizando trabajos en v√≠a I, que no afecta al g√°libo ni a la electrificaci√≥n de la v√≠a II. ¬øQu√© velocidad m√°xima se notificar√° al Maquinista se circula en v√≠a II? (RCF Art 3.3.1.1; Pt 3)", a: "D", opts: [
  {l: "A", t: "160 km/h o en caso necesario, se podr√° establecer una velocidad menor."},
  {l: "B", t: "Al tratarse de trabajos en un viaducto no se permite circulaci√≥n por la v√≠a contigua, aunque √©stas no afecten a su g√°libo o electrificaci√≥n."},
  {l: "C", t: "160 km/h siempre que la zona de trabajos cuente con un ET o PS."},
  {l: "D", t: "120 km/h. En caso necesario, se podr√° establecer una velocidad menor."}
]},
"20": {q: "¬øQu√© se entiende por Capacidad? (Libro Doc. Comp. ET.; Legislaci√≥n Ferroviaria; P√°g. 25)", a: "B", opts: [
  {l: "A", t: "N√∫mero de franjas disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la tipolog√≠a del tr√°fico."},
  {l: "B", t: "N√∫mero de franjas horarias disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la tipolog√≠a del tr√°fico."},
  {l: "C", t: "N√∫mero de franjas horarias disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la orograf√≠a del terreno."},
  {l: "D", t: "N√∫mero de franjas horarias disponibles en un tramo de infraestructura ferroviaria, en un periodo de tiempo determinado, en funci√≥n de la circulaci√≥n."}
]}
"21": {q: "Para que una estaci√≥n en ML pueda abrir una se√±al de salida hacia una estaci√≥n en MC es necesaria la autorizaci√≥n previa por parte del:", a: "C", opts: [
    {l:"A", t:"RC de la Banda de Regulaci√≥n del PM"},
    {l:"B", t:"RC de la estaci√≥n colateral abierta"},
    {l:"C", t:"RC del CTC"},
    {l:"D", t:"No hace falta autorizaci√≥n previa"}
  ]},
  "22": {q: "¬øQu√© significa el acr√≥nimo mt?", a: "C", opts: [
    {l:"A", t:"Marche el tren"},
    {l:"B", t:"Movimiento de tren"},
    {l:"C", t:"Masa total"},
    {l:"D", t:"Ninguna es correcta"}
  ]},
  "23": {q: "¬øQu√© informaci√≥n transmite el siguiente cartel√≥n?", a: "B", opts: [
    {l:"A", t:"El punto donde termina el circuito el√©ctrico de agujas (distancia m√≠nima al piquete de entrev√≠as: 4 m)"},
    {l:"B", t:"El punto donde empieza el circuito el√©ctrico de agujas (distancia m√≠nima al piquete de entrev√≠as: 4 m)"},
    {l:"C", t:"El punto donde empieza el circuito el√©ctrico de agujas (distancia m√≠nima al piquete de entrev√≠as: 6 m)"},
    {l:"D", t:"El punto donde termina el circuito el√©ctrico de agujas (distancia m√≠nima al piquete de entrev√≠as: 6 m)"}
  ]},
  "24": {q: "En relaci√≥n con el bloqueo, ¬øC√≥mo deber√° ser la relaci√≥n de dependencia entre las dos estaciones colaterales abiertas en v√≠as con un √∫nico sentido de circulaci√≥n, sin se√±ales intermedias?", a: "A", opts: [
    {l:"A", t:"La relaci√≥n de dependencia entre estaciones ser√° total."},
    {l:"B", t:"La relaci√≥n de dependencia entre estaciones estar√° dise√±ada por el tipo de Bloqueo que utilizan."},
    {l:"C", t:"La relaci√≥n de dependencia entre estaciones ser√° la indicada por el RC de la Banda de Regulaci√≥n del PM o del CTC."},
    {l:"D", t:"La relaci√≥n de dependencia entre estaciones ser√° la establecida por los RC de dichas estaciones."}
  ]},
  "25": {q: "Piquete de entrev√≠as‚Ä¶", a: "A", opts: [
    {l:"A", t:"Indica el punto hasta donde es compatible la circulaci√≥n simultanea por ambas v√≠as, sin que se produzcan interferencias entre ellas."},
    {l:"B", t:"Indica el punto donde es compatible la circulaci√≥n simultanea por v√≠as contiguas, sin que se produzcan interferencias entre ellas."},
    {l:"C", t:"Indica el punto hasta donde es compatible la circulaci√≥n simultanea por las v√≠as, sin que se produzcan interferencias entre ellas."},
    {l:"D", t:"Indica el punto hasta donde es compatible la circulaci√≥n simultanea por ambas v√≠as, sin que interfiera los g√°libos entre ellas."}
  ]},
  "26": {q: "El Material rodante auxiliar ‚Ä¶", a: "D", opts: [
    {l:"A", t:"Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo nominal y no degradado de las l√≠neas por las que circule."},
    {l:"B", t:"Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo de √©ste o degradado de las l√≠neas por las que circule."},
    {l:"C", t:"Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre en bloqueo nominal y degradado de las l√≠neas por las que circule."},
    {l:"D", t:"Salvo en la EVB donde realice sus trabajos, se desplazar√° siempre al amparo del bloqueo nominal o degradado de las l√≠neas por las que circule."}
  ]},
  "27": {q: "¬øCu√°l de estas se√±ales son ambas interiores?", a: "D", opts: [
    {l:"A", t:"Retroceso y protecci√≥n"},
    {l:"B", t:"Liberaci√≥n y maniobra"},
    {l:"C", t:"Intermedia y liberaci√≥n"},
    {l:"D", t:"Retroceso y maniobra"}
  ]},
  "28": {q: "En el escenario definido en el punto 8 del Art 3.3.2.2 (Sistema de ILT), el RC que reciba la solicitud por parte del ET o PSH, la primera actuaci√≥n previa a la concesi√≥n del ILT ser√°‚Ä¶.", a: "B", opts: [
    {l:"A", t:"Comprobar la liberaci√≥n efectiva del cant√≥n por los medios a su disposici√≥n."},
    {l:"B", t:"Cursar√° a su colateral el telefonema L3.3 incluyendo el texto ‚ÄòPas√≥ por el km a las ‚Äô."},
    {l:"C", t:"Conceder√° el sistema de trabajos al PSH o ET, ya que as√≠ lo recoge en el acta de trabajos."},
    {l:"D", t:"Esperar√° hasta que el √∫ltimo veh√≠culo del tren deje liberado el cant√≥n donde se solicitan los trabajos."}
  ]},
  "29": {q: "¬øQu√© indica la siguiente se√±al?", a: "A", opts: [
    {l:"A", t:"El fin de la trinchera, terrapl√©n o zona inundable para las circulaciones de sentido contrario."},
    {l:"B", t:"El anuncio de la trinchera, terrapl√©n o zona inundable para las circulaciones de sentido contrario."},
    {l:"C", t:"La proximidad de la trinchera, terrapl√©n o zona inundable para las circulaciones de sentido contrario."},
    {l:"D", t:"Ninguna es correcta."}
  ]},
  "30": {q: "¬øCu√°l de las siguientes respuestas no constituye una instalaci√≥n de seguridad?", a: "C", opts: [
    {l:"A", t:"Dispositivos embarcados, por ejemplo, Vigilancia (hombre muerto)."},
    {l:"B", t:"BAD, BCA y BSL."},
    {l:"C", t:"Todas son instalaciones de seguridad"},
    {l:"D", t:"Detectores de viento lateral"}
  ]},
  "31": {q: "De las siguientes opciones, se√±ale la siguiente respuesta sobre la inmovilizaci√≥n del material rodante:", a: "D", opts: [
    {l:"A", t:"En los cortes de material separados de la locomotora, √∫nicamente ser√° necesario hacer unos de los frenos de estacionamiento o de los calces cuando el tiempo de estacionamiento sea superior a 120 minutos."},
    {l:"B", t:"Cuando se realice cortes de material en las estaciones, la EF garantizar√° que el corte queda inmovilizado con calces antideriva en las ruedas externas, independientemente del tiempo que el corte de material se quede inmovilizado."},
    {l:"C", t:"Los cortes de material separados de la locomotora quedar√°n inmovilizados con los frenos de estacionamiento y/o mediante calces."},
    {l:"D", t:"En los veh√≠culos motores o de caracter√≠sticas singulares inmovilizados en una estaci√≥n, en su caso la colocaci√≥n de calces, se realizar√° en las ruedas en las que resulte m√°s eficaz."}
  ]},
  "32": {q: "¬øQu√© indica el siguiente cartel√≥n?", a: "B", opts: [
    {l:"A", t:"El comienzo de un grupo de PN protegidos por una se√±al."},
    {l:"B", t:"El √∫ltimo de un grupo de PN protegidos por una se√±al."},
    {l:"C", t:"El √∫ltimo circuito de PN protegidos por una se√±al."},
    {l:"D", t:"El comienzo de un grupo de PN protegidos por barreras o semibarreras."}
  ]},
  "33": {q: "¬øA qui√©n consulta el personal una duda de aplicaci√≥n de las normas de circulaci√≥n?", a: "C", opts: [
    {l:"A", t:"Al personal de formaci√≥n"},
    {l:"B", t:"Al PM"},
    {l:"C", t:"A su responsable o mando inmediato"},
    {l:"D", t:"A cualquier agente habilitado"}
  ]},
  "34": {q: "¬øCu√°les son las competencias vinculadas a la habilitaci√≥n de Encargado de trabajos?", a: "C", opts: [
    {l:"A", t:"Realiza las funciones correspondientes a actuaciones en entrega de v√≠a bloqueada seg√∫n se establece en la normativa ferroviaria vigente en materia de seguridad en la circulaci√≥n, controlar y, en su caso dirigir, los trabajos que se lleven a cabo en la infraestructura ferroviaria."},
    {l:"B", t:"Realiza las funciones correspondientes a actuaciones en zona de peligro seg√∫n se establece en la normativa ferroviaria en materia de seguridad en la circulaci√≥n, controlar y, en su caso dirigir, los trabajos que tenga en la infraestructura ferroviaria o en sus proximidades."},
    {l:"C", t:"Realiza las funciones correspondientes a actuaciones en v√≠a bloqueada seg√∫n se establece en la normativa ferroviaria vigente en materia de seguridad en la circulaci√≥n, controlar y, en su caso dirigir, los trabajos que se lleven a cabo en la infraestructura ferroviaria o en sus proximidades."},
    {l:"D", t:"Realiza las funciones correspondientes a actuaciones en v√≠a bloqueada seg√∫n se establece en la normativa ferroviaria actual en materia de circulaci√≥n, controlar y dirigir, los trabajos que se lleven a cabo en la infraestructura ferroviaria o en sus proximidades."}
  ]},
  "35": {q: "Estaciones telemandadas.", a: "D", opts: [
    {l:"A", t:"Son estaciones que no tiene un RC presente, cuyas instalaciones son gobernadas a distancia desde otra estaci√≥n que la telemanda, mediante el MC."},
    {l:"B", t:"Son estaciones carentes de RC presente en la misma, cuyas instalaciones son gobernadas a distancia desde el CTC, mediante el MC."},
    {l:"C", t:"Son estaciones sin un RC presente, cuyas instalaciones son gobernadas a distancia desde otra estaci√≥n, o incorporarse un personal para controlarlas con MC."},
    {l:"D", t:"Son estaciones carentes de RC presente en la misma, cuyas instalaciones son gobernadas a distancia desde otra estaci√≥n que la telemanda o desde el CTC, mediante el MC."}
  ]},
  "36": {q: "¬øCu√°l de estas opciones, corresponde con la protecci√≥n normal de puntos interceptados?", a: "A", opts: [
    {l:"A", t:"Consiste en la colocaci√≥n de se√±ales port√°tiles de parada a 1.500 m del punto de peligro y en sus proximidades."},
    {l:"B", t:"Presentando desde la v√≠a las se√±ales port√°tiles de parada al tren o trenes que se aproximen, a la distancia de 1.500 m."},
    {l:"C", t:"Consiste en la colocaci√≥n de se√±ales port√°tiles de parada en el eje de la v√≠a a 1.500 m del punto de peligro."},
    {l:"D", t:"Presentando con una persona las se√±ales port√°tiles de parada al tren o trenes que se aproximen, a la distancia de 1.500 m."}
  ]},
  "37": {q: "En funci√≥n del tipo de informaci√≥n facilitada al usuario, los sistemas de protecci√≥n de un PN pueden ser:", a: "D", opts: [
    {l:"A", t:"Pasivos (Clase P) y Activos (Clase 1, 2, 3 y 4)"},
    {l:"B", t:"Pasivos (Clase A) y Activos (Clase con barreras y semibarreras autom√°ticas)"},
    {l:"C", t:"Pasivos (Clase N) y Activos (Clase A, B, C y D)"},
    {l:"D", t:"Pasivos (Clase P) y Activos (Clase A1, A2, A3 y A4)"}
  ]},
  "38": {q: "Funcionalmente las eurobalizas pueden ser:", a: "B", opts: [
    {l:"A", t:"Fijas, que transmiten los telegramas que tienen almacenado en la memoria. Y con telegramas variables."},
    {l:"B", t:"Fijas, que transmiten un √∫nico telegrama que tiene almacenado en la memoria. Y con telegramas variables."},
    {l:"C", t:"Fijas, que transmiten solo el telegrama que tiene recibe del codificador. Y con telegramas conmutables."},
    {l:"D", t:"Fijas, que transmiten un √∫nico telegrama que tiene almacenado en su placa memoria. Y con telegramas diferentes."}
  ]},
  "39": {q: "Un tren circula por una estaci√≥n con marcha de maniobra, hasta la salida. ¬øHasta cuando deber√° circular el Maquinista con marcha de maniobra?", a: "A", opts: [
    {l:"A", t:"La marcha de maniobra se mantendr√° hasta rebasar las agujas de salida."},
    {l:"B", t:"La marcha de maniobra la mantendr√° hasta la se√±al de salida."},
    {l:"C", t:"La marcha de maniobra se mantendr√° hasta rebasar la se√±al de retroceso."},
    {l:"D", t:"La marcha de maniobra la mantendr√° hasta la siguiente aguja que observe."}
  ]},
  "40": {q: "¬øQu√© simboliza el siguiente gr√°fico y que informaci√≥n transmite?", a: "B", opts: [
    {l:"A", t:"Color azul, LZB y ERTMS para alta velocidad."},
    {l:"B", t:"Color blanco, Movimiento autorizado."},
    {l:"C", t:"Color blanco, Rebase autorizado."},
    {l:"D", t:"Color azul, si es a destellos, Parada Selectiva."}
  ]},
  "41": {q: "El transporte de estas mercanc√≠as por ferrocarril se rige por el RID en vigor, sin perjuicio de los reglamentos nacionales y de la UE vigente.", a: "C", opts: [
    {l:"A", t:"Mercanc√≠a de alto riesgo."},
    {l:"B", t:"Mercanc√≠as de gases y l√≠quidos corrosivos."},
    {l:"C", t:"Mercanc√≠as Peligrosas."},
    {l:"D", t:"Mercanc√≠a excepcional."}
  ]},
  "42": {q: "Trabajos en las instalaciones de seguridad. Cuando el RC requiera realizar un itinerario para una circulaci√≥n de un tren, en las instalaciones afectadas por los trabajados, solicitar√° la posici√≥n y comprobaci√≥n de todos los elementos de la instalaci√≥n al ET. ¬øEsta solicitud por parte del RC y la responsabilidad de las medidas adoptadas del ET, como se realizar√°?", a: "A", opts: [
    {l:"A", t:"Mediante el correspondiente telefonema por ambas partes."},
    {l:"B", t:"Mediante la comunicaci√≥n verbal por parte del RC y el telefonema por parte del ET."},
    {l:"C", t:"Mediante el correspondiente telefonema por parte del RC y la comprobaci√≥n visual del ET."},
    {l:"D", t:"Mediante el telefonema por ambas partes, aunque tambi√©n ser permite que sea verbal."}
  ]},
  "43": {q: "Bloqueos Autom√°ticos. (RCF Art 4.2.1.1)", a: "D", opts: [
  {l: "A", t: "La relaci√≥n entre estaciones queda garantizada por la propia naturaleza de las instalaciones de seguridad."},
  {l: "B", t: "La relaci√≥n de dependencias entre estaciones queda garantizada por las distintas instalaciones existentes."},
  {l: "C", t: "La relaci√≥n entre estaciones queda garantizada por los diferentes tipos de tecnolog√≠as de la instalaci√≥n."},
  {l: "D", t: "La relaci√≥n de dependencias entre estaciones queda garantizada por la propia naturaleza de la instalaci√≥n."}
]},
"44": {q: "Debido a que la catenaria no es infinita, al ser compensada se le corta f√≠sicamente. Un tipo de seccionamiento es de cant√≥n: (Libro ET de Infraestructura; P√°g. 123)", a: "D", opts: [
  {l: "A", t: "Cuya longitud m√°xima estar√° en 1.000 m. En el caso de cantones de compensaci√≥n aproximados a 650 m, las compensaciones se realizar√°n en un solo extremo, en principio compensando en el sentido de circulaci√≥n."},
  {l: "B", t: "Cuya longitud estar√° en torno a 1.200 m. En el caso de cantones de compensaci√≥n igual o menor a 640 m, las compensaciones se realizar√°n en un solo extremo, en principio compensando en el sentido de circulaci√≥n."},
  {l: "C", t: "Cuya longitud m√°xima ser√° de 1.100 m. En el caso de cantones de compensaci√≥n iguales a 620 m, las compensaciones se realizar√°n en un solo extremo, en principio compensando en el sentido de circulaci√≥n."},
  {l: "D", t: "Cuya longitud m√°xima estar√° en 1.200 m. En el caso de cantones de compensaci√≥n menores a 640 m, las compensaciones se realizar√°n en un solo extremo, en principio compensando en el sentido de circulaci√≥n."}
]},
"45": {q: "¬øD√≥nde se instalar√°n las pantallas de proximidad? (RCF Art 2.1.3.6; Pt 1 y 7)", a: "A", opts: [
  {l: "A", t: "Se instalar√°n delante de las se√±ales avanzadas, a las distancias indicadas (150m, 150m y 200m). Y en el caso de Paso a Nivel, delante de la se√±al de protecci√≥n de PN, cuando no sea visible a la distancia de 300 m."},
  {l: "B", t: "Se instalar√°n delante de las se√±ales avanzadas, a las distancias nombradas (150m, 150m y 200m). Y en el caso de Paso a Nivel, delante de la se√±al del PN, cuando no sea visible a la distancia de 200 m."},
  {l: "C", t: "Se instalar√°n delante de las se√±ales avanzadas, a las distancias indicadas (200m, 200m y 150m). Y en el caso de Paso a Nivel, delante de la se√±al de protecci√≥n de PN, cuando sea visible a la distancia de 300 m."},
  {l: "D", t: "Se instalar√°n delante de las se√±ales entrada, a las distancias indicadas (150m, 150m y 200m). Y en el caso de Paso a Nivel, delante de la se√±al de protecci√≥n de PN, cuando no sea visible a la distancia de 200 m."}
]},
"46": {q: "El sistema Tren-Tierra es constituido por: (Libro ET de Infraestructura; P√°g. 245)", a: "A", opts: [
  {l: "A", t: "Red M√≥vil y Red fija."},
  {l: "B", t: "Red port√°til y Red Central"},
  {l: "C", t: "Red M√≥vil y Red de Mando"},
  {l: "D", t: "Red Principal y Red Secundaria"}
]},
"47": {q: "En los trayectos con declividad superior a 10 mm/m, ¬øD√≥nde se sit√∫a el veh√≠culo motor? (RCF Art 3.3.6.1)", a: "B", opts: [
  {l: "A", t: "Se sit√∫a en el lado de posible deriva. Se except√∫a el caso de que el tren lleva freno estacionamiento en toda su composici√≥n."},
  {l: "B", t: "Se sit√∫a en el lado de posible deriva. Se except√∫a el caso de que el tren lleva freno autom√°tico en toda la composici√≥n."},
  {l: "C", t: "Se sit√∫a en el lado de posible deriva. Se except√∫a el caso de que el tren lleva freno autom√°tico en todos los veh√≠culos remolcados."},
  {l: "D", t: "Se sit√∫a en el lado de posible deriva. Se except√∫a el caso de que el tren lleva freno por aire comprimido en toda la longitud que lo compone."}
]},
"48": {q: "Cuando un PN autom√°tico o enclavado quede sin tensi√≥n, tenga rotas las semibarreras o apagadas las se√±ales destellantes a la carretera, el RC de la Banda de regulaci√≥n o del CTC dispondr√° ‚Ä¶. (RCF Art 5.2.6.2)", a: "C", opts: [
  {l: "A", t: "El env√≠o al PN de personal cualificado, con objeto de hacerse cargo de la aver√≠a."},
  {l: "B", t: "El env√≠o al PN de personal autorizado, con objeto de hacerse cargo del mismo."},
  {l: "C", t: "El env√≠o al PN de personal de habilitado, con objeto de hacerse cargo del mismo."},
  {l: "D", t: "El env√≠o al PN de personal como PS o ET, con el objeto de reparar el mismo."}
]},
"49": {q: "Declaraci√≥n de la Red: (Libro Doc. Comp.; Conceptos Ferroviarios; P√°g. 17)", a: "D", opts: [
  {l: "A", t: "Se publica anualmente de forma gen√©rica para Convencional (incluyendo RAM) y de manera excepcional una para Alta Velocidad (AV)."},
  {l: "B", t: "Se publica anualmente de forma gen√©rica para Convencional, otra para RAM y otra espec√≠fica para Alta Velocidad (AV)."},
  {l: "C", t: "Se publica anualmente de forma gen√©rica para Red Convencional y RFIG y de manera espec√≠fica una DR para Alta Velocidad (AV)."},
  {l: "D", t: "Se publica anualmente de forma gen√©rica para Convencional y RAM y de manera espec√≠fica una DR para Alta Velocidad (AV)."}
]},
"50": {q: "Consignas CTO. (Libro Doc. Comp.; Introducci√≥n al SGSC)", a: "C", opts: [
  {l: "A", t: "Consignas tipo C; de car√°cter Temporales Territoriales."},
  {l: "B", t: "Consignas tipo C; de car√°cter Tr√°fico Territoriales."},
  {l: "C", t: "Consignas tipo C; de car√°cter Transitorias Territoriales."},
  {l: "D", t: "Consignas tipo C; de car√°cter Territoriales Temporales."}
]},
};


  let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
 // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
</script>
</body>
</html>
