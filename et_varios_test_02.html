<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VARIOS - 01</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>VARIOS - 01</h1>
    <div class="badge">25 preguntas</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>
  <button id="scrollTopBtn" class="scroll-top">‚Üë</button>
  
<script>
// Test data with questions and answers
// Test variado 1
const testData = {
  "1": {
    "q": "El Cuadro de Cargas M√°ximas es el documento oficial que establece las cargas remolcables en las distintas l√≠neas de la RFIG. ¬øEn funci√≥n de qu√© condicionantes?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "De la declividad caracter√≠stica y del G√°libo."},
      {"l": "B", "t": "Del galibo y de la clase de locomotora"},
      {"l": "C", "t": "De la rampa caracter√≠stica y la clase de locomotora"},
      {"l": "D", "t": "Del sistema de bloqueo y del porcentaje de frenado disponible."}
    ]
  },
  "2": {
    "q": "Instalaci√≥n de car√°cter provisional situada en plena v√≠a, que permite la intervenci√≥n temporal en el bloqueo. ¬øA qu√© nos estamos refiriendo?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "PB"},
      {"l": "B", "t": "PAET"},
      {"l": "C", "t": "PLO"},
      {"l": "D", "t": "PRO"}
    ]
  },
  "3": {
    "q": "Cuando la explanaci√≥n est√° m√°s alta que el terreno natural, se denomina‚Ä¶",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Trinchera"},
      {"l": "B", "t": "Terrapl√©n"},
      {"l": "C", "t": "Drenaje"},
      {"l": "D", "t": "Mont√≠culo."}
    ]
  },
  "4": {
    "q": "El conjunto de obras de tierra y de f√°brica necesarias para construir la plataforma ¬øc√≥mo se denomina?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Superestructura"},
      {"l": "B", "t": "Infraestructura"},
      {"l": "C", "t": "Explanaci√≥n"},
      {"l": "D", "t": "V√≠a."}
    ]
  },
  "5": {
    "q": "¬øComo se denomina la obra de f√°brica que, sin tener forma circular, posee una luz inferior a un metro?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Ca√±o"},
      {"l": "B", "t": "Tajea"},
      {"l": "C", "t": "Alcantarilla"},
      {"l": "D", "t": "Pont√≥n"}
    ]
  },
  "6": {
    "q": "¬øA que nos estamos refiriendo cuando hablamos del elemento de la superestructura que gu√≠a y sustenta el material rodante?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Carril"},
      {"l": "B", "t": "Pat√≠n antideslizamiento."},
      {"l": "C", "t": "traviesa"},
      {"l": "D", "t": "Tirafondo"}
    ]
  },
  "7": {
    "q": "Combinaci√≥n de dos desv√≠os que permiten unir entre s√≠ dos itinerarios principales no convergentes ¬øa qu√© nos estamos refiriendo?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Traviesa"},
      {"l": "B", "t": "Desv√≠o"},
      {"l": "C", "t": "Bretelle"},
      {"l": "D", "t": "Escape"}
    ]
  },
  "8": {
    "q": "Seg√∫n establece el REAL DECRETO 810/2007 Reglamento sobre Seguridad en la Circulaci√≥n de la RFIG ¬øEn qui√©n recae garantizar la seguridad en la circulaci√≥n ferroviaria?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "La responsabilidad de la seguridad en la circulaci√≥n sobre la RFIG corresponde al SGS."},
      {"l": "B", "t": "La responsabilidad de la seguridad en la circulaci√≥n sobre la RFIG corresponde al Gestor de la Infraestructura."},
      {"l": "C", "t": "La responsabilidad de la seguridad en la circulaci√≥n sobre la RFIG corresponde a su Administrador."},
      {"l": "D", "t": "La responsabilidad de la seguridad en la circulaci√≥n sobre la RFIG corresponde al AI y a las EF."}
    ]
  },
  "9": {
    "q": "¬øD√≥nde se determinan las condiciones para la obtenci√≥n de los t√≠tulos habilitantes que permiten el ejercicio de las funciones del personal ferroviario relacionadas con la seguridad en la circulaci√≥n?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Orden FOM 2872/2010, de 5 de noviembre."},
      {"l": "B", "t": "Ley 38/2015 del Sector Ferroviario."},
      {"l": "C", "t": "Directiva 2004/49/CE Seguridad de los ferrocarriles comunitarios."},
      {"l": "D", "t": "REAL DECRETO 810/2007, Reglamento sobre seguridad en la circulaci√≥n de la RFIG."}
    ]
  },
  "10": {
    "q": "Con el objeto de poder administrar y explotar una infraestructura ferroviaria, el Administrador de la Infraestructura deber√° obtener‚Ä¶",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Una licencia de seguridad de la autoridad responsable de la seguridad del Estado (AESF)."},
      {"l": "B", "t": "Una autorizaci√≥n de seguridad de la autoridad responsable de la seguridad del Estado (AESF)."},
      {"l": "C", "t": "Una autorizaci√≥n de seguridad de la autoridad responsable de la seguridad el Estado (ERA)."},
      {"l": "D", "t": "Una licencia de seguridad de la autoridad responsable del a seguridad el Estado (ERA)."}
    ]
  },
  "11": {
    "q": "Si lo definimos como, 'suceso repentino, no deseado ni intencionado, o una cadena de sucesos de ese tipo, de consecuencias perjudiciales'. ¬øConforme con lo establecido en el REAL DECRETO 810/2007, de que estamos hablando?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Accidente leve."},
      {"l": "B", "t": "Accidente"},
      {"l": "C", "t": "Accidente grave"},
      {"l": "D", "t": "Incidencia."}
    ]
  },
  "12": {
    "q": "¬øQui√©n debe actuar de manera inmediata, cuando resulte necesario resolver con urgencia incidencias en relaci√≥n con la seguridad del tr√°fico ferroviario?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "La AESF"},
      {"l": "B", "t": "El AI"},
      {"l": "C", "t": "La EF"},
      {"l": "D", "t": "De manera conjunta el AI y la EF."}
    ]
  },
  "13": {
    "q": "¬øCada cu√°ntos a√±os y a petici√≥n de qui√©n se renovar√° el SGS?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Se renovar√° previa solicitud de la AESF a m√°s tardar cada 10 a√±os."},
      {"l": "B", "t": "Se renovar√° previa solicitud del AI a m√°s tardar cada diez a√±os."},
      {"l": "C", "t": "Se renovar√° previa solicitud del AI a m√°s tardar cada cinco a√±os"},
      {"l": "D", "t": "Se renovar√° previa solicitud de la AESF a m√°s tardar cada cinco a√±os."}
    ]
  },
  "14": {
    "q": "¬øPara qu√© Adif debe disponer un sistema de Gesti√≥n de Seguridad en la Circulaci√≥n?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Para garantizar una explotaci√≥n ferroviaria segura."},
      {"l": "B", "t": "√önicamente por mandato europeo"},
      {"l": "C", "t": "Para garantizar una explotaci√≥n ferroviaria eficiente"},
      {"l": "D", "t": "Para garantizar una explotaci√≥n ferroviaria regular."}
    ]
  },
  "15": {
    "q": "Dentro de la legislaci√≥n ferroviaria ¬øen qu√© documento se definen las normas comunes para la investigaci√≥n de los incidentes y accidentes ferroviarios?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Procedimiento General PG-107-004-001-SC"},
      {"l": "B", "t": "Directiva 2004/49/CE"},
      {"l": "C", "t": "Reglamento UE 1169/2010"},
      {"l": "D", "t": "Reglamento UE 402/2013"}
    ]
  },
  "16": {
    "q": "¬øD√≥nde se recogen los criterios para la elaboraci√≥n de los Sistemas de Gesti√≥n de Seguridad?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "En el Anexo I del RD 664/2015"},
      {"l": "B", "t": "En el Anexo II del RD 664/2015"},
      {"l": "C", "t": "En el Anexo III del RD 664/2015"},
      {"l": "D", "t": "En el Anexo IV del RD 664/2015"}
    ]
  },
  "17": {
    "q": "¬øCu√°l es la composici√≥n documental de los SGS de Adif?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Pol√≠tica de seguridad, manual e instrucciones t√©cnicas"},
      {"l": "B", "t": "Criterios escritos de seguridad-Manual de la DSC- Procedimientos y‚Ä¶."},
      {"l": "C", "t": "Pol√≠tica de seguridad, Manual y Procedimientos."},
      {"l": "D", "t": "Pol√≠tica de seguridad, Procedimientos y Programas."}
    ]
  },
  "18": {
    "q": "¬øD√≥nde se encuentra instalado el piquete de entrev√≠as y qu√© indica?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "al inicio de la convergencia de dos v√≠as e indica a los maquinistas que deben parar, aunque el tren sea de paso."},
      {"l": "B", "t": "Al inicio de la convergencia entre dos v√≠as, e indica el punto desde el que es compatible la circulaci√≥n simult√°nea por ambas v√≠as, circulando con marcha de maniobras."},
      {"l": "C", "t": "Al inicio de la convergencia de varias v√≠as e indica a los maquinistas que deben circular en r√©gimen de maniobras."},
      {"l": "D", "t": "Al inicio de la convergencia entre dos v√≠as, e indica el punto hasta donde es compatible la circulaci√≥n simult√°nea por ambas v√≠as, sin que se produzcan interferencias entre ellas."}
    ]
  },
  "19": {
    "q": "En circunstancias especiales, una se√±al podr√° dar indicaciones a m√°s de una v√≠a, con un m√°ximo de:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Tres v√≠as"},
      {"l": "B", "t": "Dos v√≠as"},
      {"l": "C", "t": "Cuatro v√≠as"},
      {"l": "D", "t": "Una se√±al solo puede dar indicaci√≥n a una v√≠a, no hay circunstancias especiales en este caso."}
    ]
  },
  "20": {
    "q": "¬øQui√©n define la estructura y contenido del 'Libro de Telefonemas del Maquinista'?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "La AESF en Especificaci√≥n T√©cnica de Circulaci√≥n."},
      {"l": "B", "t": "El AI en su SGS."},
      {"l": "C", "t": "La EF en su SGS."},
      {"l": "D", "t": "Las NNSS de s AI y EF."}
    ]
  },
  "21": {
    "q": "Considerando su duraci√≥n o periodicidad, las paradas de los trenes pueden ser Moment√°neas u Ocasionales. De las respuestas dadas ¬øa cu√°l corresponde la definici√≥n de Ocasionales?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Es una parada en la que no se admite la subida de viajeros. El tren puede efectuar su salida cuando finalicen las operaciones, a√∫n en el caso de que lo haga adelantado."},
      {"l": "B", "t": "Cuando se efect√∫a √∫nicamente los d√≠as o per√≠odos de tiempo indicados en la marcha."},
      {"l": "C", "t": "La que se efect√∫a por cruce o adelantamiento de trenes u otra causa de √≠ndole estrictamente t√©cnica"},
      {"l": "D", "t": "Cuando el tren se detiene el tiempo indispensable para realizar operaciones."}
    ]
  },
  "22": {
    "q": "En el RCF vienen definidas dos tipos de Detenci√≥n de un tren: 'Detenci√≥n inmediata' y 'Detenci√≥n accidental'. Dentro de los procesos establecidos, el propio RCF indica cuando debe ser aplicado cada uno. ¬øEn cu√°l de ellos deber√° aplicar el Maquinista el freno de emergencia?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En ninguno de los dos."},
      {"l": "B", "t": "El RCF lo establece para los dos tipos de Detenci√≥n."},
      {"l": "C", "t": "Detenci√≥n accidental."},
      {"l": "D", "t": "Detenci√≥n inmediata."}
    ]
  },
  "23": {
    "q": "¬øCu√°l de las indicadas corresponden a la definici√≥n de plena v√≠a?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Para la parte de la v√≠a comprendida entre las se√±ales de entrada de dos estaciones, fuera del dominio de ambas."},
      {"l": "B", "t": "Parte de la v√≠a comprendida entre las se√±ales de salida de dos estaciones colaterales."},
      {"l": "C", "t": "Parte de la v√≠a comprendida entre las se√±ales de dos estaciones colaterales, fuera del dominio de ambas."},
      {"l": "D", "t": "Parte de la v√≠a comprendida entre las se√±ales de entrada de dos estaciones colaterales, fuera del dominio de ambas."}
    ]
  },
  "24": {
    "q": "¬øCu√°ndo se considera que un cant√≥n esta libre?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Cuando este establecida la EVB, y adem√°s, el √∫ltimo tren lo ha liberado totalmente."},
      {"l": "B", "t": "Cuando est√° establecida la ILT y la EVB, y adem√°s, el √∫ltimo tren lo ha liberado totalmente."},
      {"l": "C", "t": "Cuando no est√° establecida la EVB, y adem√°s, el √∫ltimo tren lo ha liberado totalmente."},
      {"l": "D", "t": "Cuando no est√° establecida la ILT, o, el √∫ltimo tren lo ha liberado totalmente."}
    ]
  },
  "25": {
    "q": "Para que una estaci√≥n de servicio intermitente tenga la consideraci√≥n de AC. ¬øQu√© requisito es imprescindible?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Que las se√±ales permitan el paso en ambos sentidos en v√≠a doble, que las agujas est√©n encerrojadas, y que exista comunicaci√≥n entre las dos estaciones colaterales abiertas."},
      {"l": "B", "t": "Que las se√±ales permitan el paso en ambos sentidos en v√≠a √∫nica y en v√≠a doble, que las agujas est√©n enclavadas, y que exista comunicaci√≥n directa entre las dos estaciones colaterales abiertas."},
      {"l": "C", "t": "Que las se√±ales permitan el paso en ambos sentidos en v√≠a √∫nica y en el sentido normal en v√≠a doble, que las agujas est√©n encerrojadas, y que exista comunicaci√≥n directa entre las dos estaciones colaterales abiertas."},
      {"l": "D", "t": "Que las se√±ales permitan el paso, que las agujas est√©n encerrojadas, y que exista comunicaci√≥n directa entre las dos estaciones colaterales abiertas."}
    ]
  },
  "26": {
    "q": "Dentro de la clasificaci√≥n de las se√±ales seg√∫n su funci√≥n se encuentran las se√±ales fijas ¬øCu√°les de ellas regulan la circulaci√≥n de trenes y maniobras?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Fundamentales"},
      {"l": "B", "t": "Indicadoras"},
      {"l": "C", "t": "Limitaci√≥n de velocidad"},
      {"l": "D", "t": "Velocidad m√°xima"}
    ]
  },
  "27": {
    "q": "¬øC√≥mo suprimir√° el personal de infraestructura la se√±al de limitaci√≥n temporal de velocidad m√°xima?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Por telefonema, para mayor seguridad."},
      {"l": "B", "t": "La desmontar√° y si no es posible, la girar√° y cubrir√° y se comunicar√° con el Responsable de circulaci√≥n de la estaci√≥n inmediata anterior abierta, respecto al trayecto afectado."},
      {"l": "C", "t": "Dispondr√° de su retirada la mayor brevedad posible y remitir√° telefonema al Responsable de circulaci√≥n de una de las estaciones colaterales del trayecto afectado o al del CTC."},
      {"l": "D", "t": "No es funci√≥n del personal de infraestructura la supresi√≥n, pero si el establecimiento."}
    ]
  },
  "28": {
    "q": "¬øQu√© indican las pantallas de proximidad cu√°ndo tenga el fondo de color naranja?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Proximidad a se√±al de avanzada de estaci√≥n con transici√≥n de bloqueo."},
      {"l": "B", "t": "Proximidad a se√±al avanzada de estaci√≥n con transici√≥n a sistema de bloqueo autom√°tico."},
      {"l": "C", "t": "Proximidad a se√±al avanzada de estaci√≥n con transici√≥n a sistema de bloqueo no autom√°tico"},
      {"l": "D", "t": "Proximidad a se√±al avanzada de estaci√≥n con transici√≥n que incluye cambio significativo de velocidad."}
    ]
  },
  "29": {
    "q": "¬øQu√© indica la se√±al indicadora de entrada cuando los dos focos blancos est√°n en posici√≥n vertical?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Que el itinerario est√° establecido por v√≠a directa"},
      {"l": "B", "t": "La se√±al indicadora de entrada est√° formada por cuatro focos blancos"},
      {"l": "C", "t": "Que el primer cambio que se encuentre el maquinista est√° orientado a v√≠a desviada"},
      {"l": "D", "t": "Que el itinerario est√° establecido por v√≠a desviada."}
    ]
  },
  "30": {
    "q": "El responsable de circulaci√≥n que reciba un telefonema de establecimiento de limitaci√≥n temporal de velocidad m√°xima ¬øc√≥mo proceder√°?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Comunicar√° por telefonema los datos recibidos al de la estaci√≥n colateral y al de la Banda de Regulaci√≥n del OM."},
      {"l": "B", "t": "Comunicar√° por telefonema los datos recibidos al Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM, qui√©n lo comunicar√° a las estaciones que considere afectadas."},
      {"l": "C", "t": "Comunicar√° por telefonema los datos recibidos al Responsable de Circulaci√≥n de las dos estaciones colaterales anterior y posterior y al de la banda de Regulaci√≥n del PM."},
      {"l": "D", "t": "Comunicar√° verbalmente los datos recibidos al de la estaci√≥n colateral y al de la Banda de Regulaci√≥n del PM."}
    ]
  },
  "31": {
    "q": "Dentro de las se√±ales port√°tiles ¬øQu√© ordenar√° la se√±al de parada?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Efectuar parada ante la se√±al sin rebasarla"},
      {"l": "B", "t": "Detenci√≥n accidental"},
      {"l": "C", "t": "Detenci√≥n inmediata"},
      {"l": "D", "t": "Ordena realizar aplicaci√≥n del frenado de emergencia"}
    ]
  },
  "32": {
    "q": "En qu√© momento podr√° el PM notificar por radiotelefon√≠a al Maquinista de uno de los trenes afectados, una limitaci√≥n temporal de velocidad m√°xima que suponga un cambio significativo de velocidad",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Una vez reciba la primera informaci√≥n de dicha limitaci√≥n, siempre y cuando advierta de dicha circunstancia a los Responsables de Circulaci√≥n afectados."},
      {"l": "B", "t": "En ning√∫n momento por tratarse de un cambio significativo de velocidad m√°xima, por lo que deber√°n ser los responsable de Circulaci√≥n afectados en todo momento."},
      {"l": "C", "t": "Cuando se encuentre incluida en el Libro de itinerarios del maquinista."},
      {"l": "D", "t": "Una vez est√©n instaladas las se√±ales fijas de limitaci√≥n."}
    ]
  },
  "33": {
    "q": "Cuando en v√≠a doble se prevea el paso simult√°neo de dos trenes por su estaci√≥n y como Responsable de Circulaci√≥n corresponda presentar la se√±al de paso ¬øc√≥mo actuar√°?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "me situar√© en el and√©n junto a la v√≠a por la que espero al tren m√°s corto, parar√© al otro tren en la se√±al de entrada hasta que haya hecho su paso al primer tren, y posteriormente autorizar√° el paso del segundo tren, de esta manera la visibilidad de que los dos circulan completos ser√° total."},
      {"l": "B", "t": "me situar√© en el and√©n principal de la estaci√≥n y de manera alternativa presentar√© la se√±al de paso a uno y otro"},
      {"l": "C", "t": "me situar√© en el and√©n junto a la v√≠a por la que espero el tren m√°s corto para poder comprobar que ambos circulan completos, adem√°s presentar√© la se√±al de paso de manera alternativa a cada tren."},
      {"l": "D", "t": "me situar√© en el and√©n junto a la v√≠a por la que espero el tren m√°s pr√≥ximo comprobando que estoy visible para el Maquinista de dicho tren, adem√°s presentar√© la se√±al de paso de manera alternativa a cada tren."}
    ]
  },
  "34": {
    "q": "La se√±al fija indicadora (RAM), indicadora de precauci√≥n ¬øqu√© ordena al maquinista de un tren?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "no superar la velocidad de 60 km/h al pasar frente a ella y por las agujas situadas a continuaci√≥n."},
      {"l": "B", "t": "No superar la velocidad de 30km/h al pasar frente a ella y por las agujas situadas a continuaci√≥n."},
      {"l": "C", "t": "Circular con marcha a la vista por las agujas situadas a continuaci√≥n"},
      {"l": "D", "t": "Indica circular con precauci√≥n por dicha se√±al y por la siguiente situada a corta distancia."}
    ]
  },
  "35": {
    "q": "Para el desarrollo de trabajos en las denominadas 'zonas de peligro para os trabajos', 'zona de riesgo para los trabajos' y 'zona de seguridad para los trabajos', que sean compatibles con la circulaci√≥n de trenes, el AI establecer√° en su SGS las reglas internas y los procedimientos que garanticen la protecci√≥n de los mismos durante su ejecuci√≥n y la circulaci√≥n de trenes de forma segura, siendo condici√≥n indispensable que‚Ä¶",
    "a": "A",
    "opts": [
      {"l": "A", "t": "No tengan afecci√≥n a las instalaciones de seguridad."},
      {"l": "B", "t": "No tengan afecci√≥n a la zona de dominio p√∫blico."},
      {"l": "C", "t": "Durante los trabajos se aplique un sistema de trabajos de los establecidos en el RCF."},
      {"l": "D", "t": "En cualquier caso se regulen mediante Consigna."}
    ]
  },
  "36": {
    "q": "¬øQu√© documento debe ser tomado como referencia para la correcta identificaci√≥n de la v√≠a o v√≠as objeto de trabajos en una estaci√≥n?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Aviso"},
      {"l": "B", "t": "instrucci√≥n t√©cnica del AI"},
      {"l": "C", "t": "Consigna"},
      {"l": "D", "t": "Norma Adif de reglamentaci√≥n editada a tal efecto"}
    ]
  },
  "37": {
    "q": "Lea con atenci√≥n y marque la respuesta correcta; 'el Encargado de Trabajos o Piloto de seguridad habilitado para concertar trabajos, informar√° al Responsable de Circulaci√≥n del sistema de trabajos a emplear, dentro de los previstos en el RCF, en funci√≥n de su complejidad, importancia u otras circunstancias'.",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Si siempre, y teniendo en cuenta que para el caso de Piloto de seguridad solo podr√° realizarlo en aplicaci√≥n del sistema de Intervalo de Liberaci√≥n por Tiempo."},
      {"l": "B", "t": "No, todos los trabajos deber√°n estar incluidos de una u otra manera en la programaci√≥n de trabajos."},
      {"l": "C", "t": "Solo en los trabajos no programados que afecten a Instalaciones de seguridad."},
      {"l": "D", "t": "S√≥lo en los trabajos no programados."}
    ]
  },
  "38": {
    "q": "Sistema de trabajos en Intervalo de Liberaci√≥n por tiempo. Para la realizaci√≥n de estos trabajos es imprescindible que las estaciones‚Ä¶",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Del trayecto afectado se encuentren abiertas"},
      {"l": "B", "t": "Que delimitan el trayecto afectado se encuentren cerradas"},
      {"l": "C", "t": "Que delimitan el trayecto afectado se encuentren abiertas"},
      {"l": "D", "t": "Afectadas sean de CTC o de servicio intermitente en caso contrario."}
    ]
  },
  "39": {
    "q": "Sistema de interrupci√≥n de la circulaci√≥n con Entrega de V√≠a Bloqueada una misma v√≠a se podr√°n realizar diferentes trabajos ¬øa cargo de qui√©n o qui√©nes estar√° la concertaci√≥n y coordinaci√≥n de la EVB?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cada uno estar√° a cargo de su propio Encargado de Trabajos."},
      {"l": "B", "t": "De un mismo Encargado de Trabajos"},
      {"l": "C", "t": "De un mismo encargado de Trabajos o Piloto de seguridad habilitado para concertar trabajos"},
      {"l": "D", "t": "Cada uno estar√° a cargo de un Encargado de Trabajos o Piloto de Seguridad."}
    ]
  },
  "40": {
    "q": "Sistema de trabajos en intervalo de liberaci√≥n por tiempo. Autorizaci√≥n de los trabajos cuando las estaciones colaterales del trayecto est√©n a cargo de Responsables de Circulaci√≥n diferentes ¬øCu√°l ser√° el plazo l√≠mite de concesi√≥n para la ocupaci√≥n de la v√≠a?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Como m√°ximo la hora prevista de salida o paso de la siguiente circulaci√≥n por la estaci√≥n que recibi√≥ la solicitud del Encargado de trabajos."},
      {"l": "B", "t": "Como m√°ximo la hora efectiva de salida o paso de la siguiente circulaci√≥n por una de las dos estaciones colaterales del trayecto afectado."},
      {"l": "C", "t": "Como m√°ximo la hora prevista de salida o paso de la siguiente circulaci√≥n por una de las dos estaciones colaterales del trayecto afectado."},
      {"l": "D", "t": "Como m√°ximo la hora que solicite el Encargado de los trabajos de acuerdo a la complejidad de los trabajos a desarrollar."}
    ]
  },
  "41": {
    "q": "¬øDesde qu√© estaci√≥n podr√° ser expedido un tren de trabajos a la EVB?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Desde cualquiera de las estaciones afectadas por la EVB del trayecto."},
      {"l": "B", "t": "Desde cualquiera de las dos estaciones que limitan el trayecto."},
      {"l": "C", "t": "Los trens de trabajos deber√°n ser situados en la estaci√≥n que expide los trenes en sentido normal de la EVB."},
      {"l": "D", "t": "Los trenes de trabajos deber√°n ser expedidos desde cualquiera de las estaciones intermedias afectadas por la EVB as√≠ como de las extremas."}
    ]
  },
  "42": {
    "q": "Trabajos en Instalaciones de seguridad. Se clasifican en; Trabajos de 1¬™ Categor√≠a y Trabajos de 2¬™ categor√≠a. ¬øCu√°l de las dos Categor√≠as requiere ser autorizado previamente por el Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En los dos casos solo se requiere la autorizaci√≥n del Responsable de Circulaci√≥n que tanga su cargo la instalaci√≥n"},
      {"l": "B", "t": "Los de 1¬™ categor√≠a solamente."},
      {"l": "C", "t": "Los de 2¬™ categor√≠a solamente."},
      {"l": "D", "t": "Ambas categor√≠as."}
    ]
  },
  "43": {
    "q": "¬øExiste alguna condici√≥n para que en el caso de EVB, un Responsable de Circulaci√≥n deba autorizar el rebase de una se√±al avanzada que ordene parada?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Que √©sta no est√© dotada de la 'P'."},
      {"l": "B", "t": "Que √©sta est√© dotada de la letra 'P'."},
      {"l": "C", "t": "Las se√±ales avanzadas en EVB son consideradas inexistentes por os Maquinistas."},
      {"l": "D", "t": "Los Maquinistas las rebasar√°n con marcha de maniobras tal y como queda establecido en el Libro 3 del RCF."}
    ]
  },
  "44": {
    "q": "¬øQui√©n fijar√° el plazo l√≠mite para la ocupaci√≥n de la v√≠a, para la aplicaci√≥n de trabajos en estaciones?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "El Encargado de los trabajos"},
      {"l": "B", "t": "El Encargado de los trabajos o el Piloto habilitado para concertar trabajos."},
      {"l": "C", "t": "El Responsable de Circulaci√≥n"},
      {"l": "D", "t": "El Puesto de Mando."}
    ]
  },
  "45": {
    "q": "¬øCu√°l ser√° la longitud m√°xima de las composiciones formadas exclusivamente por locomotoras remolcadas?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "120m."},
      {"l": "B", "t": "160 m."},
      {"l": "C", "t": "200 m."},
      {"l": "D", "t": "La longitud estar relacionada con el porcentaje de frenado disponible."}
    ]
  },
  "46": {
    "q": "Los principios b√°sicos de los bloqueos son tres ¬øCu√°l de los expuestos no corresponde a uno de ellos?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cuando un tren est√© circulando por una v√≠a, no se expedir√° otro en sentido contrario por la misma v√≠a desde la estaci√≥n colateral."},
      {"l": "B", "t": "Todas las instalaciones de seguridad encuadradas en el trayecto deber√°n funcionar coordinadamente con el bloqueo."},
      {"l": "C", "t": "Dos trenes que circulen por la misma v√≠a y en el mismo sentido, ir√°n separados una distancia que garantice que no se va a producir un alcance."},
      {"l": "D", "t": "Las instalaciones garantizar√°n la seguridad necesaria para compatibilizar las maniobras que se realicen por la banda de una estaci√≥n, con la llegada de un tren por dicha banda."}
    ]
  },
  "47": {
    "q": "CTC ¬øuna estaci√≥n en ML puede abrir una se√±al hacia una estaci√≥n en MC?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Si, con la autorizaci√≥n previa del CTC."},
      {"l": "B", "t": "No, es una condici√≥n que no permiten los enclavamientos electr√≥nicos."},
      {"l": "C", "t": "S√≠, siempre puesto que es condici√≥n del sistema."},
      {"l": "D", "t": "No, puesto que es un sistema que elimina acuerdos bilaterales."}
    ]
  },
  "48": {
    "q": "¬øEn qu√© condiciones expedir√° un tren de una v√≠a sin se√±al de salida hacia un trayecto de BAB?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Con marcha normal despu√©s de presentarle la orden de marcha conforme al art√≠culo 1.5.1.8."},
      {"l": "B", "t": "No est√° permitida la expedici√≥n de trenes en estas condiciones conforme a lo dispuesto en el art√≠culo 4.2.1.3."},
      {"l": "C", "t": "Con marcha a la vista hasta la primera se√±al de bloqueo despu√©s de presentarle la se√±al de marche el tren conforme a lo dispuesto en el art√≠culo 2.1.6.2."},
      {"l": "D", "t": "No est√° permitido el trayecto con CTC, para el caso de trayectos sin CTC, con marcha normal despu√©s de presentarle la orden de marcha conforme al art√≠culo 1.5.1.8."}
    ]
  },
  "49": {
    "q": "Estaci√≥n de una l√≠nea BAU sin CTC, con anormalidad en se√±al de salida. ¬øC√≥mo se dar√° la Orden de marcha a un tren estacionado en estas condiciones?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Con la orden de la se√±al de salida y la se√±al de marche el tren."},
      {"l": "B", "t": "Con la se√±al de marche el tren."},
      {"l": "C", "t": "Se autorizar√° el rebase de la se√±al de salida y se le presentar√° la se√±al de marche el tren."},
      {"l": "D", "t": "Con la se√±al de tren dispuesto."}
    ]
  },
  "50": {
    "q": "Por condici√≥n de bloqueo ¬øqu√© indicaci√≥n no presentar√°n las se√±ales de salida que den acceso al trayecto en BLAB?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "V√≠a libre"},
      {"l": "B", "t": "Parada"},
      {"l": "C", "t": "Anuncio de parada"},
      {"l": "D", "t": "Anuncio de Precauci√≥n."}
    ]
  },
  "51": {
    "q": "BLA sin CTC, anormalidad en las se√±ales de salida. ¬øEn cu√°l de los sistemas expuestos a continuaci√≥n, se podr√°n expedir trenes con el cant√≥n de bloqueo libre de trenes, y autorizando el rebase de la se√±al de salida?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "BLAU"},
      {"l": "B", "t": "BLAD"},
      {"l": "C", "t": "BLAB"},
      {"l": "D", "t": "En cualquiera (BLAU, BLAD, o BLAB)."}
    ]
  },
  "52": {
    "q": "Las Maquinarias de v√≠a, en sus traslados entre estaciones hasta el punto de inicio de su actividad. ¬øEn qu√© condiciones circular√°?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Al amparo del BT."},
      {"l": "B", "t": "Al amparo del sistema de bloqueo establecido en la l√≠nea."},
      {"l": "C", "t": "Al amparo de la EVB"},
      {"l": "D", "t": "Con las mismas condiciones que los trenes de trabajos."}
    ]
  },
  "53": {
    "q": "Dentro de las prescripciones de circulaci√≥n del BT y mientras establecido el mismo por anormalidad ¬øindique cual de las prescripciones es la correcta?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Mantendr√° permanentemente las se√±ales de entrada cerradas."},
      {"l": "B", "t": "Mantendr√° las se√±ales de salida ordenando parada salvo en la expedici√≥n de trenes hacia el BT."},
      {"l": "C", "t": "Establecer√° y comprobar√° el itinerario que corresponda, no debiendo en ning√∫n caso el enclavamiento."},
      {"l": "D", "t": "Mantendr√° permanentemente las se√±ales de salida ordenando parada."}
    ]
  },
  "54": {
    "q": "Dentro de las obligaciones comunes del personal ferroviario, marcadas en la NAR 1/16 Obligaciones del personal de servicio, nos habla de las posibles delegaciones y en este apartado marca una serie de condiciones ¬øCu√°l de las expuestas es la correcta?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Una delegaci√≥n de cualquier actividad relacionada con la seguridad deber√° ser autorizada por el PM."},
      {"l": "B", "t": "Las operaciones asignadas relativas a la seguridad no pueden ser delegadas en personal que no est√© adecuadamente habilitado y autorizado."},
      {"l": "C", "t": "Las operaciones asignadas a la seguridad solo pueden ser delegadas en personal que est√© adecuadamente autorizado."},
      {"l": "D", "t": "Los Mandos deber√°n prohibir la delegaci√≥n de cualquier actividad relacionada con la seguridad, salvo aquellas verdaderamente urgentes."}
    ]
  },
  "55": {
    "q": "¬øA qui√©n corresponde determinar los movimientos de los trenes y veh√≠culos de trabajos en trayectos donde se aplique una EVB?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Al responsable de Circulaci√≥n de la estaci√≥n expedidora del tren."},
      {"l": "B", "t": "Al Maquinista del tren de trabajos"},
      {"l": "C", "t": "Al Encargado de trabajos o al Piloto de Seguridad habilitado para concertar trabajos"},
      {"l": "D", "t": "Al Encargado de Trabajos."}
    ]
  },
  "56": {
    "q": "En el siguiente esquema ¬øcu√°l es la zona de riesgo?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Segmentos A."},
      {"l": "B", "t": "Segmentos A y B."},
      {"l": "C", "t": "Segmentos B."},
      {"l": "D", "t": "Segmento C."}
    ]
  },
  "57": {
    "q": "¬øComo se denomina la 'actividad sujeta a una instrucci√≥n Espec√≠fica de trabajo, realizada exclusivamente con herramientas manuales, que invade o puedan invadir la zona de peligro o la zona de riesgo pero que no afecta al funcionamiento normal de la v√≠a, electrificaci√≥n e Instalaciones de seguridad y que no interrumpan la circulaci√≥n de los trenes?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "actividades de Regulaci√≥n Espec√≠fica."},
      {"l": "B", "t": "Actividades de Seguridad en la Circulaci√≥n."},
      {"l": "C", "t": "Trabajos Compatibles con la Circulaci√≥n de trenes"},
      {"l": "D", "t": "Trabajos de Regulaci√≥n Excepcional."}
    ]
  },
  "58": {
    "q": "Para la formaci√≥n de un tren, de acuerdo a los requisitos generales por limitaciones de la infraestructura y terminales, de las respuestas que hay a continuaci√≥n ¬øCu√°l no corresponde a dichos requisitos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Masa total del tren y masa unitaria por unidad de longitud."},
      {"l": "B", "t": "Resistencia de los acoplamientos y enganches,"},
      {"l": "C", "t": "Potencia de tracci√≥n."},
      {"l": "D", "t": "Caracter√≠sticas de la infraestructura de las terminales."}
    ]
  },
  "59": {
    "q": "Si hay una informaci√≥n relacionada con la infraestructura que hay que dar a conocer al Maquinista, no estando contenida en la documentaci√≥n de... ¬øen qu√© momento se le deber√° notificar?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "En el momento en que disponga el PM en la documentaci√≥n del tren."},
      {"l": "B", "t": "En el mismo momento en que se tenga conocimiento de la informaci√≥n a notificar."},
      {"l": "C", "t": "Antes de darle la orden de marcha, una vez el Maquinista xxxxx disponibilidad del tren para circular y se encuentre establecido su‚Ä¶.circulaci√≥n."},
      {"l": "D", "t": "Antes de darle la orden de marcha, en cualquier momento desde xxxx conocimiento de la formaci√≥n del mismo."}
    ]
  },
  "60": {
    "q": "¬øQu√© menci√≥n se indicar√° en la columna de trenes en marcha del Libro de bloqueo, cuando se aplique la EVB?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "EVB"},
      {"l": "B", "t": "TRABAJOS"},
      {"l": "C", "t": "INTERCEPTADA"},
      {"l": "D", "t": "OCUPADA"}
    ]
  }
};



  let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
 // window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
</script>
</body>
</html>
