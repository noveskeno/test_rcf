<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RCF - LIBRO 1</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh}
.header{padding:24px 16px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.95);backdrop-filter:blur(10px);z-index:100}
.header h1{margin-bottom:8px;font-size:1.5rem}
.back-btn{display:inline-block;margin-bottom:12px;padding:8px 16px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:8px;color:var(--text);text-decoration:none;font-size:14px;transition:all .2s}
.back-btn:hover{background:rgba(255,255,255,.15);transform:translateY(-1px)}
.badge{display:inline-block;padding:4px 12px;border-radius:999px;background:rgba(255,255,255,.08);font-size:12px;margin-top:8px}
.container{max-width:1000px;margin:0 auto;padding:24px 16px 120px}
.progress-bar{background:rgba(255,255,255,.1);height:4px;border-radius:999px;margin:16px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:20px;margin:16px 0;box-shadow:0 10px 30px rgba(0,0,0,.25);transition:transform .2s}
.card:hover{transform:translateY(-2px)}
.q-title{font-weight:600;margin-bottom:12px;line-height:1.5}
.q-number{color:var(--accent);font-size:13px;font-weight:700;margin-bottom:8px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:10px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:12px;border-radius:10px;display:flex;align-items:flex-start;gap:10px;cursor:pointer;transition:all .2s}
.option:hover{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:3px;cursor:pointer}
.answer-key{display:none;margin-top:12px;padding:10px;background:rgba(91,192,190,.1);border-radius:8px;font-size:14px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:8px;font-size:14px;font-weight:600;padding:8px;border-radius:6px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.98));padding:16px;backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:12px 18px;border-radius:10px;cursor:pointer;transition:all .2s}
button:hover{background:var(--accent);opacity:.9;transform:translateY(-1px)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:hover{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1.1rem}
.score-details{font-size:13px;color:var(--text);opacity:.8;margin-top:4px}
.footer{opacity:.8;font-size:12px;text-align:center;padding:20px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){.options{grid-template-columns:1fr 1fr}}
@media (max-width: 640px){.actions .bar{flex-direction:column}.score{text-align:center;width:100%}}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê Volver al men√∫</a>
    <h1>Test RCF - LIBRO 1</h1>
    <div class="badge">25 preguntas</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>

  <div class="footer">
    Test generado autom√°ticamente ¬∑ RCF Libro 1
  </div>

<script>
// Test data with questions and answers
const testData = {
  "1": {q: "¬øCu√°l es el objeto del Reglamento?", a: "D", opts: [
    {l: "A", t: "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes se realice de forma segura, eficiente y puntual."},
    {l: "B", t: "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de las maniobras se realice de forma segura, eficiente y puntual."},
    {l: "C", t: "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura y eficiente."},
    {l: "D", t: "El objeto de este Reglamento es establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual."}
  ]},
  "2": {q: "¬øCu√°l es el objetivo del RCF?", a: "B", opts: [
    {l: "A", t: "...unificando los criterios de operaci√≥n de los distintos AI en ancho convencional."},
    {l: "B", t: "...unificando los criterios de operaci√≥n de los distintos AI en los distintos anchos de la Red."},
    {l: "C", t: "...unificando los criterios de operaci√≥n de los distintos AI en ancho internacional."},
    {l: "D", t: "...unificando los criterios de operaci√≥n de los distintos AI y el responsable de circulaci√≥n..."}
  ]},
  "3": {q: "¬øDe qui√©n es la responsabilidad de la explotaci√≥n segura del sistema ferroviario?", a: "A", opts: [
    {l: "A", t: "Corresponde a los AI y a las EF."},
    {l: "B", t: "Corresponde al CTC."},
    {l: "C", t: "Corresponde al CTC y PM."},
    {l: "D", t: "Corresponde al responsable de circulaci√≥n."}
  ]},
  "4": {q: "¬øQui√©n tiene que establecer las reglas internas, conforme con la normativa vigente?", a: "A", opts: [
    {l: "A", t: "AI y EF."},
    {l: "B", t: "EF y AESF."},
    {l: "C", t: "AESF y AI."},
    {l: "D", t: "AESF."}
  ]},
  "5": {q: "El Reglamento es conforme con lo prescrito:", a: "C", opts: [
    {l: "A", t: "En las ETI, LSF."},
    {l: "B", t: "En las normas de desarrollo."},
    {l: "C", t: "En las ETI, LSF y sus normas de desarrollo."},
    {l: "D", t: "En la LSF y sus normas de desarrollo."}
  ]},
  "6": {q: "¬øCu√°l es el √°mbito territorial de aplicaci√≥n de este Reglamento?", a: "C", opts: [
    {l: "A", t: "Convencional."},
    {l: "B", t: "Alta velocidad."},
    {l: "C", t: "Red Ferroviaria de Inter√©s General."},
    {l: "D", t: "Convencional y Alta velocidad."}
  ]},
  "7": {q: "¬øCu√°l es el √°mbito subjetivo de aplicaci√≥n de este Reglamento?", a: "D", opts: [
    {l: "A", t: "Todo el personal de las EF y los AI."},
    {l: "B", t: "Parte del personal de las EF y los AI y de otras empresas..."},
    {l: "C", t: "Todo el personal de las EF, de los AI y de otras empresas, que interviene directamente..."},
    {l: "D", t: "Todo el personal de las EF, de los AI y de otras empresas, que interviene, directa o indirectamente, en los procesos de circulaci√≥n de trenes y maniobras."}
  ]},
  "8": {q: "¬øCu√°l es el √°mbito t√©cnico de aplicaci√≥n de este Reglamento?", a: "A", opts: [
    {l: "A", t: "Todas las actividades relevantes... desde la puesta a disposici√≥n por parte de la EF, hasta destino."},
    {l: "B", t: "...por parte de la AI..."},
    {l: "C", t: "Todas las actividades relevantes desde alguna interfaz..."},
    {l: "D", t: "...entre las EF y PM, desde la puesta a disposici√≥n del tren por parte de la AI..."}
  ]},
  "9": {q: "¬øQu√© es un Apeadero?", a: "D", opts: [
    {l: "A", t: "Instalaci√≥n de v√≠as para la carga y descarga... con agujas en plena v√≠a."},
    {l: "B", t: "Instalaci√≥n de v√≠as para la carga y descarga en plena v√≠a."},
    {l: "C", t: "Infraestructura ferroviaria para la bajada de viajeros."},
    {l: "D", t: "Infraestructura ferroviaria para la subida y bajada de viajeros."}
  ]},
  "10": {q: "¬øQu√© es un Automotor?", a: "B", opts: [
    {l: "A", t: "Tren formado por dos o m√°s veh√≠culos..."},
    {l: "B", t: "Tren formado por uno o m√°s veh√≠culos ferroviarios que no precisa de locomotora para su tracci√≥n ya que dispone de motor propio."},
    {l: "C", t: "Tren formado por dos o m√°s locomotoras."},
    {l: "D", t: "Compuesto exclusivamente por una o varias locomotoras no remolcadas."}
  ]},
  "11": {q: "¬øQu√© se entiende por banda de regulaci√≥n?", a: "C", opts: [
    {l: "A", t: "Es un trayecto que comprende varias estaciones."},
    {l: "B", t: "Es un tramo regulado por un responsable de circulaci√≥n."},
    {l: "C", t: "Tramo de l√≠nea, l√≠nea o conjunto de l√≠neas a cargo de un mismo Responsable de circulaci√≥n de un PM."},
    {l: "D", t: "Tramo de l√≠nea, l√≠nea o conjunto de trayectos a cargo de un mismo Responsable de circulaci√≥n de un PM."}
  ]},
  "12": {q: "¬øQu√© es una bifurcaci√≥n?", a: "A", opts: [
    {l: "A", t: "Punto de una l√≠nea, donde comienza otra o confluyen varias."},
    {l: "B", t: "Punto de varias l√≠neas, donde comienza otra o confluyen dos o m√°s."},
    {l: "C", t: "Punto de una l√≠nea, donde termina otra o confluyen varias."},
    {l: "D", t: "Varias l√≠neas a partir de un punto."}
  ]},
  "13": {q: "¬øQu√© se entiende por bloqueo?", a: "A", opts: [
    {l: "A", t: "Sistema o proceso cuyo objetivo es garantizar separaci√≥n suficiente... y evitar cruces en sentido contrario en la misma v√≠a."},
    {l: "B", t: "Proceso... separaci√≥n... y que no circule un tren por la v√≠a contigua en sentido contrario."},
    {l: "C", t: "Sistema o proceso cuyo objetivo es evitar el alcance y choque de trenes."},
    {l: "D", t: "Sistema o proceso cuyo objetivo es evitar que dos trenes en v√≠a doble se expidan simult√°neamente."}
  ]},
  "14": {q: "¬øQu√© se entiende por cambiador de ancho?", a: "A", opts: [
    {l: "A", t: "Instalaci√≥n ferroviaria que facilita el cambio del ancho de la rodadura, a los trenes cuya tecnolog√≠a lo permite."},
    {l: "B", t: "...a los trenes y automotores cuya tecnolog√≠a lo permite."},
    {l: "C", t: "Instalaci√≥n... que facilita el cambio del ancho de los trenes y automotores..."},
    {l: "D", t: "Instalaci√≥n... que facilita el cambio del ancho de los trenes, con la rodadura..."}
  ]},
  "15": {q: "¬øQu√© se entiende por cant√≥n de bloqueo?", a: "B", opts: [
    {l: "A", t: "Parte de la v√≠a en la que normalmente solo puede haber un tren."},
    {l: "B", t: "Tramo de v√≠a en el que, en condiciones normales de circulaci√≥n, no puede haber m√°s de un tren de forma simult√°nea."},
    {l: "C", t: "Tramo de v√≠a en el que, en condiciones anormales..."},
    {l: "D", t: "Tramo de v√≠a en el que... puede haber m√°s de un tren... en el mismo sentido."}
  ]},
  "16": {q: "¬øQu√© se entiende por coches?", a: "C", opts: [
    {l: "A", t: "Son aquellos que s√≥lo pueden variar su composici√≥n mediante operaciones en taller."},
    {l: "B", t: "Veh√≠culo dise√±ado para viajeros transportando mercanc√≠as."},
    {l: "C", t: "Veh√≠culos ferroviarios sin tracci√≥n propia habilitados para el transporte de viajeros, as√≠ como los veh√≠culos complementarios para su servicio."},
    {l: "D", t: "Veh√≠culos sin tracci√≥n propia para viajeros y mercanc√≠as."}
  ]},
  "17": {q: "¬øQu√© es una composici√≥n indeformable?", a: "C", opts: [
    {l: "A", t: "La que no se puede deformar de ninguna manera t√©cnica."},
    {l: "B", t: "La que no se puede deformar pero s√≠ en talleres."},
    {l: "C", t: "Aquella que s√≥lo puede variar su composici√≥n mediante operaciones realizadas en un taller o centro de mantenimiento."},
    {l: "D", t: "Aquella que s√≥lo puede variar su composici√≥n mediante operaciones realizadas en un taller."}
  ]},
  "18": {q: "¬øQu√© se entiende por derivaci√≥n particular?", a: "B", opts: [
    {l: "A", t: "Infraestructura ferroviaria conectada a la RFIG."},
    {l: "B", t: "Infraestructura ferroviaria ajena a la RFIG pero conectada con √©sta."},
    {l: "C", t: "Infraestructura para carga y descarga de vagones."},
    {l: "D", t: "Sistema que permite establecer itinerarios seguros ajenos al RFIG."}
  ]},
  "19": {q: "¬øQu√© es la documentaci√≥n de seguridad?", a: "A", opts: [
    {l: "A", t: "Conjunto de documentos reglamentarios definidos en el cap√≠tulo 2 del libro 1."},
    {l: "B", t: "Conjunto de documentos reglamentarios definidos en el libro 2 del cap√≠tulo 1."},
    {l: "C", t: "Documentos reglamentarios para la circulaci√≥n en la RFIG."},
    {l: "D", t: "Documentos reglamentarios de la EF y AI."}
  ]},
  "20": {q: "¬øQu√© se entiende por EF?", a: "B", opts: [
    {l: "A", t: "Es la entidad que expide trenes de mercanc√≠as y viajeros."},
    {l: "B", t: "La titular de una licencia... cuya actividad principal consista en prestar servicios de transporte de mercanc√≠as o viajeros por ferrocarril, debiendo aportar en todo caso la tracci√≥n."},
    {l: "C", t: "La titular de una licencia... para mercanc√≠as... debiendo aportar en todo caso la tracci√≥n."},
    {l: "D", t: "La titular de una licencia... para mercanc√≠as o viajeros por ferrocarril."}
  ]},
  "21": {q: "¬øQu√© se entiende por enclavamiento?", a: "A", opts: [
    {l: "A", t: "Sistema que permite establecer itinerarios seguros... en el √°mbito de estaciones... relacionando aparatos de v√≠a, semibarreras de PN y √≥rdenes de se√±ales."},
    {l: "B", t: "... pero en plena v√≠a."},
    {l: "C", t: "... pero solo en estaciones."},
    {l: "D", t: "... tanto en plena v√≠a como en estaciones."}
  ]},
  "22": {q: "¬øQu√© es la ETI?", a: "D", opts: [
    {l: "A", t: "Especialista en trabajos de inspecci√≥n."},
    {l: "B", t: "Especificaciones t√©cnicas internacionales."},
    {l: "C", t: "Especificaciones t√©cnicas interoperables de √°mbito nacional."},
    {l: "D", t: "Especificaci√≥n t√©cnica de interoperabilidad."}
  ]},
  "23": {q: "¬øQu√© se entiende por estaci√≥n?", a: "D", opts: [
    {l: "A", t: "Dependencia utilizada para la subida y bajada de viajeros."},
    {l: "B", t: "Dependencia utilizada para funciones de circulaci√≥n de trenes y maniobras."},
    {l: "C", t: "Instalaci√≥n de agujas en plena v√≠a."},
    {l: "D", t: "Infraestructura ferroviaria consistente en una instalaci√≥n de v√≠as y sus aparatos asociados, protegida por se√±ales, y que tiene por objeto coordinar los procesos de la circulaci√≥n."}
  ]},
  "24": {q: "¬øQu√© se considera estaci√≥n a efectos de este reglamento?", a: "C", opts: [
    {l: "A", t: "Los PB, PBA, PAET y las bifurcaciones cuando afluyan como m√≠nimo 3 l√≠neas."},
    {l: "B", t: "Los PB, PBA, PCA, PAET."},
    {l: "C", t: "Los PB, PCA, PBA, PAET y bifurcaciones."},
    {l: "D", t: "Las bifurcaciones cuando confluyan 3 l√≠neas y los PCA, PB con agujas, junto con los PAET y PBA."}
  ]},
  "25": {q: "¬øQu√© se entiende por estaci√≥n telemandada?", a: "C", opts: [
    {l: "A", t: "Es aquella cuyo control y accionamiento de sus instalaciones se realiza a distancia, pero desde su inmediata."},
    {l: "B", t: "Es aquella cuyo control y accionamiento de sus instalaciones se realiza a distancia, pero desde su colateral."},
    {l: "C", t: "Es aquella cuyo control y accionamiento de sus instalaciones se realiza a distancia."},
    {l: "D", t: "Es aquella cuyo control y accionamiento de sus instalaciones se realiza a distancia, cuando sea √°mbito CTC."}
  ]}
};

let respuestasVisibles = false;
let totalPreguntas = Object.keys(testData).length;

// Generate all questions on page load
function generarTest() {
  const container = document.getElementById('questionsContainer');
  
  Object.keys(testData).forEach(qid => {
    const q = testData[qid];
    const card = document.createElement('div');
    card.className = 'card question';
    card.dataset.qid = qid;
    
    let opcionesHTML = '';
    q.opts.forEach(opt => {
      opcionesHTML += `
        <label class="option">
          <input type="radio" name="q${qid}" value="${opt.l}" onchange="updateProgress()" />
          <div><b>${opt.l})</b> ${opt.t}</div>
        </label>
      `;
    });

    card.innerHTML = `
      <span class="q-number">Pregunta ${qid} de ${totalPreguntas}</span>
      <div class="q-title">${q.q}</div>
      <div class="options">${opcionesHTML}</div>
      <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
      <div class="feedback"></div>
    `;
    
    container.appendChild(card);
  });
}

// Update progress bar
function updateProgress() {
  const respondidas = document.querySelectorAll('input[type=radio]:checked').length;
  const porcentaje = (respondidas / totalPreguntas) * 100;
  document.getElementById('progressBar').style.width = porcentaje + '%';
}

// Grade the test
function calificar() {
  let correctas = 0;
  let incorrectas = 0;
  let sinResponder = 0;
  
  document.querySelectorAll('.question').forEach(card => {
    const qid = card.dataset.qid;
    const correcta = testData[qid].a;
    const seleccionada = card.querySelector('input[type=radio]:checked');
    
    card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    
    if (seleccionada) {
      const letra = seleccionada.value;
      if (letra === correcta) {
        correctas++;
        seleccionada.closest('.option').classList.add('correct');
        card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
        card.querySelector('.feedback').style.color = 'var(--ok)';
      } else {
        incorrectas++;
        seleccionada.closest('.option').classList.add('incorrect');
        card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
        card.querySelector('.feedback').style.color = 'var(--bad)';
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      }
    } else {
      sinResponder++;
      card.querySelector('.feedback').textContent = '‚ö† Sin responder';
      card.querySelector('.feedback').style.color = 'var(--warning)';
    }
  });
  
  const porcentaje = Math.round((correctas / totalPreguntas) * 100);
  const aprobado = porcentaje >= 50;
  
  document.getElementById('score').textContent = `${correctas} / ${totalPreguntas} (${porcentaje}%)`;
  document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
  
  document.getElementById('scoreDetails').innerHTML = `
    ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
  `;
  
  // Scroll to top to see results
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Reset the test
function reiniciar() {
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
  document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
  document.getElementById('score').textContent = '‚Äî';
  document.getElementById('score').removeAttribute('style');
  document.getElementById('scoreDetails').textContent = '';
  document.getElementById('progressBar').style.width = '0%';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// Toggle answer visibility
function toggleRespuestas(btn) {
  respuestasVisibles = !respuestasVisibles;
  document.body.classList.toggle('show-answers', respuestasVisibles);
  btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
  
  if (respuestasVisibles) {
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = testData[qid].a;
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
      const corr = card.querySelector(`input[value="${correcta}"]`);
      if (corr) corr.closest('.option').classList.add('correct');
    });
  } else {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
  }
}

// Initialize test on page load
window.addEventListener('load', () => {
  generarTest();
});
</script>
</body>
</html>
