<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RCF LIBRO 3 - CEEF</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.tabs{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0;justify-content:center}
.tab{border:1px solid rgba(255,255,255,.15);border-radius:50%;width:32px;height:32px;padding:0;background:rgba(255,255,255,.08);cursor:pointer;color:var(--text);transition:all .2s;font-size:13px;font-weight:700;display:flex;align-items:center;justify-content:center}
.tab.active{background:var(--accent);border-color:var(--accent);color:#001018}
.tab:active{background:rgba(91,192,190,.2);border-color:rgba(91,192,190,.3)}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
  .tab{width:40px;height:40px;font-size:15px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>RCF LIBRO 3 - CEEF</h1>
    <div class="badge">167 preguntas</div>
    <div class="tabs">
      <button class="tab" id="tab_1" data-part="1">1</button>
      <button class="tab" id="tab_2" data-part="2">2</button>
      <button class="tab" id="tab_3" data-part="3">3</button>
      <button class="tab" id="tab_4" data-part="4">4</button>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>
<button id="scrollTopBtn" class="scroll-top">‚Üë</button>
<script>
(function () {
  // Test data organized by parts (1-4)
  const testData = {
    "1": {
      "1": {
      "q": "La circulaci√≥n segura de los trenes requiere la actuaci√≥n coordinada entre:",
      "a": "A",
      "opts": [
        {"l": "A", "t": "El personal de las EF y de los AI afectados."},
        {"l": "B", "t": "El personal del AI y del PM."},
        {"l": "C", "t": "El personal de la EF y de los PM."},
        {"l": "D", "t": "El personal de las EF y de los AI afectados, solo con CTC."}
      ]},
    "2": {
      "q": "La actuaci√≥n coordinada de la circulaci√≥n est√° basada en:",
      "a": "A",
      "opts": [
        {"l": "A", "t": "La identificaci√≥n precisa de los trenes en circulaci√≥n y el conocimiento de sus horarios, paradas y velocidades; en el conocimiento y comunicaci√≥n por parte de los AI a las EF, de las anormalidades que puedan presentar las instalaciones de seguridad; y en la informaci√≥n de las circunstancias particulares de cada tren que las EF han de facilitar a los AI."},
        {"l": "B", "t": "La identificaci√≥n precisa de los trenes en circulaci√≥n y el conocimiento de sus horarios, paradas y velocidades; en el conocimiento y comunicaci√≥n por parte de las EF a los AI, de las anormalidades que puedan presentar las instalaciones de seguridad."},
        {"l": "C", "t": "El conocimiento y comunicaci√≥n por parte de los AI a las EF, de las anormalidades que puedan presentar las instalaciones de seguridad; y en la informaci√≥n de las circunstancias particulares de cada tren que los AI han de facilitar a las EF."},
        {"l": "D", "t": "La identificaci√≥n precisa de los trenes en circulaci√≥n y el conocimiento de sus horarios, paradas y velocidades; y en la informaci√≥n de las circunstancias particulares de cada tren que los AI han de facilitar a las EF."}
      ]},
    "3": {
      "q": "¬øQui√©n establecer√° en sus SGS, de acuerdo con este Reglamento, los procedimientos para garantizar que se han realizado las comprobaciones necesarias al tren antes de su puesta en circulaci√≥n, incluyendo las relativas a la finalizaci√≥n de las operaciones comerciales de los trenes de viajeros?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "EF y AI."},
        {"l": "B", "t": "Solo las EF."},
        {"l": "C", "t": "AI."},
        {"l": "D", "t": "AI, EF y AESF."}
      ]},
    "4": {
      "q": "¬øQu√© requiere la adecuada gesti√≥n del tr√°fico ferroviario?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Que los Responsables de Circulaci√≥n se mantengan permanentemente informados entre s√≠, siguiendo las instrucciones establecidas por el PM."},
        {"l": "B", "t": "No hace falta comunicaci√≥n entre los Responsables de Circulaci√≥n."},
        {"l": "C", "t": "Que los Responsables de Circulaci√≥n no comuniquen al PM cualquier anormalidad en la l√≠nea."},
        {"l": "D", "t": "Que los Responsables de Circulaci√≥n se mantengan permanentemente informados entre s√≠, siguiendo las instrucciones establecidas por las EF."}
      ]},
    "5": {
      "q": "¬øMediante qu√© documento la EF comunicar√° al Maquinista que dirija la marcha, las √≥rdenes a cumplimentar y las informaciones temporales que deba conocer y que afecten a la circulaci√≥n del tren?",
      "a": "D",
      "opts": [
        {"l": "A", "t": "El Libro Horario del AI."},
        {"l": "B", "t": "El Libro de Avisos del Maquinista."},
        {"l": "C", "t": "El Libro de Itinerarios del AI."},
        {"l": "D", "t": "El Libro de Itinerarios del Maquinista."}
      ]},
    "6": {
      "q": "Mediante el 'Libro de Itinerarios del Maquinista', la EF comunicar√° al Maquinista que dirija la marcha:",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Las √≥rdenes a cumplimentar y las informaciones temporales que deba conocer y que afecten a la circulaci√≥n del tren."},
        {"l": "B", "t": "Las √≥rdenes a cumplimentar y las informaciones permanentes que deba conocer y que afecten a la circulaci√≥n del tren."},
        {"l": "C", "t": "Los telefonemas a registrar en el Libro General de Telefonemas."},
        {"l": "D", "t": "Las NAR publicadas por AI."}
      ]},
    "7": {
      "q": "Las √≥rdenes o informaciones que no se hayan podido incluir en el Libro de itinerario del Maquinista, ¬øC√≥mo le ser√°n comunicadas?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Por la EF mediante BOI."},
        {"l": "B", "t": "Por el AI mediante radiotelefon√≠a."},
        {"l": "C", "t": "Por el PM o CTC mediante BOI."},
        {"l": "D", "t": "Por el AI mediante BOI o telefonema."}
      ]},
    "8": {
      "q": "¬øCu√°ntas √≥rdenes e informaciones se pueden incluir en un mismo BOI?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Una."},
        {"l": "B", "t": "Dos o tres."},
        {"l": "C", "t": "Varias."},
        {"l": "D", "t": "Las mismas que en un Telefonema, o sea dos."}
      ]},
    "9": {
      "q": "¬øCu√°ntas √≥rdenes e informaciones se pueden incluir en un mismo telefonema?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Una."},
        {"l": "B", "t": "Dos o tres."},
        {"l": "C", "t": "Varias."},
        {"l": "D", "t": "Las mismas que en un BOI, o sea dos."}
      ]},
    "10": {
      "q": "¬øEs verdad que se podr√° utilizar un √∫nico BOI para notificar √≥rdenes o informaciones al Maquinista de un tren que circula repetidamente entre dos puntos determinados?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "S√≠."},
        {"l": "B", "t": "No."},
        {"l": "C", "t": "S√≠, pero solo en √°mbito sin CTC."},
        {"l": "D", "t": "S√≠, pero solo en √°mbito con CTC."}
      ]},
    "11": {
      "q": "¬øC√≥mo ser√°n transmitidas en los relevos, entre los Maquinistas salientes/entrantes, las √≥rdenes o informaciones, comunicadas por BOI y pendientes de cumplimentar?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Haciendo referencia a las mismas con la notificaci√≥n; 'Pendiente de ejecutar dicha orden o informaci√≥n'."},
        {"l": "B", "t": "No hay necesidad de comunicar nada."},
        {"l": "C", "t": "Haciendo referencia a las mismas con la menci√≥n; 'Pendiente de cumplimentar'."},
        {"l": "D", "t": "Ninguna es correcta."}
      ]},
    "12": {
      "q": "¬øC√≥mo ser√°n transmitidas en los relevos, entre los Maquinistas salientes/entrantes, las √≥rdenes o informaciones, comunicadas por Telefonema y pendientes de cumplimentar?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Haciendo referencia a las mismas con la notificaci√≥n; 'Pendiente de ejecutar dicha orden o informaci√≥n'."},
        {"l": "B", "t": "Ser√°n registradas por ambos Maquinistas."},
        {"l": "C", "t": "Haciendo referencia a las mismas con la menci√≥n; 'Pendiente de cumplimentar'."},
        {"l": "D", "t": "Ninguna es correcta."}
      ]},
    "13": {
      "q": "¬øQu√© deber√° conocer el Maquinista que dirija la marcha?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "El n√∫mero de tren que va a conducir, su composici√≥n y caracter√≠sticas."},
        {"l": "B", "t": "La adecuada gesti√≥n del tr√°fico ferroviario."},
        {"l": "C", "t": "Solo el n√∫mero de tren que va a conducir."},
        {"l": "D", "t": "Solo la composici√≥n del tren."}
      ]},
    "14": {
      "q": "¬øD√≥nde efectuar√°n la parada t√©cnica o comercial los trenes?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Donde no la tengan prescrita."},
        {"l": "B", "t": "Donde la tenga prescrita sin se√±al de salida."},
        {"l": "C", "t": "Donde la tengan prescrita."},
        {"l": "D", "t": "La t√©cnica donde se la asegure el PM y exista se√±al de salida."}
      ]},
    "15": {
      "q": "Los trenes de viajeros con parada comercial en una estaci√≥n, ¬øpodr√°n ser recibidos con las indicaciones de las se√±ales de salida autorizando el paso?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "S√≠, siempre."},
        {"l": "B", "t": "S√≠, siempre que las instalaciones de seguridad lo permitan, entre otros requisitos."},
        {"l": "C", "t": "No, nunca."},
        {"l": "D", "t": "S√≠, siempre que se deba notificar al Maquinista alguna informaci√≥n que afecte a su circulaci√≥n."}
      ]},
    "16": {
      "q": "¬øPuede ser suprimida una parada t√©cnica prescrita por necesidades de regulaci√≥n del tr√°fico?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "No"},
        {"l": "B", "t": "S√≠, si existe una se√±al de salida, y se da la orden de marcha en las condiciones reguladas para cada bloqueo."},
        {"l": "C", "t": "S√≠, a voluntad propia del Maquinista."},
        {"l": "D", "t": "S√≠, solo depende del bloqueo en que se est√© circulando."}
      ]},
    "17": {
      "q": "Los trenes con parada t√©cnica en una estaci√≥n:",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Ser√°n recibidos sin se√±al de entrada, independientemente del bloqueo que circule."},
        {"l": "B", "t": "Ser√°n recibidos sin se√±al de salida, independientemente del bloque que circule."},
        {"l": "C", "t": "Ser√°n recibidos de forma que las √≥rdenes de las se√±ales la aseguren."},
        {"l": "D", "t": "Ser√°n recibidos siempre por el Responsable de Circulaci√≥n de la estaci√≥n."}
      ]},
    "18": {
      "q": "¬øC√≥mo ser√° asegurada una parada t√©cnica no prescrita, al Maquinista, cuando no sea posible asegurarla o el lugar donde deba efectuarse carezca de Responsable de Circulaci√≥n?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Solo por BOI."},
        {"l": "B", "t": "Por radiotelefon√≠a o en la estaci√≥n inmediata anterior abierta que el tren tenga parada."},
        {"l": "C", "t": "Solo por radiotelefon√≠a."},
        {"l": "D", "t": "Por radiotelefon√≠a o en la estaci√≥n inmediata posterior abierta."}
      ]},
    "19": {
      "q": "¬øEn qu√© casos el Maquinista no exceder√° la velocidad de 30 km/h al paso por las agujas situadas a continuaci√≥n de la se√±al de salida, salvo en los casos en que exista se√±al indicadora de posici√≥n de agujas que ordene otra velocidad?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Al iniciar la marcha en origen o despu√©s de una parada prescrita, al salir o pasar por una estaci√≥n por v√≠a desviada, o tras haber encontrado la se√±al de entrada ordenando anuncio de parada."},
        {"l": "B", "t": "Al iniciar la marcha en origen o antes de una parada prescrita, al salir o pasar por una estaci√≥n por v√≠a desviada, o tras haber encontrado la se√±al de entrada ordenando anuncio de parada."},
        {"l": "C", "t": "Al salir o pasar por una estaci√≥n por agujas talonables."},
        {"l": "D", "t": "Al iniciar la marcha en origen o despu√©s de una parada prescrita, al salir o pasar por una estaci√≥n por v√≠a desviada, o tras haber encontrado la se√±al de entrada ordenando v√≠a libre."}
      ]},
    "20": {
      "q": "En trayectos de BAB, un tren directo que haya encontrado la se√±al de entrada en anuncio de parada o est√© estacionado, ¬øC√≥mo actuar√° el Maquinista al paso por las agujas situadas a continuaci√≥n de la se√±al de salida?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Circular√° sin exceder de 20 km/h."},
        {"l": "B", "t": "Circular√° normalmente si nada se opone, si la se√±al de salida ordena v√≠a libre."},
        {"l": "C", "t": "Circular√° sin exceder de 30 km/h, salvo en los casos en que exista se√±al indicadora de posici√≥n de agujas que ordene otra velocidad."},
        {"l": "D", "t": "Circular√° sin exceder de 30 km/h siempre."}
      ]},
    "21": {
      "q": "Al iniciar la marcha tras una detenci√≥n o parada eventual, ¬øC√≥mo actuar√° el Maquinista al paso por las agujas situadas a continuaci√≥n de la se√±al que autoriza el movimiento o que haya sido autorizado a rebasar?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Si la se√±al ordena v√≠a libre, al tipo de tren."},
        {"l": "B", "t": "Sin exceder de 30 km/h, indique lo que indique la se√±al indicadora de posici√≥n de agujas."},
        {"l": "C", "t": "Sin exceder de 30 km/h, salvo en los casos en que exista se√±al indicadora de posici√≥n de agujas que ordene otra velocidad."},
        {"l": "D", "t": "Con marcha de maniobras si le han autorizado el rebase al Maquinista."}
      ]},
    "22": {
      "q": "En la aproximaci√≥n hacia una estaci√≥n nos encontramos E¬¥1 en anuncio de precauci√≥n y E1 en anuncio de parada, el Maquinista actuar√° de la siguiente forma:",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Con itinerario establecido con v√≠a directa, circular√° con marcha establecida en su documento de tren."},
        {"l": "B", "t": "No exceder√° la velocidad de 30 km/h al paso por las agujas situadas a continuaci√≥n de la se√±al de entrada y no exceder√° la velocidad de 30 km/h al paso por las agujas situadas a continuaci√≥n de la se√±al de salida, sin existir se√±al indicadora de posici√≥n de agujas."},
        {"l": "C", "t": "No exceder√° la velocidad de 30 km/h al paso por las agujas situadas a continuaci√≥n de la se√±al de entrada."},
        {"l": "D", "t": "No exceder√° la velocidad de 30 km/h al paso por las agujas situadas a continuaci√≥n de la se√±al de salida."}
      ]},
    "23": {
      "q": "¬øDe qu√© deber√° disponer el personal del AI o de la EF que deba realizar cualquier actividad vinculada a la seguridad en la circulaci√≥n?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Deber√° disponer de la correspondiente habilitaci√≥n de seguridad en vigor."},
        {"l": "B", "t": "Deber√° disponer de la Titulaci√≥n correspondiente."},
        {"l": "C", "t": "Deber√° disponer de la Titulaci√≥n correspondiente con las actualizaciones de reciclajes y Psicof√≠sicos."},
        {"l": "D", "t": "Disponer de los requisitos para obtener las titulaciones correspondientes."}
      ]},
    "24": {
      "q": "¬øQui√©n establecer√° en sus respectivos SGS las reglas internas que definan las prescripciones a cumplir en cada caso, y los procedimientos que garanticen su consecuci√≥n y la forma de hacerlo, as√≠ como su interacci√≥n con cualquier otro personal participante en la explotaci√≥n ferroviaria?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "La EF."},
        {"l": "B", "t": "La EF y AI."},
        {"l": "C", "t": "La EF y AESF."},
        {"l": "D", "t": "La AESF y el AI."}
      ]},
    "25": {
      "q": "En l√≠neas de v√≠a doble o m√∫ltiple, los trabajos que se realicen en una v√≠a, ¬øSer√°n compatibles con la circulaci√≥n normal de los trenes por las v√≠as contiguas?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "S√≠, siempre."},
        {"l": "B", "t": "S√≠, siempre que no afecten a su g√°libo o electrificaci√≥n."},
        {"l": "C", "t": "No, nunca."},
        {"l": "D", "t": "S√≠, siempre que afecten a su g√°libo y a su electrificaci√≥n si se trata de una locomotora di√©sel."}
      ]},
    "26": {
      "q": "Cuando se realicen trabajos, en l√≠neas de v√≠a doble o m√∫ltiple, ¬øCu√°l ser√° la velocidad m√°xima en la v√≠a no afectada por trabajos?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "160 km/h, cuando los trabajos se realicen en viaductos."},
        {"l": "B", "t": "160 km/h, cuando los trabajos se realicen en t√∫neles."},
        {"l": "C", "t": "160 km/h."},
        {"l": "D", "t": "120 km/h, cuando los trabajos no se realicen en t√∫neles y viaductos."}
      ]},
    "27": {
      "q": "¬øDesde d√≥nde se iniciar√° preferentemente el movimiento de m√°quinas aptas para ser encarriladas en plena v√≠a?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Desde una de las estaciones colaterales del trayecto en el que han de operar."},
        {"l": "B", "t": "Desde la estaci√≥n colateral sentido par."},
        {"l": "C", "t": "Desde la estaci√≥n colateral sentido impar."},
        {"l": "D", "t": "Es indiferente."}
      ]},
    "28": {
      "q": "¬øQui√©n informar√° al Responsable de Circulaci√≥n del sistema de trabajos a emplear, en los trabajos no programados por aver√≠as o accidentes?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "El Encargado de los trabajos siempre."},
        {"l": "B", "t": "El Piloto de Seguridad."},
        {"l": "C", "t": "El Encargado de los trabajos o Piloto de seguridad habilitado para concertar trabajos."},
        {"l": "D", "t": "Ninguna es correcta."}
      ]},
    "29": {
      "q": "Si, por la importancia de los trabajos o por cualquier otra causa, no fuese posible aplicar las prescripciones del Cap√≠tulo 3 (trabajos y pruebas), ¬øc√≥mo se regular√°?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Por Consigna C."},
        {"l": "B", "t": "Por Consigna de la EF la forma de proceder, seg√∫n su SGS."},
        {"l": "C", "t": "Por Consigna del AI."},
        {"l": "D", "t": "Por Aviso."}
      ]},
    "30": {
      "q": "¬øQu√© sistema es el utilizado para realizar trabajos en la 'Zona de peligro para los trabajos' o en la 'Zona de peligro el√©ctrico' con herramientas manuales que, por su naturaleza y facilidad de retirada, no obliguen a aplicar el sistema de interrupci√≥n de la circulaci√≥n con Entrega de V√≠a Bloqueada (EVB)?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "Trabajos en intervalo de interrupci√≥n en la circulaci√≥n."},
        {"l": "B", "t": "Trabajos en liberaci√≥n de la circulaci√≥n con intervalos de tiempo."},
        {"l": "C", "t": "Trabajos en intervalo de liberaci√≥n por tiempo."},
        {"l": "D", "t": "Trabajos en intervalo de espacio."}
      ]},
    "31": {
      "q": "¬øQu√© se considera herramienta manual?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Todo utensilio que, por su peso, manejo, ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."},
        {"l": "B", "t": "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 50kg."},
        {"l": "C", "t": "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 60kg y adem√°s pueda retirarse de la v√≠a a tiempo oportuno por la persona que la maneja."},
        {"l": "D", "t": "Todo utensilio que pueda manejarse manualmente, teniendo un peso inferior a 50kg y ausencia de fijaci√≥n mec√°nica al armamento de la v√≠a o rodadura sobre los carriles, etc., y pueda retirarse de la misma en tiempo oportuno por la persona que la maneja."}
      ]},
    "32": {
      "q": "¬øC√≥mo se realizan los trabajos en el sistema de trabajos en intervalo de liberaci√≥n por tiempo?",
      "a": "D",
      "opts": [
        {"l": "A", "t": "Estableciendo la entrega de v√≠a bloqueada a intervalos cortos de tiempo."},
        {"l": "B", "t": "Estableciendo la entrega de v√≠a bloqueada a intervalos de tiempo no superiores a 1h."},
        {"l": "C", "t": "Estableciendo la entrega de v√≠a bloqueada a intervalos de tiempo no superiores a un posible paso de una circulaci√≥n por el trayecto afectado."},
        {"l": "D", "t": "Aprovechando los intervalos de tiempo libres de trenes entre dos circulaciones programadas sucesivas, por el trayecto y v√≠a afectados, que garantizan los Responsables de Circulaci√≥n de las estaciones colaterales abiertas o el del CTC."}
      ]},
    "33": {
      "q": "¬øQu√© es condici√≥n es imprescindible para poder aplicar el sistema de trabajos de intervalo de liberaci√≥n por tiempo?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Que las estaciones que delimitan el trayecto afectado sean de √°mbito CTC"},
        {"l": "B", "t": "Que las estaciones que delimitan el trayecto afectado se encuentren abiertas."},
        {"l": "C", "t": "Que no existan estaciones cerradas entre las estaciones que delimitan el trayecto afectado."},
        {"l": "D", "t": "Que una de las estaciones que delimita el trayecto afectado este abierta, aunque la otra pueda estar cerrada."}
      ]},
    "34": {
      "q": "¬øCu√°l ser√° el tiempo m√°ximo a conceder, para la realizaci√≥n de trabajos en intervalo de liberaci√≥n por tiempo?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "Ser√° el disponible sin circulaci√≥n de trenes entre dos circulaciones programadas sucesivas, por el trayecto y v√≠a concedido."},
        {"l": "B", "t": "El necesario para realizar los trabajos puesto que las se√±ales fijas fundamentales protegen el desarrollo de los trabajos."},
        {"l": "C", "t": "Ser√° el disponible sin circulaci√≥n de trenes entre dos circulaciones programadas sucesivas, por el trayecto y v√≠a concedido, siempre y cuando no exceda el trabajo de m√°s de 2h."},
        {"l": "D", "t": "Ser√° el disponible sin circulaci√≥n de trenes entre dos circulaciones programadas sucesivas, por el trayecto y v√≠a concedido, siempre y cuando no exceda el trabajo de m√°s de 1h."}
      ]},
    "35": {
      "q": "¬øEl sistema de liberaci√≥n por tiempo es compatible con la BTV?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "S√≠, siempre."},
        {"l": "B", "t": "No."},
        {"l": "C", "t": "S√≠, siempre y cuando se establezca en √°mbitos de CTC."},
        {"l": "D", "t": "S√≠, siempre y cuando se establezca en √°mbitos sin CTC."}
      ]},
    "36": {
      "q": "Una vez que el Responsable de Circulaci√≥n autorice los trabajos, ¬øpuede este alterar la hora efectiva de inicio de estos?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "S√≠, siempre."},
        {"l": "B", "t": "No, nunca."},
        {"l": "C", "t": "S√≠, siempre que sea casos estrictamente justificados."},
        {"l": "D", "t": "S√≠, pero en √°mbito solo de CTC."}
      ]},
    "37": {
      "q": "Una vez que el Responsable de Circulaci√≥n autorice los trabajos, ¬øpuede el Encargado de los trabajos alterar la hora efectiva de la terminaci√≥n?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "S√≠, siempre."},
        {"l": "B", "t": "No, nunca."},
        {"l": "C", "t": "S√≠, siempre que sea casos estrictamente justificados."},
        {"l": "D", "t": "S√≠, pero en √°mbito solo de CTC."}
      ]},
    "38": {
      "q": "Finalizado el plazo de ocupaci√≥n en el sistema ejecuci√≥n de trabajos de intervalo de liberaci√≥n por tiempo, falla la comunicaci√≥n entre el Encargado de Trabajos o Piloto de Seguridad habilitado para concertar trabajos y el Responsable de Circulaci√≥n. El Responsable de Circulaci√≥n que deba expedir un tren:",
      "a": "B",
      "opts": [
        {"l": "A", "t": "No expedir√° ning√∫n tren hasta que tenga comunicaci√≥n con el Encargado de Trabajos o Piloto de Seguridad habilitado para concertar trabajos."},
        {"l": "B", "t": "Cursar√° al Maquinista del tren que deba expedir el siguiente telefonema: ¬´Circular√° con marcha a la vista al paso por el km ( ) de la v√≠a (I, II, etc.) entre ( ) y ( ) por trabajos en intervalo de liberaci√≥n por tiempo no restablecido¬ª."},
        {"l": "C", "t": "Cursar√° al Maquinista del tren que deba expedir el siguiente telefonema: ¬´Circular√° con marcha de maniobras al paso por el km ( ) de la v√≠a (I, II, etc.) entre ( ) y ( ) por trabajos en intervalo de liberaci√≥n por tiempo no restablecido¬ª."},
        {"l": "D", "t": "Lo har√° normalmente. El Encargado de Trabajos o Piloto de Seguridad sabe cu√°ndo finaliza el plazo de ocupaci√≥n y debe retirarse sin comunicarse con el Responsable de Circulaci√≥n."}
      ]},
    "39": {
      "q": "¬øQu√© sistema se utilizar√° para realizar trabajos en zona de peligro para los trabajos o zona de peligro el√©ctrico, con herramientas, maquinaria o trenes de trabajos que por su naturaleza no pueden retirarse de la misma en tiempo oportuno, por la persona que las maneja?",
      "a": "B",
      "opts": [
        {"l": "A", "t": "Intervalo de liberaci√≥n por tiempo."},
        {"l": "B", "t": "Interrupci√≥n de la circulaci√≥n con Entrega de v√≠a bloqueada."},
        {"l": "C", "t": "Intervalo de interrupci√≥n en la circulaci√≥n."},
        {"l": "D", "t": "Interrupci√≥n de liberaci√≥n por tiempo."}
      ]},
    "40": {
      "q": "Los trabajos que se realizan sobre una v√≠a libre de circulaciones (EVB), ¬øa cargo de quien pondr√° temporalmente el Responsable de Circulaci√≥n dichos trabajos?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "A cargo de un Encargado de Trabajos o de pruebas."},
        {"l": "B", "t": "A cargo de un piloto de pruebas"},
        {"l": "C", "t": "A cargo del Maquinista que realiza la prueba"},
        {"l": "D", "t": "Ninguna es correcta."}
      ]},
    "41": {
      "q": "En el sistema de interrupci√≥n en la circulaci√≥n, ¬ød√≥nde se aplica la EVB?",
      "a": "C",
      "opts": [
        {"l": "A", "t": "A los trabajos que se realicen en el trayecto comprendido entre dos estaciones abiertas."},
        {"l": "B", "t": "A los trabajos que se realicen en el trayecto comprendido entre varias estaciones abiertas, en √°mbito sin CTC."},
        {"l": "C", "t": "A los trabajos que se realicen en el trayecto comprendido entre dos estaciones abiertas, permaneciendo las posibles estaciones intermedias cerradas, en √°mbito con CTC."},
        {"l": "D", "t": "Ninguna es correcta."}
      ]},
    "42": {
      "q": "¬øEn qu√© √°mbito el Responsable de Circulaci√≥n de la estaci√≥n que conceda la EVB deber√° disponer de autorizaci√≥n previa del Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM, qui√©n fijar√° el tiempo de ocupaci√≥n de la v√≠a?",
      "a": "A",
      "opts": [
        {"l": "A", "t": "En l√≠neas con CTC."},
        {"l": "B", "t": "En l√≠nea sin CTC."},
        {"l": "C", "t": "Tanto en √°mbito CTC, como sin CTC."},
        {"l": "D", "t": "En l√≠neas sin CTC, pero si las estaciones donde se conceda la EVB sean telemandadas."}
      ]}
    },
    
    "2": {
    "43": {
    "q": "¬øEn una misma v√≠a se podr√°n realizar diferentes trabajos, estando la concertaci√≥n y coordinaci√≥n a cargo de un mismo Encargado de trabajos al que se le concedi√≥ la EVB, respetando la hora de comienzo y finalizaci√≥n concedidos?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "S√≠."},
      {"l": "B", "t": "No."},
      {"l": "C", "t": "S√≠, solo sin CTC y tambi√©n por un piloto de seguridad habilitado para concertar trabajos."},
      {"l": "D", "t": "S√≠, solo con CTC."}
    ]},
  "44": {
    "q": "¬øEn l√≠neas con CTC, los trenes de trabajos o pruebas podr√°n apartarse en cualquiera de las estaciones del trayecto, circulando al amparo de la EVB?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "S√≠."},
      {"l": "B", "t": "No."},
      {"l": "C", "t": "Solo en l√≠neas sin CTC."},
      {"l": "D", "t": "Los trenes de trabajos si, pero los trenes de pruebas no."}
    ]},
  "45": {
    "q": "Para la salida y entrada de los trenes de trabajo hacia/desde el trayecto afectado, ¬øque bastar√°?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "La orden de la se√±al de salida/entrada o la autorizaci√≥n de rebase del Responsable de Circulaci√≥n al Maquinista en los casos en los que no sea posible su apertura."},
      {"l": "B", "t": "Solo con la orden de la se√±al de entrada y salida."},
      {"l": "C", "t": "Con la se√±al de paso o marche el tren."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "46": {
    "q": "El Responsable de Circulaci√≥n, durante la aplicaci√≥n de la EVB, ¬øqu√© prescripciones deber√° cumplir entre otras?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En las estaciones, mantendr√° cerrada la se√±al de entrada y salida en rebase autorizado hacia y desde las v√≠as afectadas."},
      {"l": "B", "t": "Cuando sea necesario establecer un itinerario en el tramo de v√≠a concedido para los trabajos, la apertura de las se√±ales de entrada o salida de las estaciones se realizar√° exclusivamente con la indicaci√≥n de Rebase Autorizado y, si ello no es posible, se autorizar√° su rebase."},
      {"l": "C", "t": "Cuando las necesidades de los trabajos obliguen a rebasar reiteradamente una se√±al avanzada no dotada de letra 'P', el Responsable de Circulaci√≥n podr√° autorizar al Maquinista su rebase con marcha normal tantas veces como lo considere necesario durante la EVB."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "47": {
    "q": "El Maquinista, durante la aplicaci√≥n de la EVB:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Respetar√° la orden de todas las se√±ales, excepto las se√±ales intermedias en l√≠neas de BA y las de los PCA en l√≠neas de BSL y BCA que las considerar√° inexistentes."},
      {"l": "B", "t": "Para las pruebas atender√° a lo dispuesto en el correspondiente Aviso y a las instrucciones del Encargado de trabajos."},
      {"l": "C", "t": "Se atendr√° a las instrucciones del Responsable de Circulaci√≥n sobre los rebases de las se√±ales intermedias."},
      {"l": "D", "t": "Respetar√° la orden de todas las se√±ales."}
    ]},
  "48": {
    "q": "Los trenes de trabajos, ¬øcumplir√°n las prescripciones del RCF?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "S√≠, en cuanto a composici√≥n y cargamento, no con frenado y se√±ales."},
      {"l": "B", "t": "No, solo cumplir√°n las prescripciones de cargamento."},
      {"l": "C", "t": "S√≠, en cuanto a composici√≥n, frenado, se√±ales y cargamentos."},
      {"l": "D", "t": "No, solo cumplir√°n las prescripciones en cuanto a composici√≥n y frenado, ya que las se√±ales para los trenes de trabajos son inexistentes, porque est√°n al amparo de la EVB."}
    ]},
  "49": {
    "q": "¬øCu√°ndo se circule al amparo de EVB, ¬øpodr√°n ser fraccionados los trenes?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "S√≠, siempre."},
      {"l": "B", "t": "No."},
      {"l": "C", "t": "S√≠, siempre que se asegure la inmovilidad de los cortes separados del veh√≠culo motor, a criterio del piloto de seguridad habilitado para concertar trabajos."},
      {"l": "D", "t": "S√≠, a criterio del Encargado de trabajos, siempre que se asegure la inmovilidad de los cortes separados del veh√≠culo motor."}
    ]},
  "50": {
    "q": "¬øCu√°ndo se deber√° situar siempre que sea posible el veh√≠culo motor en el lado de posible deriva en los trenes de trabajos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En los trayectos con declividad de 10 mm/m."},
      {"l": "B", "t": "En los trayectos con declividad de 15 mm/m."},
      {"l": "C", "t": "En los trayectos con declividad superior a 10 mm/m."},
      {"l": "D", "t": "En los trayectos con declividad igual o superior a 10 mm/m."}
    ]},
  "51": {
    "q": "¬øC√≥mo operar√°n los trenes de pruebas?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Al amparo de un intervalo de liberaci√≥n por tiempo, siempre que su circulaci√≥n requiera prescripciones especiales con respecto a las condiciones anormales de operaci√≥n de trenes en el tramo afectado."},
      {"l": "B", "t": "Al amparo siempre del BCA."},
      {"l": "C", "t": "Al amparo de una EVB, siempre que su circulaci√≥n requiera prescripciones especiales con respecto a las condiciones normales de operaci√≥n de trenes en el tramo afectado."},
      {"l": "D", "t": "Al amparo de un Bloqueo de liberaci√≥n autom√°tica, siempre que no sea un bloqueo autom√°tico."}
    ]},
  "52": {
    "q": "¬øC√≥mo se regular√° la circulaci√≥n de un tren de pruebas?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Su circulaci√≥n se regular√° mediante Consigna del PM o de la EF, en la que se indicar√°n las prescripciones especiales que deben cumplirse, en su caso, y se designar√° el Encargado de los trabajos."},
      {"l": "B", "t": "Su circulaci√≥n se regular√° mediante Consigna de pruebas elaborada por la EF, en la que se indicar√°n las prescripciones especiales que deben cumplirse, en su caso, y se designar√° el Encargado de los trabajos."},
      {"l": "C", "t": "Su circulaci√≥n se regular√° mediante Consigna de la EF, seg√∫n su SGS en la que se indicar√°n las prescripciones especiales que deben cumplirse, en su caso, y se designar√° el Encargado de los Trabajos."},
      {"l": "D", "t": "Su circulaci√≥n se regular√° mediante Consigna del AI."}
    ]},
  "53": {
    "q": "Las Autorizaciones de circulaci√≥n de los veh√≠culos motores, ¬øespecificar√°n las categor√≠as de l√≠neas por las que pueden circular?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "S√≠, para trenes convencionales y no para automotores."},
      {"l": "B", "t": "S√≠, para trenes convencionales y automotores en doble y no para automotores en simple."},
      {"l": "C", "t": "No, no depende de las caracter√≠sticas t√©cnicas del veh√≠culo motor."},
      {"l": "D", "t": "S√≠, que ser√° en funci√≥n de la de la masa por eje y metro lineal que permita la infraestructura y de las caracter√≠sticas t√©cnicas del veh√≠culo."}
    ]},
  "54": {
    "q": "¬øDe qu√© depender√° el n√∫mero de locomotoras en una composici√≥n?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Depender√° de sus caracter√≠sticas t√©cnicas, y de las condiciones de explotaci√≥n establecidas por la EF, de acuerdo con lo especificado en sus Autorizaciones de circulaci√≥n."},
      {"l": "B", "t": "El n√∫mero de locomotoras que pueden ir en servicio en una composici√≥n es de dos por cola."},
      {"l": "C", "t": "El n√∫mero de locomotoras que pueden ir en servicio en una composici√≥n es de tres por cabeza."},
      {"l": "D", "t": "El n√∫mero de locomotoras que pueden ir en servicio en una composici√≥n es de dos, siempre que una sea remolcada."}
    ]},
  "55": {
    "q": "¬øQui√©n dar√° a conocer las restricciones impuestas a la circulaci√≥n en determinadas l√≠neas y tramos a las EF?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "El AI por Consigna B."},
      {"l": "B", "t": "El AI."},
      {"l": "C", "t": "El PM por un Aviso."},
      {"l": "D", "t": "Los Responsables de Circulaci√≥n."}
    ]},
  "56": {
    "q": "¬øQui√©n dar√° a conocer las restricciones impuestas a la circulaci√≥n en determinadas l√≠neas y tramos al Maquinista?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "El AI por el Libro de itinerarios."},
      {"l": "B", "t": "La EF por el Libro de normas."},
      {"l": "C", "t": "El AI por el Libro horario."},
      {"l": "D", "t": "La EF por el Libro de itinerarios."}
    ]},
  "57": {
    "q": "Cuando se impongan restricciones de velocidad para determinados tipos de locomotoras al paso por vanos met√°licos, ¬øse entiende que afectan a todos ellos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "S√≠, cualquiera que sea su luz, siempre y cuando las locomotoras circulen juntas."},
      {"l": "B", "t": "S√≠, dependiendo cual sea su luz, siempre y cuando la composici√≥n sea empujada."},
      {"l": "C", "t": "S√≠, dependiendo cual sea su luz, tanto si estas circulan en cabeza como en cola."},
      {"l": "D", "t": "S√≠, cualquiera que sea su luz, tanto si estas circulan en cabeza como en otro lugar de la composici√≥n."}
    ]},
  "58": {
    "q": "La restricci√≥n de circular con tracci√≥n simple, ¬øQu√© implica?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "La prohibici√≥n de circular dos locomotoras juntas."},
      {"l": "B", "t": "La prohibici√≥n de circular en mando m√∫ltiple."},
      {"l": "C", "t": "La prohibici√≥n de circular en doble tracci√≥n por cabeza."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "59": {
    "q": "¬øHasta qu√© velocidad podr√°n circular los automotores en mando m√∫ltiple?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "A 200 km/h."},
      {"l": "B", "t": "A 140 km/h."},
      {"l": "C", "t": "No conlleva ninguna limitaci√≥n de velocidad."},
      {"l": "D", "t": "A 160 km/h."}
    ]},
  "60": {
    "q": "¬øHasta qu√© velocidad podr√°n circular las locomotoras en mando m√∫ltiple?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "A 200 km/h."},
      {"l": "B", "t": "A 140 km/h."},
      {"l": "C", "t": "No conlleva ninguna limitaci√≥n de velocidad."},
      {"l": "D", "t": "A 160 km/h."}
    ]},
  "61": {
    "q": "¬øHasta qu√© velocidad podr√°n circular los trenes reversibles en mando m√∫ltiple?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "A 200 km/h."},
      {"l": "B", "t": "A 140 km/h."},
      {"l": "C", "t": "No conlleva ninguna limitaci√≥n de velocidad, salvo las que se establezcan en sus autorizaciones de circulaci√≥n."},
      {"l": "D", "t": "A 160 km/h."}
    ]},
  "62": {
    "q": "Cuando el veh√≠culo motor (locomotora o automotor) gobernado por el segundo Maquinista, disponga de dispositivo de corte de tracci√≥n accionable cuando el de cabeza realice un frenado de servicio con tracci√≥n m√∫ltiple, ¬øQu√© velocidad no exceder√°?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "No exceder√° de 140 km/h."},
      {"l": "B", "t": "No exceder√° de 80 km/h."},
      {"l": "C", "t": "No exceder√° de 200 km/h."},
      {"l": "D", "t": "No conlleva ninguna limitaci√≥n de velocidad."}
    ]},
  "63": {
    "q": "Cuando el veh√≠culo motor (locomotora o automotor) gobernado por el segundo Maquinista, no disponga de dispositivo de corte de tracci√≥n accionable cuando el de cabeza realice un frenado de servicio con tracci√≥n m√∫ltiple, ¬øQu√© velocidad no exceder√°?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "No exceder√° de 140 km/h."},
      {"l": "B", "t": "No exceder√° de 80 km/h."},
      {"l": "C", "t": "No exceder√° de 200 km/h."},
      {"l": "D", "t": "No conlleva ninguna limitaci√≥n de velocidad."}
    ]},
  "64": {
    "q": "¬øQu√© velocidad no exceder√°n los trenes con doble tracci√≥n por cola?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "De 140 km/h siempre que el Maquinista que ocupe la cabina de cabeza disponga de freno autom√°tico sobre toda la composici√≥n, entre otros requisitos."},
      {"l": "B", "t": "De 140 km/h siempre que el Maquinista disponga de dispositivo de corte de tracci√≥n accionable cuando el de cabeza realice un frenado de servicio, y exista comunicaci√≥n entre el Maquinista de cabeza y de cola, entre otros requisitos."},
      {"l": "C", "t": "De 100 km/h siempre que el Maquinista que ocupe la cabina de cabeza disponga de freno autom√°tico sobre toda la composici√≥n."},
      {"l": "D", "t": "De 60 km/h cuando no exista comunicaci√≥n directa entre el Maquinista de cabeza y de cola."}
    ]},
  "65": {
    "q": "¬øDe qu√© velocidad no exceder√°n los trenes empujados?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "De 80 km/h."},
      {"l": "B", "t": "De 100 km/h siempre que se cumplan una serie de requisitos."},
      {"l": "C", "t": "De 50 km/h."},
      {"l": "D", "t": "De 50 km/h siempre que se cumplan una serie de requisitos."}
    ]},
  "66": {
    "q": "Si no existe comunicaci√≥n directa entre el Maquinista que dirija la marcha y el de la locomotora que empuja, trat√°ndose por tanto de un tren empujado ¬øQu√© velocidad no podr√° exceder el Maquinista?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "No exceder√° de 80 km/h."},
      {"l": "B", "t": "No exceder√° de 20 km/h."},
      {"l": "C", "t": "No exceder√° de 100 km/h."},
      {"l": "D", "t": "No exceder√° de 60 km/h."}
    ]},
  "67": {
    "q": "En trayectos con PN ¬øCu√°ndo podr√°n circular los trenes empujados?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cuando el Maquinista que dirija la marcha ocupe la cabina de cabeza en el sentido del movimiento y disponga de silbato. El Maquinista que dirija la marcha disponga de freno autom√°tico sobre toda la composici√≥n. El veh√≠culo motor disponga de tracci√≥n al efectuar el Maquinista que dirija la marcha un frenado de servicio. Exista comunicaci√≥n directa entre el Maquinista que dirija la marcha y el de la locomotora que empuja."},
      {"l": "B", "t": "Cuando el Maquinista que dirija la marcha ocupe la cabina de cabeza en el sentido del movimiento y disponga de silbato y alumbrado de gran intensidad luminosa. El Maquinista que dirija la marcha disponga de mando regulable de freno autom√°tico sobre toda la composici√≥n. El veh√≠culo motor disponga de dispositivo de corte de tracci√≥n al efectuar el Maquinista que dirija la marcha un frenado de servicio. Exista comunicaci√≥n directa entre el Maquinista que dirija la marcha y el de la locomotora que empuja."},
      {"l": "C", "t": "Cuando el Maquinista que dirija la marcha ocupe la cabina de cabeza en el sentido del movimiento y disponga de silbato y alumbrado de gran intensidad luminosa. El Maquinista que dirija la marcha disponga de mando regulable de freno autom√°tico sobre toda la composici√≥n. El veh√≠culo motor disponga de dispositivo de corte de tracci√≥n al efectuar el Maquinista que dirija la marcha un frenado de servicio."},
      {"l": "D", "t": "Cuando el Maquinista que dirija la marcha ocupe la cabina de cabeza en el sentido del movimiento y disponga de silbato y alumbrado de gran intensidad luminosa. El Maquinista que dirija la marcha disponga de mando regulable de freno autom√°tico sobre toda la composici√≥n. El veh√≠culo motor no disponga de dispositivo de corte de tracci√≥n al efectuar el Maquinista que dirija la marcha un frenado de servicio. Exista comunicaci√≥n directa entre el Maquinista que dirija la marcha y el de la locomotora que empuja."}
    ]},
  "68": {
    "q": "¬øCu√°les son las condiciones de circulaci√≥n en los veh√≠culos motores de tracci√≥n dual?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Circular√°n en modo di√©sel."},
      {"l": "B", "t": "Circular√°n en modo el√©ctrico."},
      {"l": "C", "t": "Circular√°n en modo el√©ctrico siempre que sea posible."},
      {"l": "D", "t": "Circular√°n en modo di√©sel siempre que sea posible."}
    ]},
  "69": {
    "q": "¬øD√≥nde vendr√° definido el modo de tracci√≥n a utilizar en cada tramo y los puntos previstos para el cambio planificado de modo?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Estar√°n definidos en el "Libro de Itinerarios del Maquinista"."},
      {"l": "B", "t": "Estar√°n definidos en Consigna P."},
      {"l": "C", "t": "Estar√°n definidos en los manuales de conducci√≥n."},
      {"l": "D", "t": "Estar√°n definidos en el "Libro de normas del Maquinista"."}
    ]},
  "70": {
    "q": "En los veh√≠culos motores de tracci√≥n dual, ¬øD√≥nde se indica la manera de cambiar de modo de tracci√≥n?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En el Manual de Circulaci√≥n."},
      {"l": "B", "t": "En una consigna de circulaci√≥n."},
      {"l": "C", "t": "En el libro de itinerarios del Maquinista."},
      {"l": "D", "t": "En el Manual de Conducci√≥n."}
    ]},
  "71": {
    "q": "¬øQui√©n podr√° ordenar el cambio no planificado del modo de tracci√≥n previsto en l√≠neas electrificadas?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "El Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM, ponderando las circunstancias e informando de ello a la EF."},
      {"l": "B", "t": "El CTC, ponderando las circunstancias."},
      {"l": "C", "t": "El Responsable de Circulaci√≥n de la Estaci√≥n, ponderando las circunstancias."},
      {"l": "D", "t": "El Maquinista que le precede en la circulaci√≥n, ponderando las circunstancias."}
    ]},
  "72": {
    "q": "¬øPuede la EF por iniciativa propia, requerir el cambio del modo de tracci√≥n previsto en un tramo?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "S√≠, sin necesidad de informar al AI."},
      {"l": "B", "t": "No."},
      {"l": "C", "t": "S√≠, informando de ello al AI y solicitar√° autorizaci√≥n al Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM, quien, ponderando las circunstancias, autorizar√° o denegar√° el cambio."},
      {"l": "D", "t": "S√≠, informando de ello exclusivamente al Maquinista."}
    ]},
  "73": {
    "q": "¬øEl Maquinista por iniciativa propia, puede iniciar el servicio con un modo distinto del programado?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "No, salvo que haya obtenido la oportuna autorizaci√≥n."},
      {"l": "B", "t": "S√≠, sin necesidad de autorizaci√≥n."},
      {"l": "C", "t": "S√≠, porque es un Maquinista habilitado de la l√≠nea."},
      {"l": "D", "t": "Nunca, aunque tenga la oportuna autorizaci√≥n."}
    ]},
  "74": {
    "q": "¬øC√≥mo se realizar√° el remolque de una locomotora?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Conforme a lo indicado en la Consigna."},
      {"l": "B", "t": "Conforme a lo indicado en el Manual de Circulaci√≥n."},
      {"l": "C", "t": "Conforme a lo indicado por el PM."},
      {"l": "D", "t": "Conforme a lo indicado en su Manual de Conducci√≥n."}
    ]},
  "75": {
    "q": "¬øCu√°ntas locomotoras podr√°n remolcar los trenes de mercanc√≠as?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Una."},
      {"l": "B", "t": "Dos."},
      {"l": "C", "t": "Una o varias."},
      {"l": "D", "t": "Hasta tres y su lugar en la composici√≥n ser√° conforme a lo indicado en su Manual de Circulaci√≥n."}
    ]},
  "76": {
    "q": "¬øCu√°ntas locomotoras podr√°n remolcar los trenes de viajeros?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Los trenes de viajeros podr√°n remolcar √∫nicamente una locomotora, en cabeza o en cola de la composici√≥n, a una velocidad m√°xima de 160 km/h."},
      {"l": "B", "t": "Los trenes de viajeros podr√°n remolcar √∫nicamente dos locomotoras, una en cabeza y otra en cola de la composici√≥n, a una velocidad m√°xima de 160 km/h."},
      {"l": "C", "t": "Los trenes de viajeros podr√°n remolcar √∫nicamente una locomotora, en cabeza o en cola de la composici√≥n, a una velocidad m√°xima de 180 km/h."},
      {"l": "D", "t": "Los trenes de viajeros podr√°n remolcar √∫nicamente dos locomotoras, una en cabeza y otra en cola de la composici√≥n, a una velocidad m√°xima de 180 km/h."}
    ]},
  "77": {
    "q": "En las composiciones formadas exclusivamente por locomotoras, ¬øcu√°l ser√° la longitud m√°xima?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Ser√° de 120 m y la velocidad m√°xima 200 km/h."},
      {"l": "B", "t": "Ser√° de 200 m y la velocidad m√°xima 160 km/h."},
      {"l": "C", "t": "Ser√° de 160 m y la velocidad m√°xima 120 km/h."},
      {"l": "D", "t": "Ser√° de 200 m y la velocidad m√°xima 120 km/h."}
    ]},
  "78": {
    "q": "Realizado el acoplamiento y con los veh√≠culos en condiciones de circular, ¬øQui√©n comunicar√° al Responsable de Circulaci√≥n la velocidad m√°xima de circulaci√≥n o cualquier otra circunstancia significativa que pudiera afectar a la regulaci√≥n del tr√°fico y no estuviera contemplada en el "Libro de Itinerarios del Maquinista"?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "El Maquinista."},
      {"l": "B", "t": "La EF."},
      {"l": "C", "t": "El Maquinista y la EF conjuntamente."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "79": {
    "q": "El remolque de un automotor por otro de la misma serie, o de una serie compatible, √∫nicamente est√° sujeto a las limitaciones contempladas:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "En sus Manuales de Conducci√≥n."},
      {"l": "B", "t": "En la Consigna que designe el PM."},
      {"l": "C", "t": "En la Consigna que designe el Responsable de Circulaci√≥n."},
      {"l": "D", "t": "En los Manuales de Circulaci√≥n."}
    ]},
  "80": {
    "q": "El remolque de un automotor realizado por otro de distinta serie no compatible, o por una locomotora:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "S√≥lo ser√° posible cuando ambos dispongan de acoplamientos hidr√°ulicos compatibles."},
      {"l": "B", "t": "S√≥lo ser√° posible cuando ambos dispongan exclusivamente de acoplamientos neum√°ticos compatibles."},
      {"l": "C", "t": "S√≥lo ser√° posible cuando ambos dispongan de acoplamientos mec√°nicos y neum√°ticos compatibles."},
      {"l": "D", "t": "No se puede realizar por ser incompatible."}
    ]},
  "81": {
    "q": "Cuando el automotor disponga de freno neum√°tico √∫til y de un enganche de socorro que permita unirlo al semiacoplamiento de freno de la locomotora, su circulaci√≥n ser√° normal sin exceder las velocidades m√°ximas;",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Para las que disponga de porcentaje de frenado suficiente, de acuerdo con las limitaciones contempladas en los Manuales de conducci√≥n."},
      {"l": "B", "t": "De 80 km/h."},
      {"l": "C", "t": "De 120 km/h."},
      {"l": "D", "t": "De 60 km/h."}
    ]},
  "82": {
    "q": "¬øQui√©n dar√° a conocer los requisitos que deben cumplirse para efectuar el remolque, limitaciones para cada serie de locomotoras, velocidades m√°ximas, etc.?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Las EF, a trav√©s del Libro de Itinerarios del Maquinista y de los Manuales de conducci√≥n."},
      {"l": "B", "t": "El AI, a trav√©s de la consigna correspondiente."},
      {"l": "C", "t": "El PM o el CTC."},
      {"l": "D", "t": "La EF, a trav√©s de los Manuales de conducci√≥n y el AI a trav√©s de su consigna correspondiente."}
    ]},
  "83": {
    "q": "Excepcionalmente, si la totalidad del freno neum√°tico del automotor estuviera fuera de servicio, ¬ø√©ste se podr√° remolcar con dos veh√≠culos motores?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Si, uno en cabeza y otro en cola, respetando la velocidad m√°xima de 50 km/h."},
      {"l": "B", "t": "No, solo uno en cabeza, respetando la velocidad m√°xima de 50 km/h."},
      {"l": "C", "t": "No, solo uno en cola, respetando la velocidad m√°xima de 50 km/h."},
      {"l": "D", "t": "Si, uno en cabeza y otro en cola, respetando el tipo resultante seg√∫n el porcentaje de frenado del automotor."}
    ]},
  "84": {
    "q": "El Cap√≠tulo 5 (Maniobras) del Libro 3 del RCF, es de aplicaci√≥n exclusiva a las maniobras que se realicen en:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "V√≠as de circulaci√≥n de trenes, o en itinerarios establecidos sobre √©stas."},
      {"l": "B", "t": "Zonas aisladas de estaciones, terminales o derivaciones particulares, sin acceso directo a las v√≠as de circulaci√≥n."},
      {"l": "C", "t": "En itinerarios no establecidos sobre √©stas."},
      {"l": "D", "t": "V√≠as solo hacia toperas."}
    ]}
  },
    "3": {
     
    },
    "4": {
     
     

 };

  // Calculate total questions across all parts
const totalPreguntasGlobal = Object.values(testData).reduce((acc, part) => {
  return acc + Object.keys(part).length;
}, 0);

  let currentPart = 1;
  let respuestasVisibles = false;
  const LS_PREFIX = 'rcf-libro1-part-';

  // Load state from localStorage
  function loadState(part) {
    try {
      return JSON.parse(localStorage.getItem(LS_PREFIX + part)) || {};
    } catch {
      return {};
    }
  }

  // Save state to localStorage
  function saveState(part, state) {
    localStorage.setItem(LS_PREFIX + part, JSON.stringify(state));
  }

  // Switch between parts
  function switchPart(part) {
    currentPart = part;
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('tab_' + part).classList.add('active');
    generarTest();
    // window.scrollTo({top: 0, behavior: 'smooth'});
  }

  // Generate test for current part
  function generarTest() {
    const container = document.getElementById('questionsContainer');
    container.innerHTML = '';
    
    const partData = testData[currentPart];
    if (!partData) return;
    
    const state = loadState(currentPart);
    
    Object.keys(partData).forEach(qid => {
      const q = partData[qid];
      const card = document.createElement('div');
      card.className = 'card question';
      card.dataset.qid = qid;
      
      let opcionesHTML = '';
      q.opts.forEach(opt => {
        const checked = state[qid] === opt.l ? 'checked' : '';
        opcionesHTML += `
          <label class="option">
            <input type="radio" name="q${qid}" value="${opt.l}" ${checked} />
            <div><b>${opt.l})</b> ${opt.t}</div>
          </label>
        `;
      });
      
      card.innerHTML = `
        <span class="q-number">Pregunta ${qid} de ${totalPreguntasGlobal}</span>
        <div class="q-title">${q.q}</div>
        <div class="options">${opcionesHTML}</div>
        <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
        <div class="feedback"></div>
      `;
      
      container.appendChild(card);
    });

    bindRadios();
    updateProgress();
  }
  
  function bindRadios() {
    document.querySelectorAll('input[type=radio]').forEach(radio => {
      radio.addEventListener('change', updateProgress);
    });
  }
  
    // Update progress bar
  function updateProgress() {
    const partData = testData[currentPart];
    const total = Object.keys(partData).length;
    const answered = document.querySelectorAll('input[type=radio]:checked').length;
    const percentage = (answered / total) * 100;
    document.getElementById('progressBar').style.width = percentage + '%';
    
    // Save current answers
    const state = {};
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const selected = card.querySelector('input[type=radio]:checked');
      if (selected) {
        state[qid] = selected.value;
      }
    });
    saveState(currentPart, state);
  }

  // Grade the test
  window.calificar = function() {
    const partData = testData[currentPart];
    let correctas = 0;
    let incorrectas = 0;
    let sinResponder = 0;
    const total = Object.keys(partData).length;
    
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = partData[qid].a;
      const seleccionada = card.querySelector('input[type=radio]:checked');
      
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
      
      if (seleccionada) {
        const letra = seleccionada.value;
        if (letra === correcta) {
          correctas++;
          seleccionada.closest('.option').classList.add('correct');
          card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
          card.querySelector('.feedback').style.color = 'var(--ok)';
        } else {
          incorrectas++;
          seleccionada.closest('.option').classList.add('incorrect');
          card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
          card.querySelector('.feedback').style.color = 'var(--bad)';
          const corr = card.querySelector(`input[value="${correcta}"]`);
          if (corr) corr.closest('.option').classList.add('correct');
        }
      } else {
        sinResponder++;
        card.querySelector('.feedback').textContent = '‚ö† Sin responder';
        card.querySelector('.feedback').style.color = 'var(--warning)';
      }
    });
    
    const porcentaje = Math.round((correctas / total) * 100);
    const aprobado = porcentaje >= 50;
    
    document.getElementById('score').textContent = `${correctas} / ${total} (${porcentaje}%)`;
    document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
    
    document.getElementById('scoreDetails').innerHTML = `
      ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
    `;
    
   // window.scrollTo({top: 0, behavior: 'smooth'});
  };

  // Reset the test
  window.reiniciar = function() {
    if (!confirm('¬øReiniciar respuestas de esta parte?')) return;
    
    document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
    document.getElementById('score').textContent = '‚Äî';
    document.getElementById('score').removeAttribute('style');
    document.getElementById('scoreDetails').textContent = '';
    document.getElementById('progressBar').style.width = '0%';
    saveState(currentPart, {});
    window.scrollTo({top: 0, behavior: 'smooth'});
  };

  // Toggle answer visibility
  window.toggleRespuestas = function(btn) {
    respuestasVisibles = !respuestasVisibles;
    document.body.classList.toggle('show-answers', respuestasVisibles);
    btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
    
    if (respuestasVisibles) {
      const partData = testData[currentPart];
      document.querySelectorAll('.question').forEach(card => {
        const qid = card.dataset.qid;
        const correcta = partData[qid].a;
        card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      });
    } else {
      document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
    }
  };

  // Initialize tabs
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      switchPart(parseInt(tab.dataset.part));
    });
  });

  // Initialize on load
  window.addEventListener('load', () => {
    document.getElementById('tab_1').classList.add('active');
    generarTest();
  });
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
})();
</script>
</body>
</html>
