<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RCF 5 - COMPLETO</title>
<style>
:root{--bg:#0b132b;--card:#1c2541;--accent:#5bc0be;--ok:#21c17a;--bad:#ff5d73;--text:#f5f7ff;--warning:#ffc107}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#0f1a3a);color:var(--text);min-height:100vh;font-size:14px}
.header{padding:12px 10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,19,43,.98);backdrop-filter:blur(10px);z-index:100;position:relative}
.header h1{margin:0 0 6px 0;font-size:1.2rem;font-weight:700}
.back-btn{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:36px;height:36px;padding:0;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--text);text-decoration:none;font-size:18px;transition:all .2s;line-height:1;display:flex;align-items:center;justify-content:center}
.back-btn:active{background:rgba(255,255,255,.15);transform:translateY(-50%) scale(.95)}
.badge{display:inline-block;padding:3px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:11px;margin-top:4px}
.tabs{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0;justify-content:center}
.tab{border:1px solid rgba(255,255,255,.15);border-radius:50%;width:32px;height:32px;padding:0;background:rgba(255,255,255,.08);cursor:pointer;color:var(--text);transition:all .2s;font-size:13px;font-weight:700;display:flex;align-items:center;justify-content:center}
.tab.active{background:var(--accent);border-color:var(--accent);color:#001018}
.tab:active{background:rgba(91,192,190,.2);border-color:rgba(91,192,190,.3)}
.container{max-width:1000px;margin:0 auto;padding:10px 8px 100px}
.progress-bar{background:rgba(255,255,255,.1);height:3px;border-radius:999px;margin:8px 0;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#3a9d9a);width:0%;transition:width .3s ease}
.card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;margin:8px 0;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.q-title{font-weight:600;margin-bottom:10px;line-height:1.4;font-size:14px}
.q-number{color:var(--accent);font-size:11px;font-weight:700;margin-bottom:6px;display:block}
.options{display:grid;grid-template-columns:1fr;gap:6px}
.option{background:#121a34;border:2px solid rgba(255,255,255,.08);padding:8px;border-radius:8px;display:flex;align-items:flex-start;gap:8px;cursor:pointer;transition:all .2s;font-size:13px;line-height:1.3}
.option:active{background:#1a2341;border-color:rgba(91,192,190,.3)}
.option input{margin-top:2px;cursor:pointer;flex-shrink:0}
.option div{flex:1}
.answer-key{display:none;margin-top:8px;padding:8px;background:rgba(91,192,190,.1);border-radius:6px;font-size:12px}
.answer-key b{color:var(--accent)}
.show-answers .answer-key{display:block}
.feedback{margin-top:6px;font-size:12px;font-weight:600;padding:6px;border-radius:4px}
.correct{border-color:rgba(33,193,122,.6)!important;background:rgba(33,193,122,.05)!important}
.incorrect{border-color:rgba(255,93,115,.75)!important;background:rgba(255,93,115,.05)!important}
.actions{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(15,26,58,0),rgba(15,26,58,.99));padding:10px 8px;padding-bottom:calc(10px + env(safe-area-inset-bottom));backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.08);z-index:99}
.actions .bar{max-width:1000px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
button{background:var(--accent);border:none;color:#001018;font-weight:700;padding:10px 14px;border-radius:8px;cursor:pointer;transition:all .2s;font-size:13px;touch-action:manipulation}
button:active{background:var(--accent);opacity:.9;transform:scale(.98)}
button.secondary{background:transparent;border:1px solid rgba(255,255,255,.35);color:var(--text)}
button.secondary:active{background:rgba(255,255,255,.05)}
.score{font-weight:700;font-size:1rem}
.score-details{font-size:11px;color:var(--text);opacity:.8;margin-top:2px}
.footer{opacity:.8;font-size:11px;text-align:center;padding:15px;color:rgba(255,255,255,.5)}
@media (min-width: 720px){
  .options{grid-template-columns:1fr 1fr}
  body{font-size:15px}
  .card{padding:20px;margin:16px 0;border-radius:16px}
  .q-title{font-size:15px;margin-bottom:12px}
  .option{padding:12px;gap:10px;font-size:14px}
  .header{padding:20px 16px}
  .header h1{font-size:1.5rem;margin-bottom:8px}
  .container{padding:20px 16px 120px}
  button{padding:12px 18px;font-size:14px}
  .tab{width:40px;height:40px;font-size:15px}
}
@media (max-width: 640px){
  .actions .bar{flex-direction:column;gap:6px}
  .score{text-align:center;width:100%;font-size:0.95rem}
  .actions{padding:8px 6px;padding-bottom:calc(8px + env(safe-area-inset-bottom))}
  button{width:100%;padding:11px 12px}
}
.scroll-top{position:fixed;bottom:20px;right:20px;width:40px;height:40px;background:var(--accent);color:#fff;border:none;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;font-size:20px;z-index:99;opacity:0;visibility:hidden;transition:all .3s;touch-action:manipulation}
.scroll-top.visible{opacity:1;visibility:visible}
.scroll-top:active{transform:scale(.95)}
@media (max-width:640px){
  .scroll-top{width:36px;height:36px;bottom:16px;right:16px;font-size:18px}
}
</style>
</head>
<body>
  <div class="header">
    <a href="index.html" class="back-btn">‚Üê</a>
    <h1>RCF 5 - COMPLETO</h1>
    <div class="badge">94 preguntas</div>
    <div class="tabs">
      <button class="tab" id="tab_1" data-part="1">1</button>
      <button class="tab" id="tab_2" data-part="2">2</button>
      <button class="tab" id="tab_3" data-part="3">3</button>
      <!-- <button class="tab" id="tab_4" data-part="4">4</button>  -->
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>
  
  <div class="container" id="questionsContainer">
    <!-- Questions will be generated here -->
  </div>

  <div class="actions">
    <div class="bar">
      <div>
        <div class="score">Puntuaci√≥n: <span id="score">‚Äî</span></div>
        <div class="score-details" id="scoreDetails"></div>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <button onclick="calificar()">üìä Calificar</button>
        <button class="secondary" onclick="reiniciar()">üîÑ Reiniciar</button>
        <button class="secondary" onclick="toggleRespuestas(this)">üëÅÔ∏è Ver respuestas</button>
      </div>
    </div>
  </div>
<button id="scrollTopBtn" class="scroll-top">‚Üë</button>
<script>
(function () {
  // Test data organized by parts (1-4)
  const testData = {
  "1": {
  "1": {
    "q": "El objeto del Libro Quinto del RCF es:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Establecer reglas operativas generales para que la circulaci√≥n de los trenes y de las maniobras se realice de forma segura, eficiente y puntual."},
      {"l": "B", "t": "Definir el funcionamiento, tanto en situaci√≥n normal como degradada, de distintas instalaciones de seguridad que son de uso com√∫n en la RFIG."},
      {"l": "C", "t": "Describir y regular todas las se√±ales que son de aplicaci√≥n general en la RFIG."},
      {"l": "D", "t": "Las respuestas a) y b) son correctas."}
    ]},
  "2": {
    "q": "¬øQu√© se entiende por instalaci√≥n de seguridad?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Los componentes, equipos y sistemas o conjunto de ellos, homologados, instalados en tierra con el fin de aumentar el nivel de seguridad de la circulaci√≥n."},
      {"l": "B", "t": "Los componentes, equipos y sistemas o conjunto de ellos, instalados en tierra y a bordo de los veh√≠culos con el fin de aumentar el nivel de seguridad y regularidad de la circulaci√≥n."},
      {"l": "C", "t": "Los componentes, equipos y sistemas, homologados, instalados a bordo de los veh√≠culos con el fin de aumentar el nivel de seguridad de la circulaci√≥n."},
      {"l": "D", "t": "Los componentes, equipos y sistemas o conjunto de ellos, homologados, instalados en tierra y a bordo de los vehiculos con el fin de aumentar el nivel de seguridad de la circulaci√≥n."}
    ]},
  "3": {
    "q": "¬øCu√°l de las siguientes no es una instalaci√≥n de seguridad?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Se√±ales ferroviarias."},
      {"l": "B", "t": "Bloqueos."},
      {"l": "C", "t": "ASFA."},
      {"l": "D", "t": "Ninguna de las anteriores, ya que todas son instalaciones de seguridad."}
    ]},
  "4": {
    "q": "¬øCu√°l de las siguientes instalaciones de seguridad no forma parte de los dispositivos embarcados?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Informaci√≥n de velocidad."},
      {"l": "B", "t": "Detectores de cajas calientes y frenos agarrotados."},
      {"l": "C", "t": "Vigilancia (hombre muerto)."},
      {"l": "D", "t": "Detecci√≥n de sobretemperatura en √≥rganos de rodadura y freno."}
    ]},
  "5": {
    "q": "¬øCu√°l de las siguientes instalaciones de seguridad no forma parte de los sistemas auxiliares de detecci√≥n en v√≠a?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Detectores de cajas calientes y frenos agarrotados."},
      {"l": "B", "t": "Detectores de ca√≠da de objetos a la v√≠a."},
      {"l": "C", "t": "Detecci√≥n de sobretemperatura en √≥rganos de rodadura y freno."},
      {"l": "D", "t": "Detectores de impacto en v√≠a."}
    ]},
  "6": {
    "q": "Al sistema que permite fijar itinerarios seguros para la circulaci√≥n de los trenes en el √°mbito de las estaciones, estableciendo una relaci√≥n de dependencia entre las posiciones de los distintos aparatos de via del itinerario, las semibarreras de PN (en su caso) y las √≥rdenes que transmiten las se√±ales se le denomina:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Bloqueo."},
      {"l": "B", "t": "Enclavamiento."},
      {"l": "C", "t": "Sistema de protecci√≥n de v√≠a."},
      {"l": "D", "t": "Aparato de seguridad."}
    ]},
  "7": {
    "q": "Al sistema que establece relaciones de incompatibilidad con posiciones o configuraciones de otros aparatos o se√±ales, impidiendo establecer itinerarios incompatibles que al interferir con los primeros afecten a su seguridad se le denomina:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Enclavamiento."},
      {"l": "B", "t": "Aparato de seguridad."},
      {"l": "C", "t": "Bloqueo."},
      {"l": "D", "t": "Ruta de deslizamiento."}
    ]},
  "8": {
    "q": "Para efectuar la apertura de una se√±al que autorice un itinerario, es imprescindible que con anterioridad todos los aparatos del mismo se hallen dispuestos en la posici√≥n adecuada.\" Este es un principio b√°sico de:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Los bloqueos."},
      {"l": "B", "t": "Los enclavamientos."},
      {"l": "C", "t": "Las dos respuestas anteriores son correctas."},
      {"l": "D", "t": "Las instalaciones de seguridad."}
    ]},
  "9": {
    "q": "\"Mientras est√© abierta la se√±al que autoriza un itinerario, no se puede cambiar la posici√≥n de ning√∫n aparato relacionado con el mismo.\" Este es un principio b√°sico de:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Los bloqueos."},
      {"l": "B", "t": "Las instalaciones de seguridad."},
      {"l": "C", "t": "Los enclavamientos."},
      {"l": "D", "t": "Las dos respuestas anteriores son correctas."}
    ]},
  "10": {
    "q": "\"No se puede realizar la apertura de una se√±al que autorice un itinerario incompatible con otro ya autorizado.\" Este es un principio b√°sico de:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Los enclavamientos."},
      {"l": "B", "t": "Las instalaciones de seguridad."},
      {"l": "C", "t": "Los bloqueos."},
      {"l": "D", "t": "Las rutas de deslizamiento."}
    ]},
  "11": {
    "q": "¬øCu√°l de los siguientes NO es un principio b√°sico de los enclavamientos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Para efectuar la apertura de una se√±al que autorice un itinerario, es imprescindible que con anterioridad todos los aparatos del mismo se hallen dispuestos en la posici√≥n adecuada."},
      {"l": "B", "t": "Mientras est√© abierta la se√±al que autoriza un itinerario, no se puede cambiar la posici√≥n de ning√∫n aparato relacionado con el mismo."},
      {"l": "C", "t": "No se puede realizar la apertura de una se√±al que autorice un itinerario incompatible con otro ya autorizado."},
      {"l": "D", "t": "Ninguna de las anteriores respuestas es correcta, ya que todos son principios b√°sicos de los enclavamientos."}
    ]},
  "12": {
    "q": "¬øCu√°l de los siguientes NO es un principio b√°sico de los enclavamientos?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Los trenes que circulen por la misma v√≠a y en el mismo sentido, lo hagan a la distancia que ofrezca la seguridad de que no se va a producir un alcance."},
      {"l": "B", "t": "No se puede realizar la apertura de una se√±al que autorice un itinerario incompatible con otro autorizado."},
      {"l": "C", "t": "Ha de ofrecer la seguridad necesaria para que puedan ser compatibles las maniobras que se realicen por la banda de una estaci√≥n con la llegada de un tren por esa banda procedente de su colateral."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "13": {
    "q": "Cuando dos o m√°s itinerarios no pueden ser realizados de forma simult√°nea se consideran:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Inseguros."},
      {"l": "B", "t": "No reglamentarios."},
      {"l": "C", "t": "Incompatibles."},
      {"l": "D", "t": "Compatibles."}
    ]},
  "14": {
    "q": "¬øMediante qu√© documento estar√°n contenidas las incompatibilidades de cada enclavamiento?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "En la Tira de Bloqueo que regule su operatividad."},
      {"l": "B", "t": "En la Consigna que regule su operatividad."},
      {"l": "C", "t": "En el Aviso que regule su operatividad."},
      {"l": "D", "t": "En el Reglamento de Circulaci√≥n Ferroviaria."}
    ]},
  "15": {
    "q": "En el manejo de los enclavamientos y de los elementos que gestionan se cumplir√° estrictamente con lo prescrito en:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "EI RID."},
      {"l": "B", "t": "En las Consignas del Al que regulen su operatividad."},
      {"l": "C", "t": "El Libro de Itinerarios que regula su operatividad."},
      {"l": "D", "t": "La primera y la segunda respuesta son correctas."}
    ]},
  "16": {
    "q": "¬øQu√© se describe en los documentos relativos al manejo de los enclavamientos y de los elementos que gestionan?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Las instalaciones y la forma de proceder en caso de aver√≠a."},
      {"l": "B", "t": "Las instalaciones, su utilizaci√≥n y la forma de proceder en caso de aver√≠a."},
      {"l": "C", "t": "La su amplitud de movimientos y la forma de proceder en caso de aver√≠a."},
      {"l": "D", "t": "Las instalaciones y la forma de proceder."}
    ]},
  "17": {
    "q": "Cuando excepcionalmente, sea preciso maniobrar agujas a distancia en un itinerario no disuelto por un tren, una vez desenclavado √©ste, se deber√° comprobar previamente:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "La liberaci√≥n del circuito de via correspondiente a la aguja."},
      {"l": "B", "t": "La apertura mediante la orden de rebase autorizado de la se√±al asociada a la aguja."},
      {"l": "C", "t": "La detenci√≥n y posici√≥n del tren en relaci√≥n a la aguja que se pretende mover."},
      {"l": "D", "t": "La compatibilidad del movimiento a realizar."}
    ]},
  "18": {
    "q": "Cuando no sea posible efectuar la apertura de la se√±al de entrada como establezca la correspondiente Consigna del Al, se podr√°n establecer itinerarios para el estacionamiento de los trenes en condiciones especiales. Para efectuarlo se tendr√° en cuenta los siguientes criterios:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Mediante la orden de rebase autorizado cuando la se√±al de entrada disponga de dicha indicaci√≥n."},
      {"l": "B", "t": "Si la se√±al de entrada no dispone de la indicaci√≥n de rebase autorizado, se autorizar√° su rebase."},
      {"l": "C", "t": "Si la estaci√≥n no dispone de se√±al de entrada, se detendr√° el tren ante la primera aguja y se ordenar√° su estacionamiento con marcha de maniobras."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "19": {
    "q": "Si una se√±al de entrada no dispone de la indicaci√≥n de rebase autorizado, y no es posible efectuar la apertura de esta se√±al como establezca la correspondiente Consigna del Al:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Se autorizar√° su rebase por telefonema, prescribiendo cuantas comprobaciones precise realizar el tren."},
      {"l": "B", "t": "Se autorizar√° su rebase por escrito, prescribiendo marcha de maniobras."},
      {"l": "C", "t": "Se autorizar√° su rebase por medios inform√°ticos, prescribiendo marcha de maniobras y cuantas comprobaciones precise realizar el tren."},
      {"l": "D", "t": "Se autorizar√° su rebase por telefonema, prescribiendo marcha de maniobras y cuantas comprobaciones precise realizar el tren."}
    ]},
  "20": {
    "q": "¬øCu√°l de los siguientes es un itinerario incompatible?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "La entrada de un tren mientras est√° saliendo otro del mismo sentido por el lado opuesto, si la estaci√≥n dispone de enclavamiento, pero el movimiento no es presenciado por el Responsable de Circulaci√≥n."},
      {"l": "B", "t": "En una estaci√≥n sin enclavamiento, la salida simult√°nea de dos trenes en sentido contrario cuando la disposici√≥n de las v√≠as o de los aparatos de v√≠a impiden realizar itinerarios concurrentes."},
      {"l": "C", "t": "La entrada simult√°nea de dos trenes en sentido contrario en una estaci√≥n sin enclavamiento."},
      {"l": "D", "t": "Dos itinerarios que pueden ser realizados de forma simult√°nea en una estaci√≥n con enclavamiento."}
    ]},
  "21": {
    "q": "Para la entrada, salida y paso de los trenes, las agujas se hallar√°n en todos los casos inmovilizadas como se indique:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En el correspondiente Libro de Itinerarios."},
      {"l": "B", "t": "En la correspondiente ETI CMS."},
      {"l": "C", "t": "En las correspondientes Especificaciones T√©cnicas de Circulaci√≥n."},
      {"l": "D", "t": "En la correspondiente Consigna del Al."}
    ]},
  "22": {
    "q": "Una aguja inmovilizada mec√°nica o el√©ctricamente en la posici√≥n correspondiente a un itinerario no precisa comprobaci√≥n para otros itinerarios posteriores siempre que:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Dicha posici√≥n se mantenga inalterable."},
      {"l": "B", "t": "La secuencia de se√±ales no sea la adecuada para el enclavamiento."},
      {"l": "C", "t": "Se permita la apertura de la se√±al asociada a la aguja."},
      {"l": "D", "t": "Ninguna de las respuestas anteriores es correcta."}
    ]},
  "23": {
    "q": "Siempre que sea posible, las agujas de las v√≠as donde se encuentre material apartado estar√°n orientadas:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "A v√≠a directa."},
      {"l": "B", "t": "En la posici√≥n que evite la deriva a v√≠as de servicio."},
      {"l": "C", "t": "En la posici√≥n que evite la deriva a v√≠as de circulaci√≥n."},
      {"l": "D", "t": "En la posici√≥n que permita tomarlas de tal√≥n."}
    ]},
  "24": {
    "q": "¬øCu√°l de las siguientes no es una funci√≥n de los sistemas de protecci√≥n del tren?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Informaci√≥n de las se√±ales en cabina."},
      {"l": "B", "t": "Frenado del tren al realizar un movimiento no autorizado o al superar la velocidad limite."},
      {"l": "C", "t": "Frenado del tren en caso de mal funcionamiento del sistema."},
      {"l": "D", "t": "Supervisi√≥n puntual de la velocidad del tren, con aplicaci√≥n de rectas de frenado acordes con el estado de la se√±alizaci√≥n y con la velocidad m√°xima permitida en cada punto."}
    ]},
  "25": {
    "q": "¬øCu√°l de los siguientes sistemas de protecci√≥n del tren proporciona informaci√≥n y supervisi√≥n continua?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "ASFA."},
      {"l": "B", "t": "LZB."},
      {"l": "C", "t": "EBICAB."},
      {"l": "D", "t": "ERTMS Nivel 1."}
    ]},
  "26": {
    "q": "¬øCu√°l de los siguientes sistemas de protecci√≥n del tren proporciona informaci√≥n y supervisi√≥n continua?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "ASFA."},
      {"l": "B", "t": "ERTMS Nivel 2."},
      {"l": "C", "t": "EBICAB."},
      {"l": "D", "t": "ERTMS Nivel 1."}
    ]},
  "27": {
    "q": "¬øCu√°l de los siguientes sistemas de protecci√≥n del tren proporciona informaci√≥n puntual y supervisi√≥n continua?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "ASFA."},
      {"l": "B", "t": "EBICAB."},
      {"l": "C", "t": "ERTMS Nivel 1."},
      {"l": "D", "t": "Las respuestas b) y c) son correctas."}
    ]},
  "28": {
    "q": "¬øCu√°l de los siguientes sistemas de protecci√≥n del tren proporciona informaci√≥n puntual y supervisi√≥n puntual o semicontinua?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "ASFA."},
      {"l": "B", "t": "ERTMS Nivel 2."},
      {"l": "C", "t": "EBICAB."},
      {"l": "D", "t": "ERTMS Nivel 1."}
    ]},
  "29": {
    "q": "¬øCu√°l de las siguientes no es una funcionalidad del equipo embarcado de los sistemas de protecci√≥n del tren?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Presentar al Maquinista permanently en el panel de informaci√≥n del sistema, las indicaciones necesarias para regular la marcha del tren, de modo que en caso de una actuaci√≥n no acorde con aquellas, el sistema act√∫e provocando una orden de freno."},
      {"l": "B", "t": "Presentar al Maquinista el estado de las circulaciones que hay alrededor, de modo que regule la marcha del tren."},
      {"l": "C", "t": "Presentar al Maquinista √≥rdenes, indicaciones y el modo de operaci√≥n del sistema de se√±alizaci√≥n para las actuaciones concretas que deba realizar."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "30": {
    "q": "En los sistemas de protecci√≥n del tren, las operaciones de conexi√≥n y desconexi√≥n del equipo embarcado se realizar√°n conforme a lo indicado en:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "El Manual de Circulaci√≥n de cada veh√≠culo."},
      {"l": "B", "t": "El Libro de Normas del Maquinista."},
      {"l": "C", "t": "El Manual de Conducci√≥n de cada vehiculo."},
      {"l": "D", "t": "La Consigna del Al que regula el sistema de protecci√≥n del tren."}
    ]},
  "31": {
    "q": "¬øEn qu√© caso el Maquinista llevar√° conectado el sistema embarcado de protecci√≥n del tren compatible con el trayecto a recorrer?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En funci√≥n de la l√≠nea que vaya a recorrer."},
      {"l": "B", "t": "Cuando circule por un trayecto incompatible con el sistema embarcado."},
      {"l": "C", "t": "Nunca."},
      {"l": "D", "t": "Siempre, salvo en los casos especificados en este Reglamento."}
    ]},
  "32": {
    "q": "En los sistemas de protecci√≥n del tren, la introducci√≥n de datos al sistema embarcado de protecci√≥n del tren compatible con el trayecto a recorrer la realizar√° el maquinista:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "A tren parado."},
      {"l": "B", "t": "Con el equipo embarcado anulado."},
      {"l": "C", "t": "A tren en movimiento."},
      {"l": "D", "t": "A tren parado, previa autorizaci√≥n del Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."}
    ]}
  },
  "2": {
  "33": {
    "q": "En los sistemas de protecci√≥n del tren, la introducci√≥n de datos en el equipo embarcado se realizar√° de acuerdo con lo indicado en:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Los Manuales de conducci√≥n y del equipo."},
      {"l": "B", "t": "El Manual de Circulaci√≥n y la Consigna del Al que lo regula."},
      {"l": "C", "t": "Con los datos que figuran en el \"Libro de Itinerarios del Maquinista\"."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "34": {
    "q": "Si el Maquinista debe considerar inexistentes las se√±ales intermedias en BA, ¬øen qu√© caso o casos no ser√° necesario desconectar el equipo ASFA?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Cuando se le notifique o se regule por Consigna que las balizas de las se√±ales que deba considerar inexistentes han sido retiradas o tapadas con chapas cubrebalizas."},
      {"l": "B", "t": "Cuando el sistema ASFA permita circular en modo BTS."},
      {"l": "C", "t": "Se desconectar√° en cualquier caso."},
      {"l": "D", "t": "Las respuestas a) y b) son correctas."}
    ]},
  "35": {
    "q": "Cuando el Maquinista, circulando a contrav√≠a, deba considerar inexistente la se√±al de salida, llevar√° el sistema ASFA:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Desconectado."},
      {"l": "B", "t": "Conectado en modo BTS."},
      {"l": "C", "t": "Conectado."},
      {"l": "D", "t": "Conectado solo en los trayectos donde haya se√±ales de entrada a contrav√≠a."}
    ]},
  "36": {
    "q": "Cuando las se√±ales est√©n apagadas o muestren √≥rdenes o informaciones discordantes con las del equipo ASFA, el Maquinista:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Desconectar√° el equipo e informar√° al Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM o al Responsable de Circulaci√≥n del CTC."},
      {"l": "B", "t": "Actuar√° siempre cumpliendo la indicaci√≥n m√°s restrictiva."},
      {"l": "C", "t": "Seleccionar√° el modo BTS, si el sistema lo permite."},
      {"l": "D", "t": "Efectuar√° detenci√≥n inmediata."}
    ]},
  "37": {
    "q": "El sistema para el control de presencia activa del Maquinista, que act√∫a sobre el freno de emergencia del tren en caso de falta de reconocimiento cuando el sistema lo requiere se denomina:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Dispositivo de vigilancia."},
      {"l": "B", "t": "Dispositivo de informaci√≥n de velocidad."},
      {"l": "C", "t": "Dispositivo de detecci√≥n de sobretemperatura en elementos de rodadura y freno."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "38": {
    "q": "El sistema que informa de manera continua al Maquinista de la velocidad real del tren, la cual es grabada en los elementos de registro del vehiculo se denomina:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Dispositivo de vigilancia."},
      {"l": "B", "t": "Dispositivo de informaci√≥n de velocidad."},
      {"l": "C", "t": "Dispositivo de detecci√≥n de sobretemperatura en elementos de rodadura y freno."},
      {"l": "D", "t": "Ninguna de las anteriores respuestas es correcta."}
    ]},
  "39": {
    "q": "El sistema que informa al Maquinista de la existencia de alarmas por temperaturas en elementos de rodadura y de freno se denomina:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Dispositivo de vigilancia."},
      {"l": "B", "t": "Dispositivo de informaci√≥n de velocidad."},
      {"l": "C", "t": "Dispositivo de detecci√≥n de sobretemperatura en elementos de rodadura y freno."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "40": {
    "q": "En los dispositivos embarcados de vigilancia, de informaci√≥n de velocidad y de detecci√≥n de sobretemperatura en elementos de rodadura y freno, la informaci√≥n de estos equipos:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Estar√° condicionada por la informaci√≥n transmitida a trav√©s de los equipos en v√≠a."},
      {"l": "B", "t": "Prevalece sobre la de los equipos en v√≠a."},
      {"l": "C", "t": "No prevalece en caso de mostrar una alarma no detectada por los equipos en v√≠a."},
      {"l": "D", "t": "Todas las respuestas anteriores son correctas."}
    ]},
  "41": {
    "q": "En la estaci√≥n de origen de cada servicio, las cabinas de conducci√≥n deber√°n tener en perfectas condiciones de funcionamiento:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Los dispositivos de vigilancia e informaci√≥n de velocidad."},
      {"l": "B", "t": "EI TELOC y los dispositivos de informaci√≥n y supervisi√≥n del veh√≠culo motor."},
      {"l": "C", "t": "En los veh√≠culos equipados, el dispositivo de detecci√≥n de sobretemperatura en elementos de rodadura y freno."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "42": {
    "q": "Para trenes sin dispositivo embarcado de detecci√≥n de sobretemperatura en elementos de rodadura y de freno, cuando un Responsable de Circulaci√≥n reciba una alarma instalada en el registrador:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Proceder√° a comunic√°rselo al Maquinista y asegurar√° la parada del tren ante la primera se√±al."},
      {"l": "B", "t": "Asegurar√° la parada del tren ante la primera se√±al."},
      {"l": "C", "t": "En funci√≥n del componente afectado y del tipo de alarma, proceder√° a comunic√°rselo al Maquinista, asegurando la parada del tren ante la primera se√±al u orden√°ndole detenci√≥n inmediata."},
      {"l": "D", "t": "En funci√≥n del componente afectado y del tipo de alarma, proceder√° a comunic√°rselo al Encargado de los trabajos, o asegurar√° la parada del tren ante la primera se√±al o pantalla de cantonamiento."}
    ]},
  "43": {
    "q": "En cuanto a los sistemas auxiliares de detecci√≥n instalados en la via, en los detectores de sobretemperatura en cajas de grasa, ruedas y discos de freno, cuando un Responsable de Circulaci√≥n reciba una alarma en el registrador, indicar√° al Maquinista:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Lado al que afecta la alarma: derecho o izquierdo en el sentido de circulaci√≥n del tren."},
      {"l": "B", "t": "Tipo de alarma y temperatura medida."},
      {"l": "C", "t": "Lugar que ocupa el eje o rueda con indicios de caldeo, contado desde cabeza a cola incluida la locomotora o locomotoras."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "44": {
    "q": "Los detectores de impacto en v√≠a:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Son sistemas que permiten detectar la relaci√≥n de dependencia entre las instalaciones de seguridad de una l√≠nea."},
      {"l": "B", "t": "Son sistemas que permiten detectar deformaciones o descarrilamientos en los elementos de rodadura de los trenes, as√≠ como sobrepesos en ejes."},
      {"l": "C", "t": "Son sistemas que permiten detectar defectos o deformaciones en los elementos de rodadura de los trenes, as√≠ como sobrepesos en ejes."},
      {"l": "D", "t": "Son sistemas que permiten detectar defectos o deformaciones en los ejes de los trenes, as√≠ como sobrepesos en los elementos de rodadura."}
    ]},
  "45": {
    "q": "Los detectores de viento lateral:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Son sistemas que permiten conocer la existencia de obst√°culos en los puntos de la v√≠a en los que se instalan desde el momento de su ca√≠da."},
      {"l": "B", "t": "Son sistemas encargados de controlar la velocidad del viento que incide lateralmente sobre la v√≠a. Est√°n compuestos por un n√∫mero determinado de estaciones meteorol√≥gicas instaladas entre las se√±ales de entrada de dos estaciones, que permiten dividir el cant√≥n de viento."},
      {"l": "C", "t": "Son sistemas encargados de controlar la velocidad del viento que incide perpendicularmente sobre la v√≠a. Est√°n compuestos por un n√∫mero determinado de estaciones meteorol√≥gicas instaladas en la l√≠nea, que permiten dividirla en sectores de control de viento."},
      {"l": "D", "t": "Son sistemas encargados de controlar la velocidad del viento que incide lateralmente sobre la v√≠a. Est√°n compuestos por un n√∫mero determinado de estaciones meteorol√≥gicas instaladas en la l√≠nea, que permiten dividirla en sectores de control de viento."}
    ]},
  "46": {
    "q": "En los detectores de viento lateral, cada estaci√≥n meteorol√≥gica predice el comportamiento del viento (detector predictivo) en su sector o sectores de control, con una antelaci√≥n de:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "5 minutos."},
      {"l": "B", "t": "10 minutos."},
      {"l": "C", "t": "20 minutos."},
      {"l": "D", "t": "30 minutos."}
    ]},
  "47": {
    "q": "En los detectores de viento lateral, cuando se desconoce el estado de viento del sector de control asociado a la estaci√≥n meteorol√≥gica, siendo la situaci√≥n m√°s desfavorable para la operaci√≥n, se produce la siguiente alarma:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Alarma de viento."},
      {"l": "B", "t": "Alarma de operatividad."},
      {"l": "C", "t": "Alarma de desactivaci√≥n."},
      {"l": "D", "t": "Alarma de operaci√≥n."}
    ]},
  "48": {
    "q": "En los detectores de viento lateral, cuando se predice un viento incompatible con la circulaci√≥n normal de los trenes, se produce la siguiente alarma:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Alarma de viento."},
      {"l": "B", "t": "Alarma de operatividad."},
      {"l": "C", "t": "Alarma de desactivaci√≥n."},
      {"l": "D", "t": "Alarma de anulaci√≥n."}
    ]},
  "49": {
    "q": "En los detectores de viento lateral, cuando una alarma de viento o de operatividad desaparece, se produce la siguiente alarma:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Alarma de anulaci√≥n."},
      {"l": "B", "t": "Alarma de desactivaci√≥n."},
      {"l": "C", "t": "Alarma de desaparici√≥n."},
      {"l": "D", "t": "Alarma de operatividad."}
    ]},
  "50": {
    "q": "En los detectores de viento lateral, cuando se produce una alarma de viento:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Se considerar√° que la v√≠a o v√≠as afectadas est√°n interceptadas en el punto correspondiente."},
      {"l": "B", "t": "El Responsable de Circulaci√≥n prohibe la circulaci√≥n de los trenes y maniobras en el sector de control de viento afectado."},
      {"l": "C", "t": "Se determinar√° una \"Limitaci√≥n Temporal de la Velocidad M√°xima a implantar en el sector de control de viento afectado, que se deber√°n notificar al Maquinista."},
      {"l": "D", "t": "Se notificar√° al Maquinista marcha a la vista en el punto correspondiente."}
    ]},
  "51": {
    "q": "En los detectores de viento lateral, ¬øcu√°l de los siguientes motivos puede producir una alarma de operatividad?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "P√©rdida de comunicaci√≥n con la estaci√≥n meteorol√≥gica."},
      {"l": "B", "t": "Estado de \"habilitaci√≥n\" de la estaci√≥n meteorol√≥gica."},
      {"l": "C", "t": "Activaci√≥n del \"modo de mantenimiento\" de la estaci√≥n meteorol√≥gica."},
      {"l": "D", "t": "Las respuestas a) y b) son correctas."}
    ]},
  "52": {
    "q": "En los detectores de viento lateral, ¬øcu√°ndo desaparecer√° una alarma de viento?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Cuando se predice que el viento ser√° compatible con la circulaci√≥n normal de trenes en el sector de control correspondiente."},
      {"l": "B", "t": "Cuando desaparece el motivo que impide conocer el estado operativo de un sector de control de viento."},
      {"l": "C", "t": "La primera respuesta es correcta, y adem√°s, al recuperarse la comunicaci√≥n o la \"habilitaci√≥n\" de la estaci√≥n meteorol√≥gica, pueden pasar algunos minutos hasta que se realice la predicci√≥n y, por tanto, se indique el estado por viento del sector. Durante este tiempo perdurar√° el estado de \"inhabilitaci√≥n\"."},
      {"l": "D", "t": "La segunda respuesta es correcta, y adem√°s, al recuperarse la comunicaci√≥n o la \"habilitaci√≥n\" de la estaci√≥n meteorol√≥gica, pueden pasar algunos minutos hasta que se realice la predicci√≥n y, por tanto, se indique el estado por viento del sector. Durante este tiempo perdurar√° el estado de \"inhabilitaci√≥n\"."}
    ]},
  "53": {
    "q": "En los detectores de viento lateral, ¬øcu√°ndo desaparecer√° una alarma de operatividad?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Cuando se predice que el viento ser√° compatible con la circulaci√≥n normal de trenes en el sector de control correspondiente."},
      {"l": "B", "t": "Cuando desaparece el motivo que impide conocer el estado operativo de un sector de control de viento."},
      {"l": "C", "t": "La primera respuesta es correcta, y adem√°s, al recuperarse la comunicaci√≥n o la \"habilitaci√≥n\" de la estaci√≥n meteorol√≥gica, pueden pasar algunos minutos hasta que se realice la predicci√≥n y, por tanto, se indique el estado por viento del sector. Durante este tiempo perdurar√° el estado de \"inhabilitaci√≥n\"."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "54": {
    "q": "En los detectores de viento lateral, ¬øC√≥mo se notificar√°n al Maquinista las \"limitaciones temporales de velocidad m√°xima\" establecidas?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Incluy√©ndolas en el \"Libro de itinerarios del Maquinista\"."},
      {"l": "B", "t": "Por escrito en la estaci√≥n de origen o en la primera donde efect√∫e parada."},
      {"l": "C", "t": "Por medio de la radiotelefon√≠a, cuando no sea posible establecerlas a trav√©s del sistema de regulaci√≥n del tr√°fico."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "55": {
    "q": "¬øD√≥nde se sit√∫a un PN enclavado?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Entre las se√±ales de salida de una estaci√≥n y su protecci√≥n se activa mediante el establecimiento de los itinerarios que le afecten, y se desactiva con la progresiva disoluci√≥n del itinerario al avance del tren."},
      {"l": "B", "t": "Entre las se√±ales de entrada de una estaci√≥n y su protecci√≥n se activa mediante el establecimiento de los itinerarios que le afecten, y se desactiva con la progresiva disoluci√≥n del itinerario al avance del tren."},
      {"l": "C", "t": "En plena v√≠a y su protecci√≥n es activada autom√°ticamente al aproximarse el tren al mismo."},
      {"l": "D", "t": "En plena v√≠a y su protecci√≥n es activada a utom√°ticamente al aproximarse el tren al paso por las se√±ales intermedias que lo protegen."}
    ]},
  "56": {
    "q": "¬øD√≥nde se sit√∫a un PN autom√°tico?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Entre las se√±ales de salida de una estaci√≥n y su protecci√≥n se activa mediante el establecimiento de los itinerarios que le afecte n, y se desactiva con la progresiva disoluci√≥n del itinerario al avance del tren."},
      {"l": "B", "t": "En plena v√≠a y su protecci√≥n es activada autom√°ticamente al aproximarse el tren al mismo."},
      {"l": "C", "t": "Entre las se√±ales de entrada de una estaci√≥n y su protecci√≥n se activa mediante el establecimiento de los itinerarios que le afecten, y se desactiva con la progresiva disoluci√≥n del itinerario al avance del tren."},
      {"l": "D", "t": "En plena v√≠a y su protecci√≥n es activada autom√°ticamente al aproximarse el tren al paso por las se√±ales intermedias que lo pr otegen."}
    ]},
  "57": {
    "q": "¬øEn qu√© caso la protecci√≥n de los PN estar√° asegurada antes del paso de los trenes, por las indicaciones de las se√±ales fijas y por las instalaciones que los equipan?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En los PN enclavados."},
      {"l": "B", "t": "En los PN autom√°ticos."},
      {"l": "C", "t": "En ning√∫n caso."},
      {"l": "D", "t": "Las respuestas a) y b) son correctas."}
    ]},
  "58": {
    "q": "¬øCu√°ndo podr√°n establecerse Pasos a Nivel provisionales por obras?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Siempre que la magnitud de las obras lo requiera, previa autorizaci√≥n del Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."},
      {"l": "B", "t": "En ning√∫n caso."},
      {"l": "C", "t": "Con car√°cter excepcional y por causas absolutamente justificadas y deber√°n contar con la autorizaci√≥n expresa de la AESF."},
      {"l": "D", "t": "La respuesta anterior es correcta, y adem√°s el AI efectuar√° su regulaci√≥n por Consigna indicando en la misma los sistemas de seguridad y se√±alizaci√≥n que afecten al PN."}
    ]},
  "59": {
    "q": "No tendr√°n la consideraci√≥n de PN las intersecciones de caminos o v√≠as de comunicaci√≥n con l√≠neas f√©rreas cuando √©stas se produzcan en:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "El interior de las terminales log√≠sticas."},
      {"l": "B", "t": "En el exterior de las zonas portuarias."},
      {"l": "C", "t": "En el interior de las zonas portuarias."},
      {"l": "D", "t": "Las respuestas a) y b) son correctas."}
    ]},
  "60": {
    "q": "¬øEn qu√© documento deber√° quedar establecida la protecci√≥n y regulaci√≥n de las intersecciones de caminos o v√≠as de comunicaci√≥n con l√≠neas f√©rreas cuando √©stas no tengan la consideraci√≥n de PN?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "En el SGS de cada AI."},
      {"l": "B", "t": "En una Consigna del AI."},
      {"l": "C", "t": "En el SGS de cada EF."},
      {"l": "D", "t": "En el Libro de Itinerarios del Maquinista."}
    ]},
  "61": {
    "q": "El Responsable de Circulaci√≥n que tenga a su cargo una se√±al y excepcionalmente, debiendo ordenar parada, no lo hiciera:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Lo comunicar√° urgentemente por telefonema a los Responsables de Circulaci√≥n afectados. A continuaci√≥n, esa estaci√≥n dejar√° de intervenir en el bloqueo."},
      {"l": "B", "t": "Evitar√° el establecimiento de secuencias anormales de se√±ales en relaci√≥n a la se√±al afectada y lo comunicar√° inmediatamente al Responsable de Circulaci√≥n de la primera estaci√≥n abierta y al de la Banda de Regulaci√≥n con objeto de que adopten las medidas correspondientes."},
      {"l": "C", "t": "Asegurar√° la detenci√≥n de los trenes afectados con los medios a su alcance (se√±ales port√°tiles de parada, etc.) y lo comunicar√° inmediatamente al Responsable de Circulaci√≥n de la estaci√≥n colateral que proceda y al de la Banda de Regulaci√≥n con objeto de que adopten las medidas correspondientes."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "62": {
    "q": "Cuando el Responsable de Circulaci√≥n a cargo de la se√±al no pueda comprobar por s√≠ mismo o por una persona a su cargo la posici√≥n de ciertas agujas, piquetes, ocupaci√≥n de v√≠as, barreras, etc., ¬øPodr√° pedir al Maquinista que realice estas comprobaciones visuales?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "S√≠, verbalmente."},
      {"l": "B", "t": "S√≠, prescribi√©ndolo en la autorizaci√≥n de rebase de la se√±al."},
      {"l": "C", "t": "No, en ning√∫n caso."},
      {"l": "D", "t": "Solo si la estaci√≥n est√° en Mando Local."}
    ]},
  "63": {
    "q": "Est√© o no libre el trayecto a recorrer el rebase de una se√±al de Salida de Bloqueo Autom√°tico (BA) se autorizar√°:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Siempre con marcha de maniobras."},
      {"l": "B", "t": "Siempre con marcha normal."},
      {"l": "C", "t": "Marcha a la vista en BA con CTC y marcha normal en BA sin CTC."},
      {"l": "D", "t": "Siempre con marcha a la vista."}
    ]}
  },
  
  "3": {
  "64": {
    "q": "En l√≠neas con BLA y BSL, el rebase de las se√±ales de salida y de los PCA, en su caso, se autorizar√°:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Con marcha a la vista, est√© o no libre el trayecto a recorrer."},
      {"l": "B", "t": "Con marcha normal en BSL y con marcha a la vista en BLA."},
      {"l": "C", "t": "Con marcha normal en BLA y con marcha a la vista en BSL."},
      {"l": "D", "t": "Con marcha normal en BSL y BLA, cuando el trayecto a recorrer est√© libre de trenes."}
    ]},
  "65": {
    "q": "Cuando el Responsable de Circulaci√≥n no pueda autorizar al Maquinista el rebase de una se√±al mediante telefonema:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "No se podr√° autorizar el rebase de la se√±al."},
      {"l": "B", "t": "Se establecer√° el BT por anormalidad."},
      {"l": "C", "t": "El rebase se har√° mediante la entrega al Maquinista del Bolet√≠n de autorizaci√≥n de rebase."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "66": {
    "q": "En la autorizaci√≥n de rebase de una se√±al, ¬øPodr√° autorizarse simult√°neamente el rebase de dos o m√°s se√±ales?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "No, el rebase de se√±ales se har√° de una en una."},
      {"l": "B", "t": "S√≠, en l√≠neas sin CTC, dotadas de radiotelefon√≠a."},
      {"l": "C", "t": "S√≠, cuando √©stas est√©n directamente relacionadas."},
      {"l": "D", "t": "No podr√° autorizarse simult√°neamente el rebase de dos o m√°s se√±ales, excepto cuando se trate de bloqueos unidireccionales."}
    ]},
  "67": {
    "q": "En l√≠neas sin CTC, dotadas de radiotelefon√≠a, el rebase de varias se√±ales sucesivas:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Podr√° autorizarse por su Responsable de Circulaci√≥n."},
      {"l": "B", "t": "Podr√° autorizarse por su Responsable de Circulaci√≥n cuando se trate del BA."},
      {"l": "C", "t": "No podr√° autorizarse."},
      {"l": "D", "t": "Se realizar√° con marcha a la vista, sin exceder de 10 km/h al paso por las agujas."}
    ]},
  "68": {
    "q": "¬øEn qu√© caso se podr√° autorizar el rebase de varias se√±ales sucesivas?",
    "a": "B",
    "opts": [
      {"l": "A", "t": "En l√≠neas de BA y siempre que lo autorice el Responsable de Circulaci√≥n de la Banda de Regulaci√≥n del PM."},
      {"l": "B", "t": "En l√≠neas con CTC, dotadas de radiotelefon√≠a, cuando lo autorice el Responsable de Circulaci√≥n del mismo."},
      {"l": "C", "t": "No se puede autorizar e n ning√∫n caso."},
      {"l": "D", "t": "Cuando se circule al amparo del BT por anormalidad en el BA o BLA."}
    ]},
  "69": {
    "q": "En el rebase de varias se√±ales sucesivas, ¬øcu√°ndo ser√° prescrita al Maquinista la comprobaci√≥n de la posici√≥n de las agujas?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Cuando el Responsable de Circulaci√≥n del CTC no pueda realizarla por s√≠ mismo, o por una persona a su cargo."},
      {"l": "B", "t": "En cualquier case."},
      {"l": "C", "t": "Cuando el rebase lo prescriba un Responsable de Circulaci√≥n que no est√© ubicado en la dependencia asociada a esas se√±ales."},
      {"l": "D", "t": "Cuando √©sta sea la primera circulaci√≥n a la que se le haya autorizado el rebase."}
    ]},
  "70": {
    "q": "En l√≠neas de CTC, dotadas de radiotelefon√≠a, en el telefonema de rebase de varias se√±ales sucesivas se prescribir√° una velocidad de paso por las agujas sin exceder de:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "10 km/h si las toma de punta y 5 km/h si las toma de tal√≥n."},
      {"l": "B", "t": "10 km/h."},
      {"l": "C", "t": "30 km/h."},
      {"l": "D", "t": "No se prescribir√° ninguna velocidad."}
    ]},
  "71": {
    "q": "Cuando un tren rebase una se√±al que estaba en V√≠a Libre y por un cambio intempestivo pasa a ordenar parada, el Maquinista:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Efectuar√° detenci√≥n accidental."},
      {"l": "B", "t": "Reanudar√° la marcha, con marcha a la vista hasta llegar a la se√±al siguiente, sin exceder de 40 km/h."},
      {"l": "C", "t": "Informar√° del rebase al Responsable de Circulaci√≥n que la tenga a su cargo y se atendr√° a sus instrucciones."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "72": {
    "q": "La utilizaci√≥n de los enclavamientos en casos de aver√≠a en las agujas y otros equipos del mismo se har√° rigurosamente de acuerdo con lo prescrito:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En el Reglamento."},
      {"l": "B", "t": "En los SGS de los AI."},
      {"l": "C", "t": "En la consigna correspondiente que regule en cada caso, su funcionalidad."},
      {"l": "D", "t": "Las respuestas a) y c) son correctas."}
    ]},
  "73": {
    "q": "¬øEn qu√© casos podr√°, excepcionalmente, variarse un itinerario establecido?",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Antes de que el Responsable de Circulaci√≥n se lo comunique al Maquinista."},
      {"l": "B", "t": "Siempre que el Responsable de Circulaci√≥n as√≠ lo requiera."},
      {"l": "C", "t": "Cuando, previamente, el Responsable de Circulaci√≥n se lo comunique al Maquinista y reciba de √©ste su enterado. Excepcionalmente, solo para evitar un peligro inminente, podr√° variarse un itinerario establecido, aunque previamente no se haya realizado la comunicaci√≥n entre Responsable de Circulaci√≥n y Maquinista."},
      {"l": "D", "t": "Las respuestas b) y c) son correctas."}
    ]},
  "74": {
    "q": "Cuando en la estaci√≥n de origen, o en la primera de la RFIG para trenes internacionales, un veh√≠culo motor vaya a circular por una l√≠nea equipada con alg√∫n sistema de protecci√≥n del tren, y no pueda hacerlo por inutilidad o deficiencia en el equipo embarcado:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Circular√° con una segunda persona habilitada en la cabina de conducci√≥n."},
      {"l": "B", "t": "Ser√° considerado in√∫til para circular con dicho sistema, pudiendo ser trasladado hasta la siguiente estaci√≥n o base de mantenimiento."},
      {"l": "C", "t": "Podr√° circular normalmente hasta su destino bajo supervisi√≥n del Responsable de Circulaci√≥n."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "75": {
    "q": "Las se√±ales de un PN, ¬øestar√°n relacionadas con las se√±ales de las estaciones colaterales?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "No, nunca."},
      {"l": "B", "t": "Solo en el caso de PN autom√°ticos."},
      {"l": "C", "t": "Solo en el caso de PN enclavados."},
      {"l": "D", "t": "En el case de PN enclavados y, seg√∫n se determine, en los autom√°ticos."}
    ]},
  "76": {
    "q": "¬øQu√© indica la se√±al de \"Protecci√≥n de Paso a Nivel\" con luz amarilla fija?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Que el PN est√° protegido."},
      {"l": "B", "t": "Que el PN no est√° protegido."},
      {"l": "C", "t": "Que el tren debe detenerse ante el PN."},
      {"l": "D", "t": "Ninguna es correcta."}
    ]},
  "77": {
    "q": "Ante una se√±al de \"Protecci√≥n de Paso a Nivel\" con luz amarilla de destellos, el Maquinista deber√°:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "Circular con marcha normal."},
      {"l": "B", "t": "Circular con precauci√≥n, sin exceder la velocidad que se indique."},
      {"l": "C", "t": "Detenerse ante el PN y no reanudar la marcha hasta comprobar que las barreras est√°n bajadas."},
      {"l": "D", "t": "Detenerse ante la se√±al."}
    ]},
  "78": {
    "q": "Los detectores de ca√≠da de objetos a la v√≠a son sistemas que permiten:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Detectar la presencia de personas en la v√≠a."},
      {"l": "B", "t": "Detectar el exceso de velocidad de los trenes."},
      {"l": "C", "t": "Detectar la temperatura de los ejes."},
      {"l": "D", "t": "Conocer la existencia de obst√°culos en los puntos de la v√≠a en los que se instalan desde el momento de su ca√≠da."}
    ]},
  "79": {
    "q": "Cuando se produce una alarma por ca√≠da de objetos a la v√≠a, el sistema:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Informa solo al Responsable de Circulaci√≥n."},
      {"l": "B", "t": "Provoca el frenado de emergencia de todos los trenes en la zona."},
      {"l": "C", "t": "Pone en fase de parada las se√±ales que protegen el punto afectado."},
      {"l": "D", "t": "Env√≠a un mensaje de texto al Maquinista."}
    ]},
  "80": {
    "q": "El sistema ASFA (Anuncio de Se√±ales y Frenado Autom√°tico) es un sistema de protecci√≥n:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "De supervisi√≥n continua."},
      {"l": "B", "t": "De supervisi√≥n puntual."},
      {"l": "C", "t": "Que solo funciona en l√≠neas de alta velocidad."},
      {"l": "D", "t": "Que sustituye a las se√±ales fijas."}
    ]},
  "81": {
    "q": "En el sistema ASFA, la transmisi√≥n de informaci√≥n entre la v√≠a y el tren se realiza mediante:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Balizas instaladas en la v√≠a."},
      {"l": "B", "t": "Cable de v√≠a (lazo)."},
      {"l": "C", "t": "Ondas de radio."},
      {"l": "D", "t": "Sat√©lite."}
    ]},
  "82": {
    "q": "¬øQu√© ocurre si un Maquinista no reconoce una se√±al de \"Anuncio de Parada\" en el equipo ASFA?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "El equipo emite un pitido constante."},
      {"l": "B", "t": "No ocurre nada si la velocidad es baja."},
      {"l": "C", "t": "Se enciende una luz roja en el panel."},
      {"l": "D", "t": "Se produce la aplicaci√≥n del freno de emergencia."}
    ]},
  "83": {
    "q": "El sistema ERTMS Nivel 2 utiliza para la transmisi√≥n de datos tren-tierra:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "El sistema de radio GSM-R."},
      {"l": "B", "t": "Eurobalizas exclusivamente."},
      {"l": "C", "t": "El carril como conductor."},
      {"l": "D", "t": "Se√±ales luminosas laterales."}
    ]},
  "84": {
    "q": "En el nivel 2 de ERTMS, ¬øes necesaria la existencia de se√±ales luminosas laterales para la circulaci√≥n normal?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "No, la informaci√≥n se recibe directamente en la cabina."},
      {"l": "B", "t": "S√≠, son obligatorias siempre."},
      {"l": "C", "t": "Solo en las estaciones."},
      {"l": "D", "t": "Solo si falla el sistema de radio."}
    ]},
  "85": {
    "q": "El dispositivo de vigilancia (\"Hombre Muerto\") tiene como funci√≥n:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Controlar la velocidad del tren."},
      {"l": "B", "t": "Detectar obst√°culos en la v√≠a."},
      {"l": "C", "t": "Controlar el consumo de energ√≠a."},
      {"l": "D", "t": "Detener el tren si el Maquinista pierde la capacidad de control."}
    ]},
  "86": {
    "q": "Si el dispositivo de vigilancia detecta falta de actividad, primero emite:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Una orden de freno de servicio."},
      {"l": "B", "t": "Una orden de freno de emergencia."},
      {"l": "C", "t": "Una se√±al ac√∫stica y/o luminosa de aviso."},
      {"l": "D", "t": "Un mensaje por radiotelefon√≠a al PM."}
    ]},
  "87": {
    "q": "Los detectores de cajas calientes (DCC) se instalan generalmente:",
    "a": "D",
    "opts": [
      {"l": "A", "t": "En las estaciones de origen."},
      {"l": "B", "t": "En los t√∫neles."},
      {"l": "C", "t": "En las curvas de radio reducido."},
      {"l": "D", "t": "En la plena v√≠a, para supervisar los trenes en marcha."}
    ]},
  "88": {
    "q": "Ante una alarma de \"Caja Caliente\" de nivel cr√≠tico, el Maquinista debe:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Continuar hasta la siguiente estaci√≥n a velocidad normal."},
      {"l": "B", "t": "Reducir la velocidad a 30 km/h."},
      {"l": "C", "t": "Detener el tren inmediatamente en condiciones de seguridad."},
      {"l": "D", "t": "Ignorar la alarma si no percibe olor a quemado."}
    ]},
  "89": {
    "q": "El registrador de eventos (teloc) graba, entre otros datos:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "La temperatura exterior."},
      {"l": "B", "t": "La m√∫sica que escucha el Maquinista."},
      {"l": "C", "t": "La velocidad, el espacio recorrido y el estado de las se√±ales/controles."},
      {"l": "D", "t": "El n√∫mero de viajeros."}
    ]},
  "90": {
    "q": "En caso de aver√≠a de un enclavamiento que afecte a una aguja, esta deber√° ser:",
    "a": "A",
    "opts": [
      {"l": "A", "t": "Asegurada mec√°nicamente (con cerrojo o calce) si se va a circular sobre ella."},
      {"l": "B", "t": "Ignorada si el tren circula por v√≠a directa."},
      {"l": "C", "t": "Desmontada inmediatamente."},
      {"l": "D", "t": "Engrasada antes del paso del tren."}
    ]},
  "91": {
    "q": "¬øQu√© es un \"itinerario de seguridad\"?",
    "a": "A",
    "opts": [
      {"l": "A", "t": "El camino establecido para un tren donde todos los elementos est√°n enclavados y protegidos."},
      {"l": "B", "t": "Cualquier v√≠a por la que pueda circular un tren."},
      {"l": "C", "t": "El trayecto entre dos estaciones colaterales."},
      {"l": "D", "t": "Una v√≠a de apartado."}
    ]},
  "92": {
    "q": "La disoluci√≥n de un itinerario en un enclavamiento electr√≥nico suele ser:",
    "a": "C",
    "opts": [
      {"l": "A", "t": "Manual, siempre por el Responsable de Circulaci√≥n."},
      {"l": "B", "t": "Por tiempo, siempre 5 minutos despu√©s."},
      {"l": "C", "t": "Autom√°tica, al paso del tren por los diferentes circuitos de v√≠a."},
      {"l": "D", "t": "Mediante una llamada telef√≥nica."}
    ]},
  "93": {
    "q": "¬øEn qu√© caso se notificar√° a los Maquinistas que un PN autom√°tico o enclavado se encuentra sin protecci√≥n?",
    "a": "D",
    "opts": [
      {"l": "A", "t": "Cuando se quede sin tensi√≥n."},
      {"l": "B", "t": "Cuando tenga rotas las semibarreras."},
      {"l": "C", "t": "Cuando tenga apagadas las se√±ales destellantes a la carretera."},
      {"l": "D", "t": "Todas son correctas."}
    ]},
  "94": {
    "q": "Para poder autorizar el retroceso de un tren en un trayecto en el que exista alg√∫n PN de protecci√≥n autom√°tica y no funcionen los dispositivos de protecci√≥n:",
    "a": "B",
    "opts": [
      {"l": "A", "t": "No se podr√° autorizar el retroceso de un tren en este caso."},
      {"l": "B", "t": "Es necesario situar en cabeza del tren en el sentido del movimiento a una persona habilitada para realizar maniobras y, en su caso, actuar sobre los elementos de protecci√≥n del PN."},
      {"l": "C", "t": "Se har√° a velocidad normal."},
      {"l": "D", "t": "Solo se puede hacer si es de d√≠a."}
    ]}
  }
 };

  const totalPreguntasGlobal = Object.values(testData).reduce((acc, part) => {
  return acc + Object.keys(part).length;
}, 0);

  let currentPart = 1;
  let respuestasVisibles = false;
  const LS_PREFIX = 'rcf-libro1-part-';

  // Load state from localStorage
  function loadState(part) {
    try {
      return JSON.parse(localStorage.getItem(LS_PREFIX + part)) || {};
    } catch {
      return {};
    }
  }

  // Save state to localStorage
  function saveState(part, state) {
    localStorage.setItem(LS_PREFIX + part, JSON.stringify(state));
  }

  // Switch between parts
  function switchPart(part) {
    currentPart = part;
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('tab_' + part).classList.add('active');
    generarTest();
    // window.scrollTo({top: 0, behavior: 'smooth'});
  }

  // Generate test for current part
  function generarTest() {
    const container = document.getElementById('questionsContainer');
    container.innerHTML = '';
    
    const partData = testData[currentPart];
    if (!partData) return;
    
    const state = loadState(currentPart);
    
    Object.keys(partData).forEach(qid => {
      const q = partData[qid];
      const card = document.createElement('div');
      card.className = 'card question';
      card.dataset.qid = qid;
      
      let opcionesHTML = '';
      q.opts.forEach(opt => {
        const checked = state[qid] === opt.l ? 'checked' : '';
        opcionesHTML += `
          <label class="option">
            <input type="radio" name="q${qid}" value="${opt.l}" ${checked} />
            <div><b>${opt.l})</b> ${opt.t}</div>
          </label>
        `;
      });

      card.innerHTML = `
        <span class="q-number">Pregunta ${qid} de ${totalPreguntasGlobal}</span>
        <div class="q-title">${q.q}</div>
        <div class="options">${opcionesHTML}</div>
        <div class="answer-key">‚úì Respuesta correcta: <b>${q.a}</b></div>
        <div class="feedback"></div>
      `;
      
      container.appendChild(card);
    });

    bindRadios();
    updateProgress();
  }
  
  function bindRadios() {
    document.querySelectorAll('input[type=radio]').forEach(radio => {
      radio.addEventListener('change', updateProgress);
    });
  }
  
    // Update progress bar
  function updateProgress() {
    const partData = testData[currentPart];
    const total = Object.keys(partData).length;
    const answered = document.querySelectorAll('input[type=radio]:checked').length;
    const percentage = (answered / total) * 100;
    document.getElementById('progressBar').style.width = percentage + '%';
    
    // Save current answers
    const state = {};
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const selected = card.querySelector('input[type=radio]:checked');
      if (selected) {
        state[qid] = selected.value;
      }
    });
    saveState(currentPart, state);
  }

  // Grade the test
  window.calificar = function() {
    const partData = testData[currentPart];
    let correctas = 0;
    let incorrectas = 0;
    let sinResponder = 0;
    const total = Object.keys(partData).length;
    
    document.querySelectorAll('.question').forEach(card => {
      const qid = card.dataset.qid;
      const correcta = partData[qid].a;
      const seleccionada = card.querySelector('input[type=radio]:checked');
      
      card.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
      
      if (seleccionada) {
        const letra = seleccionada.value;
        if (letra === correcta) {
          correctas++;
          seleccionada.closest('.option').classList.add('correct');
          card.querySelector('.feedback').textContent = '‚úî ¬°Correcto!';
          card.querySelector('.feedback').style.color = 'var(--ok)';
        } else {
          incorrectas++;
          seleccionada.closest('.option').classList.add('incorrect');
          card.querySelector('.feedback').innerHTML = `‚úñ Incorrecto ¬∑ La correcta es: <b>${correcta}</b>`;
          card.querySelector('.feedback').style.color = 'var(--bad)';
          const corr = card.querySelector(`input[value="${correcta}"]`);
          if (corr) corr.closest('.option').classList.add('correct');
        }
      } else {
        sinResponder++;
        card.querySelector('.feedback').textContent = '‚ö† Sin responder';
        card.querySelector('.feedback').style.color = 'var(--warning)';
      }
    });
    
    const porcentaje = Math.round((correctas / total) * 100);
    const aprobado = porcentaje >= 50;
    
    document.getElementById('score').textContent = `${correctas} / ${total} (${porcentaje}%)`;
    document.getElementById('score').style.color = aprobado ? 'var(--ok)' : 'var(--bad)';
    
    document.getElementById('scoreDetails').innerHTML = `
      ‚úî ${correctas} correctas ¬∑ ‚úñ ${incorrectas} incorrectas ¬∑ ‚ö† ${sinResponder} sin responder
    `;
    
   // window.scrollTo({top: 0, behavior: 'smooth'});
  };

  // Reset the test
  window.reiniciar = function() {
    if (!confirm('¬øReiniciar respuestas de esta parte?')) return;
    
    document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
    document.querySelectorAll('.option').forEach(o => o.classList.remove('correct','incorrect'));
    document.querySelectorAll('.feedback').forEach(f => {f.textContent=''; f.removeAttribute('style')});
    document.getElementById('score').textContent = '‚Äî';
    document.getElementById('score').removeAttribute('style');
    document.getElementById('scoreDetails').textContent = '';
    document.getElementById('progressBar').style.width = '0%';
    saveState(currentPart, {});
    window.scrollTo({top: 0, behavior: 'smooth'});
  };

  // Toggle answer visibility
  window.toggleRespuestas = function(btn) {
    respuestasVisibles = !respuestasVisibles;
    document.body.classList.toggle('show-answers', respuestasVisibles);
    btn.textContent = respuestasVisibles ? 'üôà Ocultar respuestas' : 'üëÅÔ∏è Ver respuestas';
    
    if (respuestasVisibles) {
      const partData = testData[currentPart];
      document.querySelectorAll('.question').forEach(card => {
        const qid = card.dataset.qid;
        const correcta = partData[qid].a;
        card.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
        const corr = card.querySelector(`input[value="${correcta}"]`);
        if (corr) corr.closest('.option').classList.add('correct');
      });
    } else {
      document.querySelectorAll('.option').forEach(o => o.classList.remove('correct'));
    }
  };

  // Initialize tabs
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      switchPart(parseInt(tab.dataset.part));
    });
  });

  // Initialize on load
  window.addEventListener('load', () => {
    document.getElementById('tab_1').classList.add('active');
    generarTest();
  });
// Scroll to top button functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

// Show/hide button based on scroll position
window.addEventListener('scroll', () => {
  if (window.pageYOffset > 300) {
    scrollTopBtn.classList.add('visible');
  } else {
    scrollTopBtn.classList.remove('visible');
  }
});

// Smooth scroll to top on click
scrollTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
})();
</script>
</body>
</html>
